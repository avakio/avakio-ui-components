(function(Ce,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("react/jsx-runtime"),require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react/jsx-runtime","react","react-dom"],e):(Ce=typeof globalThis<"u"?globalThis:Ce||self,e(Ce.AvakioUIComponents={},Ce["react/jsx-runtime"],Ce.React,Ce.ReactDOM))})(this,(function(Ce,e,t,bt){"use strict";var ut=typeof document<"u"?document.currentScript:null;const ya=(s,r,l)=>Math.min(Math.max(s,r),l);function gt({open:s,anchorRef:r,anchorRect:l,x:i,y:c,offset:m,width:w,height:A,theme:z,modal:V,closeOnOutside:p=!0,closeOnEsc:D=!0,onClose:W,className:ee,style:K,children:_,id:L,testId:J}){const j=t.useRef(null),[q,E]=t.useState({top:0,left:0}),f=t.useMemo(()=>{if(typeof w=="number")return w;if(typeof w=="string"){const S=parseInt(w,10);return isNaN(S)?320:S}return 320},[w]);if(t.useEffect(()=>{if(!s)return;const S=()=>{let F=typeof i=="number"?i:(window.innerWidth-f)/2,$=typeof c=="number"?c:96;if(r?.current){const a=r.current.getBoundingClientRect();F=a.left+(m?.x??0),$=a.bottom+(m?.y??8)}else l&&(F=l.left+(m?.x??0),$=l.bottom+(m?.y??8));const T=Math.max(8,window.innerWidth-f-8);F=ya(F,8,T),$=Math.max(8,$),E({top:$,left:F})};return S(),window.addEventListener("resize",S),window.addEventListener("scroll",S,!0),()=>{window.removeEventListener("resize",S),window.removeEventListener("scroll",S,!0)}},[s,r,l,i,c,m,f]),t.useEffect(()=>{if(!s||!D)return;const S=F=>{F.key==="Escape"&&W?.()};return window.addEventListener("keydown",S),()=>window.removeEventListener("keydown",S)},[s,D,W]),t.useEffect(()=>{if(!s||!p)return;const S=F=>{j.current&&(j.current.contains(F.target)||W?.())};return document.addEventListener("mousedown",S,!0),()=>document.removeEventListener("mousedown",S,!0)},[s,p,W]),!s)return null;const te=e.jsxs(e.Fragment,{children:[V&&e.jsx("div",{className:"avakio-popup-overlay","data-admin-theme":z,onClick:p?W:void 0}),e.jsx("div",{ref:j,id:L,"data-testid":J,className:["avakio-popup",ee||""].join(" ").trim(),"data-admin-theme":z,style:{top:q.top,left:q.left,width:w??`${f}px`,height:A,...K},children:_})]});return bt.createPortal(te,document.body)}const ma=["material","flat","compact","dark","ocean","sunset"];function wa({columns:s,items:r,onMove:l,className:i,style:c,theme:m,id:w,testId:A}){const[z,V]=t.useState(null),p=t.useMemo(()=>{const K={};return s.forEach(_=>{K[_.id]=[]}),r.forEach(_=>{K[_.columnId]||(K[_.columnId]=[]),K[_.columnId].push(_)}),K},[s,r]),D=K=>_=>{V(K),_.dataTransfer.effectAllowed="move",_.dataTransfer.setData("text/plain",K)},W=K=>{K.preventDefault(),K.dataTransfer.dropEffect="move"},ee=K=>_=>{_.preventDefault();const L=_.dataTransfer.getData("text/plain")||z;L&&l&&l(L,K),V(null)};return e.jsx("div",{id:w,"data-testid":A,className:["avakio-portlet",i].filter(Boolean).join(" "),style:c,"data-admin-theme":m,children:e.jsx("div",{className:"avakio-portlet-grid",children:s.map(K=>e.jsxs("div",{className:"avakio-portlet-column",onDragOver:W,onDrop:ee(K.id),"data-column-id":K.id,"data-testid":`portlet-column-${K.id}`,children:[e.jsx("div",{className:"avakio-portlet-column-header",children:K.title}),e.jsxs("div",{className:"avakio-portlet-column-body",children:[p[K.id]?.map(_=>{const L=z===_.id;return e.jsxs("div",{className:"avakio-portlet-item"+(L?" avakio-portlet-item-dragging":""),draggable:!0,onDragStart:D(_.id),onDragEnd:()=>V(null),"data-testid":`portlet-item-${_.id}`,children:[e.jsx("div",{className:"avakio-portlet-item-title",children:_.title}),e.jsx("div",{className:"avakio-portlet-item-content",children:_.content})]},_.id)}),(!p[K.id]||p[K.id].length===0)&&e.jsx("div",{className:"avakio-portlet-empty",children:"Drop items here"})]})]},K.id))})})}const Na=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),xa=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,l,i)=>i?i.toUpperCase():l.toLowerCase()),yt=s=>{const r=xa(s);return r.charAt(0).toUpperCase()+r.slice(1)},mt=(...s)=>s.filter((r,l,i)=>!!r&&r.trim()!==""&&i.indexOf(r)===l).join(" ").trim(),Sa=s=>{for(const r in s)if(r.startsWith("aria-")||r==="role"||r==="title")return!0};var Ca={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const $a=t.forwardRef(({color:s="currentColor",size:r=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:c="",children:m,iconNode:w,...A},z)=>t.createElement("svg",{ref:z,...Ca,width:r,height:r,stroke:s,strokeWidth:i?Number(l)*24/Number(r):l,className:mt("lucide",c),...!m&&!Sa(A)&&{"aria-hidden":"true"},...A},[...w.map(([V,p])=>t.createElement(V,p)),...Array.isArray(m)?m:[m]]));const Ve=(s,r)=>{const l=t.forwardRef(({className:i,...c},m)=>t.createElement($a,{ref:m,iconNode:r,className:mt(`lucide-${Na(yt(s))}`,`lucide-${s}`,i),...c}));return l.displayName=yt(s),l};const wt=Ve("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const tt=Ve("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const Ye=Ve("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const qe=Ve("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const je=Ve("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const Da=Ve("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const Aa=Ve("chevrons-left",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]);const Ma=Ve("chevrons-right",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);const Ea=Ve("chevrons-up-down",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);const _a=Ve("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const Nt=Ve("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);const Ia=Ve("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);const La=Ve("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);const Ta=Ve("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Va=Ve("file",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]]);const Oa=Ve("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);const za=Ve("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);const Fa=Ve("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);const xt=Ve("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);const Pa=Ve("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);const St=Ve("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const Je=Ve("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);const Ha=Ve("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);const Ba=Ve("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);const We=Ve("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),at=({children:s,className:r,...l})=>e.jsx("button",{className:r,...l,children:s}),Ct=({className:s,...r})=>e.jsx("input",{className:s,...r}),$t=({children:s})=>e.jsx("div",{className:"relative",children:s}),Dt=({children:s})=>e.jsx("div",{children:s}),At=({className:s,children:r})=>e.jsx("div",{className:`absolute z-50 w-72 rounded-md border bg-white p-4 shadow-md ${s||""}`,children:r});function He(...s){return s.filter(Boolean).join(" ")}const ja=(s,r)=>{if(!s)return"—";const l=new Date(s);return Number.isNaN(l.getTime())?s:r?l.toLocaleString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):l.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})};function Mt({value:s,onChange:r,className:l,showTime:i=!0}){const c=s?new Date(s):null,[m,w]=t.useState(c||new Date),A=["January","February","March","April","May","June","July","August","September","October","November","December"],z=["SU","MO","TU","WE","TH","FR","SA"],{year:V,month:p}=t.useMemo(()=>({year:m.getFullYear(),month:m.getMonth()}),[m]),D=t.useMemo(()=>{const E=new Date(V,p,1),f=new Date(V,p+1,0),te=E.getDay(),S=f.getDate(),F=new Date(V,p,0).getDate(),$=[];for(let a=te-1;a>=0;a--)$.push({day:F-a,isCurrentMonth:!1,date:new Date(V,p-1,F-a)});for(let a=1;a<=S;a++)$.push({day:a,isCurrentMonth:!0,date:new Date(V,p,a)});const T=42-$.length;for(let a=1;a<=T;a++)$.push({day:a,isCurrentMonth:!1,date:new Date(V,p+1,a)});return $},[V,p]),W=()=>{w(new Date(V,p-1,1))},ee=()=>{w(new Date(V,p+1,1))},K=E=>{const f=new Date(E);if(i)c?(f.setHours(c.getHours()),f.setMinutes(c.getMinutes())):(f.setHours(0),f.setMinutes(0)),f.setSeconds(0),f.setMilliseconds(0),r(f.toISOString());else{const te=f.getFullYear(),S=String(f.getMonth()+1).padStart(2,"0"),F=String(f.getDate()).padStart(2,"0");r(`${te}-${S}-${F}`)}},_=(E,f)=>{const te=c?new Date(c):new Date;te.setHours(E),te.setMinutes(f),te.setSeconds(0),te.setMilliseconds(0),r(te.toISOString())},L=()=>{const E=new Date;E.setSeconds(0),E.setMilliseconds(0),r(E.toISOString()),w(E)},J=()=>{r("")},j=E=>c?E.getDate()===c.getDate()&&E.getMonth()===c.getMonth()&&E.getFullYear()===c.getFullYear():!1,q=E=>{const f=new Date;return E.getDate()===f.getDate()&&E.getMonth()===f.getMonth()&&E.getFullYear()===f.getFullYear()};return e.jsxs("div",{className:He("avakio-datepicker-container",l),children:[e.jsxs("div",{className:"avakio-dp-nav",children:[e.jsx("button",{type:"button",onClick:W,className:"avakio-dp-nav-btn",children:e.jsx(qe,{className:"h-4 w-4"})}),e.jsxs("div",{className:"avakio-dp-nav-label",children:[A[p]," ",V]}),e.jsx("button",{type:"button",onClick:ee,className:"avakio-dp-nav-btn",children:e.jsx(je,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"avakio-dp-weekdays",children:z.map(E=>e.jsx("div",{className:"avakio-dp-weekday",children:E},E))}),e.jsx("div",{className:"avakio-dp-days",children:D.map((E,f)=>e.jsx("button",{type:"button",onClick:()=>K(E.date),className:He("avakio-dp-day",!E.isCurrentMonth&&"avakio-dp-day-outside",j(E.date)&&"avakio-dp-day-selected",q(E.date)&&!j(E.date)&&"avakio-dp-day-today"),children:E.day},f))}),i&&e.jsxs("div",{className:"avakio-dp-time",children:[e.jsxs("div",{className:"avakio-dp-time-header",children:[e.jsx(_a,{className:"h-4 w-4"}),e.jsx("span",{className:"avakio-dp-time-display",children:c?(()=>{const E=c.getHours(),f=c.getMinutes(),te=E>=12?"PM":"AM";return`${(E%12||12).toString().padStart(2,"0")}:${f.toString().padStart(2,"0")} ${te}`})():"00:00 AM"})]}),e.jsxs("div",{className:"avakio-dp-time-inputs",children:[e.jsx(Ct,{type:"number",min:"0",max:"23",placeholder:"00",value:c?c.getHours().toString().padStart(2,"0"):"",onChange:E=>{if(!E.target.value)return;const f=Math.max(0,Math.min(23,parseInt(E.target.value)||0)),te=c?c.getMinutes():0;_(f,te)},className:"avakio-dp-time-input",disabled:!c}),e.jsx("span",{className:"avakio-dp-time-separator",children:":"}),e.jsx(Ct,{type:"number",min:"0",max:"59",placeholder:"00",value:c?c.getMinutes().toString().padStart(2,"0"):"",onChange:E=>{if(!E.target.value)return;const f=Math.max(0,Math.min(59,parseInt(E.target.value)||0)),te=c?c.getHours():0;_(te,f)},className:"avakio-dp-time-input",disabled:!c})]}),!c&&e.jsx("p",{className:"avakio-dp-hint",children:"Select a date first"})]}),e.jsxs("div",{className:"avakio-dp-actions",children:[e.jsx(at,{type:"button",variant:"ghost",size:"sm",onClick:L,className:"avakio-dp-action-btn",children:"Today"}),e.jsx(at,{type:"button",variant:"ghost",size:"sm",onClick:J,className:"avakio-dp-action-btn",children:"Clear"})]})]})}function Ze({value:s,onChange:r,className:l,showTime:i=!0,id:c,testId:m,label:w="Date",placeholder:A="Select date",inline:z=!1}){const[V,p]=t.useState(!1),D=t.useRef(null),[W,ee]=t.useState(null);t.useEffect(()=>{const _=D.current;if(!_)return;const L=_.closest("[data-admin-theme]");if(ee(L?.getAttribute("data-admin-theme")??null),!L)return;const J=new MutationObserver(()=>{ee(L.getAttribute("data-admin-theme")??null)});return J.observe(L,{attributes:!0,attributeFilter:["data-admin-theme"]}),()=>J.disconnect()},[]);const K=ja(s,i);return z?e.jsx("div",{ref:D,id:c,"data-testid":m,className:He("avakio-dp-inline",l),"data-admin-theme":W||void 0,children:e.jsx(Mt,{value:s,onChange:r,showTime:i})}):e.jsx("div",{ref:D,id:c,"data-testid":m,className:He("avakio-dp",l),"data-admin-theme":W||void 0,children:e.jsxs($t,{open:V,onOpenChange:p,children:[e.jsx(Dt,{asChild:!0,children:e.jsxs("button",{type:"button",className:"avakio-dp-trigger",children:[e.jsxs("div",{className:"avakio-dp-trigger-label",children:[e.jsx(wt,{size:16}),e.jsx("span",{children:w})]}),e.jsx("div",{className:"avakio-dp-trigger-value",children:s?K:e.jsx("span",{className:"avakio-dp-placeholder",children:A})})]})}),e.jsxs(At,{className:"avakio-dp-popover",align:"start","data-admin-theme":W||void 0,children:[e.jsx(Mt,{value:s,onChange:_=>{r(_),!i&&_&&p(!1)},showTime:i}),e.jsxs("div",{className:"avakio-dp-footer",children:[e.jsx("button",{type:"button",className:"avakio-dp-footer-action",onClick:()=>{r(""),p(!1)},children:"Clear"}),e.jsx("button",{type:"button",className:"avakio-dp-footer-action avakio-dp-footer-action-primary",onClick:()=>p(!1),children:"Done"})]})]})]})})}function Et({id:s,name:r,value:l,checked:i,defaultChecked:c,indeterminate:m=!1,label:w,description:A,size:z="md",disabled:V=!1,error:p,required:D=!1,className:W="",onChange:ee,padding:K,margin:_,testId:L,...J}){const j=i!==void 0,[q,E]=t.useState(c??!1),f=t.useRef(null),te=j?!!i:q;t.useEffect(()=>{f.current&&(f.current.indeterminate=m&&!te)},[m,te]);const S=t.useMemo(()=>m&&!te?"indeterminate":te?"checked":"unchecked",[m,te]),F=()=>{if(V)return;j||E(ue=>m?!0:!ue),ee?.(m?!0:!te)},$=H=>{(H.key===" "||H.key==="Enter")&&(H.preventDefault(),F())},T=H=>{H.preventDefault(),H.stopPropagation(),F()},a=K?typeof K=="number"?`${K}px`:Array.isArray(K)?`${K[0]}px ${K[1]}px ${K[2]}px ${K[3]}px`:K:void 0,P=_?typeof _=="number"?`${_}px`:Array.isArray(_)?`${_[0]}px ${_[1]}px ${_[2]}px ${_[3]}px`:_:void 0,N={...a&&{padding:a},...P&&{margin:P}};return e.jsxs("label",{"data-testid":L,className:["avakio-checkbox",`avakio-checkbox-${z}`,V?"avakio-checkbox-disabled":"",p?"avakio-checkbox-error":"",W].filter(Boolean).join(" "),htmlFor:s,"data-status":S,style:N,children:[e.jsxs("div",{className:"avakio-checkbox-box",role:"checkbox",tabIndex:V?-1:0,"aria-checked":S==="indeterminate"?"mixed":te,"aria-disabled":V,"aria-invalid":!!p,onKeyDown:$,onClick:F,children:[e.jsx("input",{ref:f,id:s,name:r,value:l,type:"checkbox",checked:te,onChange:()=>{},disabled:V,tabIndex:-1,...J}),e.jsx("span",{className:"avakio-checkbox-mark",onClick:T})]}),(w||A||p)&&e.jsxs("div",{className:"avakio-checkbox-text",children:[e.jsxs("div",{className:"avakio-checkbox-label-row",children:[w&&e.jsx("span",{className:"avakio-checkbox-label",children:w}),D&&e.jsx("span",{className:"avakio-checkbox-required",children:"*"})]}),A&&e.jsx("div",{className:"avakio-checkbox-description",children:A}),p&&e.jsx("div",{className:"avakio-checkbox-error-text",children:p})]})]})}function _t({label:s,icon:r,iconRight:l,variant:i="primary",size:c="md",block:m=!1,loading:w=!1,badge:A,disabled:z,className:V="",children:p,autowidth:D=!1,tooltip:W,buttonType:ee="default",align:K="center",image:_,hotkey:L,popup:J,value:j,name:q,id:E,testId:f,theme:te,onClick:S,...F}){const $=z||w,T=t.useRef(null);t.useEffect(()=>{if(!L)return;const P=N=>{const H=L.toLowerCase().split("+"),ue=H.includes("ctrl")||H.includes("control"),le=H.includes("shift"),u=H.includes("alt"),v=H[H.length-1];ue===(N.ctrlKey||N.metaKey)&&le===N.shiftKey&&u===N.altKey&&N.key.toLowerCase()===v&&(N.preventDefault(),T.current?.click())};return document.addEventListener("keydown",P),()=>document.removeEventListener("keydown",P)},[L]);const a=ee==="icon"||ee==="iconButton"?"icon":ee==="iconTop"?"icon-top":"default";return e.jsxs("button",{ref:T,id:E,"data-testid":f,"data-admin-theme":te,className:["avakio-button",`avakio-button-${i}`,`avakio-button-${c}`,`avakio-button-type-${a}`,`avakio-button-align-${K}`,m?"avakio-button-block":"",D?"avakio-button-autowidth":"",w?"avakio-button-loading":"",_?"avakio-button-image":"",V].filter(Boolean).join(" "),disabled:$,title:W,value:j,name:q,onClick:S,...F,children:[e.jsxs("span",{className:"avakio-button-inner",children:[w&&e.jsx("span",{className:"avakio-button-spinner","aria-hidden":!0}),_&&e.jsx("img",{src:_,alt:"",className:"avakio-button-image-el"}),r&&e.jsx("span",{className:"avakio-button-icon-left",children:r}),(p||s)&&e.jsx("span",{className:"avakio-button-label",children:p??s}),A!==void 0&&e.jsx("span",{className:"avakio-button-badge",children:A}),l&&e.jsx("span",{className:"avakio-button-icon-right",children:l}),L&&e.jsx("span",{className:"avakio-button-hotkey",children:L})]}),J&&typeof J=="string"&&e.jsx("div",{className:"avakio-button-popup-ref","data-popup":J})]})}const st=s=>{if(!s)return"";const r=s.trim();if(/^#?[0-9a-fA-F]{6}$/.test(r))return r.startsWith("#")?r:`#${r}`;if(/^#?[0-9a-fA-F]{3}$/.test(r)){const l=r.replace("#","");return`#${l[0]}${l[0]}${l[1]}${l[1]}${l[2]}${l[2]}`}return""};function It({id:s,value:r,defaultValue:l="#1ca1c1",onChange:i,label:c,description:m,error:w,disabled:A=!1,readOnly:z=!1,required:V=!1,presets:p=[],allowCustomInput:D=!0,showPreview:W=!0,className:ee="",testId:K}){const _=r!==void 0,[L,J]=t.useState(st(l)||"#1ca1c1"),j=t.useRef(null),q=_?st(r||"")||"#1ca1c1":L;t.useEffect(()=>{!_&&!L&&J("#1ca1c1")},[_,L]);const E=t.useMemo(()=>p.length?p:[{label:"Cyan",value:"#1ca1c1"},{label:"Blue",value:"#3b82f6"},{label:"Indigo",value:"#6366f1"},{label:"Violet",value:"#8b5cf6"},{label:"Emerald",value:"#10b981"},{label:"Amber",value:"#f59e0b"},{label:"Orange",value:"#f57c00"},{label:"Red",value:"#ef4444"},{label:"Gray",value:"#9ca3af"},{label:"Dark",value:"#111827"}],[p]),f=F=>{const $=st(F);$&&(_||J($),i?.($))},te=F=>{const $=F.target.value,T=st($);_||J($),T&&i?.(T)},S=F=>{const $=F.target.value;f($)};return e.jsxs("div",{"data-testid":K,className:["avakio-colorpicker",A?"avakio-colorpicker-disabled":"",w?"avakio-colorpicker-error":"",ee].filter(Boolean).join(" "),"data-color":q,children:[(c||m||w)&&e.jsxs("div",{className:"avakio-colorpicker-header",children:[e.jsxs("div",{className:"avakio-colorpicker-label-row",children:[c&&e.jsx("span",{className:"avakio-colorpicker-label",children:c}),V&&e.jsx("span",{className:"avakio-colorpicker-required",children:"*"})]}),m&&e.jsx("div",{className:"avakio-colorpicker-description",children:m}),w&&e.jsx("div",{className:"avakio-colorpicker-error-text",children:w})]}),e.jsxs("div",{className:"avakio-colorpicker-body",children:[W&&e.jsx("div",{className:"avakio-colorpicker-preview",style:{backgroundColor:q},"aria-label":"Color preview"}),e.jsxs("div",{className:"avakio-colorpicker-controls",children:[e.jsx("input",{ref:j,type:"color",className:"avakio-colorpicker-native",value:q,onChange:S,disabled:A||z,"aria-label":"Pick color"}),D&&e.jsx("input",{type:"text",className:"avakio-colorpicker-hex",value:q,onChange:te,disabled:A||z,maxLength:7,"aria-label":"Hex value"})]})]}),E.length>0&&e.jsx("div",{className:"avakio-colorpicker-swatches","aria-label":"Color presets",children:E.map(F=>e.jsxs("button",{type:"button",className:"avakio-colorpicker-swatch",style:{backgroundColor:F.value},onClick:()=>f(F.value),disabled:A||z,"aria-label":F.label||F.value,children:[e.jsx("span",{className:"avakio-colorpicker-swatch-inner"}),q.toLowerCase()===F.value.toLowerCase()&&e.jsx("span",{className:"avakio-colorpicker-swatch-active"})]},F.value))})]})}function Lt({id:s,value:r,options:l=[],onChange:i,onInputChange:c,placeholder:m="Select or type...",label:w,labelAlign:A="left",labelWidth:z=100,disabled:V=!1,readonly:p=!1,filterMode:D="contains",customFilter:W,template:ee,width:K,maxHeight:_=300,required:L=!1,error:J,className:j="",testId:q}){const[E,f]=t.useState(!1),[te,S]=t.useState(""),[F,$]=t.useState(-1),[T,a]=t.useState(null),P=t.useRef(null),N=t.useRef(null),H=t.useRef(null),ue=l.map(b=>typeof b=="string"?{id:b,value:b}:b);t.useEffect(()=>{if(r!=null&&r!==""){const b=ue.find(Y=>Y.id===r||Y.value===r);b&&(a(b),S(b.value))}else a(null),S("")},[r]);const le=ue.filter(b=>{if(!te)return!0;if(W)return W(b,te);const Y=te.toLowerCase(),de=b.value.toLowerCase();return D==="startsWith"?de.startsWith(Y):de.includes(Y)}),u=b=>{const Y=b.target.value;S(Y),f(!0),$(-1),c?.(Y)},v=b=>{a(b),S(b.value),f(!1),$(-1),i?.(b.id,b)},g=b=>{b.stopPropagation(),a(null),S(""),f(!1),i?.("",void 0),P.current?.focus()},I=b=>{if(!(V||p))switch(b.key){case"ArrowDown":b.preventDefault(),E?$(Y=>Y<le.length-1?Y+1:Y):f(!0);break;case"ArrowUp":b.preventDefault(),E&&$(Y=>Y>0?Y-1:-1);break;case"Enter":b.preventDefault(),E&&F>=0&&le[F]&&v(le[F]);break;case"Escape":b.preventDefault(),f(!1),$(-1);break;case"Tab":f(!1);break}};t.useEffect(()=>{if(F>=0&&N.current){const b=N.current.children[F];b&&b.scrollIntoView({block:"nearest",behavior:"smooth"})}},[F]),t.useEffect(()=>{const b=Y=>{H.current&&!H.current.contains(Y.target)&&(f(!1),$(-1))};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]);const Z=b=>ee?ee(b):b.value;return e.jsxs("div",{ref:H,"data-testid":q,className:`avakio-combo-wrapper ${j}`,style:{width:K||"100%"},children:[w&&e.jsxs("label",{htmlFor:s,className:`avakio-combo-label avakio-combo-label-${A}`,style:{width:z},children:[w,L&&e.jsx("span",{className:"avakio-combo-required",children:"*"})]}),e.jsxs("div",{className:"avakio-combo-container",children:[e.jsxs("div",{className:`avakio-combo-input-wrapper ${E?"open":""} ${J?"error":""} ${V?"disabled":""}`,children:[e.jsx(Je,{className:"avakio-combo-search-icon",size:16}),e.jsx("input",{ref:P,id:s,type:"text",className:"avakio-combo-input",value:te,onChange:u,onKeyDown:I,onFocus:()=>!p&&f(!0),placeholder:m,disabled:V,readOnly:p,required:L}),te&&!V&&!p&&e.jsx("button",{type:"button",className:"avakio-combo-clear-btn",onClick:g,tabIndex:-1,children:e.jsx(We,{size:16})}),e.jsx("button",{type:"button",className:"avakio-combo-toggle-btn",onClick:()=>!V&&!p&&f(!E),disabled:V,tabIndex:-1,children:e.jsx(Ye,{size:16,className:E?"rotate":""})})]}),E&&!V&&!p&&e.jsx("div",{className:"avakio-combo-dropdown",style:{maxHeight:_},children:e.jsx("div",{ref:N,className:"avakio-combo-options",children:le.length>0?le.map((b,Y)=>e.jsx("div",{className:`avakio-combo-option ${F===Y?"highlighted":""} ${T?.id===b.id?"selected":""}`,onClick:()=>v(b),onMouseEnter:()=>$(Y),children:Z(b)},b.id)):e.jsx("div",{className:"avakio-combo-no-options",children:"No options found"})})}),J&&e.jsx("div",{className:"avakio-combo-error-message",children:J})]})]})}function Tt({id:s,value:r,defaultValue:l=0,step:i=1,min:c,max:m,label:w,labelPosition:A="top",labelWidth:z=100,description:V,error:p,required:D=!1,disabled:W=!1,readOnly:ee=!1,size:K="md",allowInput:_=!0,onChange:L,className:J="",padding:j,margin:q,testId:E}){const f=r!==void 0,[te,S]=t.useState(r??l);t.useEffect(()=>{f&&r!==void 0&&S(r)},[f,r]);const F=g=>{let I=g;return c!==void 0&&(I=Math.max(I,c)),m!==void 0&&(I=Math.min(I,m)),I},$=F(te),T=g=>{f||S(g),L?.(g)},a=g=>{if(W||ee)return;const I=F($+g*i);T(I)},P=g=>{if(W||ee)return;const I=g.target.value;if(I===""){f||S(NaN);return}const Z=Number(I);Number.isNaN(Z)||T(F(Z))},N=Number.isNaN($)?"":$,H=c===void 0||N===""?!0:N>c,ue=m===void 0||N===""?!0:N<m,le=j?typeof j=="number"?`${j}px`:Array.isArray(j)?`${j[0]}px ${j[1]}px ${j[2]}px ${j[3]}px`:j:void 0,u=q?typeof q=="number"?`${q}px`:Array.isArray(q)?`${q[0]}px ${q[1]}px ${q[2]}px ${q[3]}px`:q:void 0,v={...le&&{padding:le},...u&&{margin:u}};return e.jsxs("div",{"data-testid":E,className:["avakio-counter",`avakio-counter-${K}`,`avakio-counter-label-${A}`,W?"avakio-counter-disabled":"",p?"avakio-counter-error":"",J].filter(Boolean).join(" "),style:v,children:[(w||V||p)&&A==="top"&&e.jsxs("div",{className:"avakio-counter-header",children:[e.jsxs("div",{className:"avakio-counter-label-row",children:[w&&e.jsx("span",{className:"avakio-counter-label",children:w}),D&&e.jsx("span",{className:"avakio-counter-required",children:"*"})]}),V&&e.jsx("div",{className:"avakio-counter-description",children:V}),p&&e.jsx("div",{className:"avakio-counter-error-text",children:p})]}),e.jsxs("div",{className:"avakio-counter-content",children:[w&&A==="left"&&e.jsxs("div",{className:"avakio-counter-label-left",style:{width:z},children:[e.jsx("span",{className:"avakio-counter-label",children:w}),D&&e.jsx("span",{className:"avakio-counter-required",children:"*"})]}),e.jsxs("div",{className:"avakio-counter-body",children:[e.jsx("button",{type:"button",className:"avakio-counter-btn",onClick:()=>a(-1),disabled:W||ee||!H,"aria-label":"Decrease",children:e.jsx(xt,{size:16})}),e.jsx("input",{id:s,type:"number",className:"avakio-counter-input",value:N,onChange:P,disabled:W||ee||!_,readOnly:!_,min:c,max:m,step:i,"aria-live":"polite"}),e.jsx("button",{type:"button",className:"avakio-counter-btn",onClick:()=>a(1),disabled:W||ee||!ue,"aria-label":"Increase",children:e.jsx(St,{size:16})})]}),A==="left"&&(V||p)&&e.jsxs("div",{className:"avakio-counter-footer",children:[V&&e.jsx("div",{className:"avakio-counter-description",children:V}),p&&e.jsx("div",{className:"avakio-counter-error-text",children:p})]})]})]})}const Vt=s=>{if(!s)return"—";const r=new Date(s);return Number.isNaN(r.getTime())?s:r.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})},Ot=(s,r)=>{if(!s.start||!s.end)return s;const l=new Date(s.start),i=new Date(s.end);return l.getTime()>i.getTime()?{start:s.end,end:s.start}:!r&&l.getTime()===i.getTime()?{start:s.start,end:null}:s};function zt({value:s,defaultValue:r,onChange:l,presets:i,allowSingleDay:c=!0,showTime:m=!1,className:w,id:A,testId:z}){const V=s!==void 0,[p,D]=t.useState(s||r||{start:null,end:null}),[W,ee]=t.useState(!1),K=t.useRef(null),[_,L]=t.useState(null);t.useEffect(()=>{const S=K.current;if(!S)return;const F=S.closest("[data-admin-theme]");if(L(F?.getAttribute("data-admin-theme")??null),!F)return;const $=new MutationObserver(()=>{L(F.getAttribute("data-admin-theme")??null)});return $.observe(F,{attributes:!0,attributeFilter:["data-admin-theme"]}),()=>$.disconnect()},[]);const J=t.useMemo(()=>Ot(V?s:p,c),[V,s,p,c]),j=S=>{const F=Ot(S,c);V||D(F),l?.(F)},q=i||[{label:"Today",range:()=>{const F=new Date().toISOString();return{start:F,end:F}}},{label:"Last 7 days",range:()=>{const S=new Date,F=new Date;return F.setDate(S.getDate()-6),{start:F.toISOString(),end:S.toISOString()}}},{label:"This month",range:()=>{const S=new Date,F=new Date(S.getFullYear(),S.getMonth(),1),$=new Date(S.getFullYear(),S.getMonth()+1,0);return{start:F.toISOString(),end:$.toISOString()}}},{label:"Clear",range:()=>({start:null,end:null})}],E=S=>{j({start:S,end:J?.end??null})},f=S=>{j({start:J?.start??null,end:S})},te=`${Vt(J?.start)} → ${Vt(J?.end)}`;return e.jsx("div",{ref:K,id:A,"data-testid":z,className:["avakio-drp",w||""].join(" "),"data-admin-theme":_||void 0,children:e.jsxs($t,{open:W,onOpenChange:ee,children:[e.jsx(Dt,{asChild:!0,children:e.jsxs("button",{type:"button",className:"avakio-drp-trigger",children:[e.jsxs("div",{className:"avakio-drp-trigger-label",children:[e.jsx(wt,{size:16}),e.jsx("span",{children:"Date Range"})]}),e.jsx("div",{className:"avakio-drp-trigger-value",children:te})]})}),e.jsxs(At,{className:"avakio-drp-popover",align:"center","data-admin-theme":_||void 0,children:[e.jsxs("div",{className:"avakio-drp-panel",children:[e.jsxs("div",{className:"avakio-drp-col",children:[e.jsx("div",{className:"avakio-drp-col-header",children:"From"}),e.jsx("div",{"data-admin-theme":_||void 0,children:e.jsx(Ze,{value:J?.start||"",onChange:E,showTime:m,inline:!0})})]}),e.jsxs("div",{className:"avakio-drp-col",children:[e.jsx("div",{className:"avakio-drp-col-header",children:"To"}),e.jsx("div",{"data-admin-theme":_||void 0,children:e.jsx(Ze,{value:J?.end||"",onChange:f,showTime:m,inline:!0})})]})]}),e.jsx("div",{className:"avakio-drp-presets",children:q.map(S=>e.jsx("button",{type:"button",className:"avakio-drp-preset",onClick:()=>j(S.range()),children:S.label},S.label))}),e.jsxs("div",{className:"avakio-drp-footer",children:[e.jsx("button",{type:"button",className:"avakio-drp-action",onClick:()=>j({start:null,end:null}),children:"Clear"}),e.jsx("button",{type:"button",className:"avakio-drp-action",onClick:()=>ee(!1),children:"Close"})]})]})]})})}function Ft({id:s,value:r,data:l=[],onChange:i,onInputChange:c,placeholder:m="Select...",label:w,labelAlign:A="left",labelWidth:z=100,disabled:V=!1,readonly:p=!1,textValue:D,template:W,width:ee,body:K={autoConfig:!0,header:!0,borderless:!1},required:_=!1,error:L,className:J="",editable:j=!0,filterMode:q="contains",testId:E}){const[f,te]=t.useState(!1),[S,F]=t.useState(""),[$,T]=t.useState(-1),[a,P]=t.useState(null),N=t.useRef(null),H=t.useRef(null),ue=t.useRef(null),le=K?.data||l,u=t.useMemo(()=>{if(K?.columns)return K.columns;if(K?.autoConfig&&le.length>0){const ae=le[0];return Object.keys(ae).filter(ne=>ne!=="id").map(ne=>({id:ne,header:ne.charAt(0).toUpperCase()+ne.slice(1)}))}return[]},[K?.columns,K?.autoConfig,le]),v=ae=>{if(W){const M=W(ae);return typeof M=="string"?M:String(ae[u[0]?.id]||"")}if(D)return D.replace(/#(\w+)#/g,(M,k)=>String(ae[k]||""));const ne=u[0]?.id||Object.keys(ae).find(M=>M!=="id");return ne?String(ae[ne]):""};t.useEffect(()=>{if(r!=null&&r!==""){const ae=le.find(ne=>ne.id===r);ae&&(P(ae),F(v(ae)))}else P(null),F("")},[r,le]);const g=le.filter(ae=>{if(!j||!S)return!0;const ne=S.toLowerCase();return u.some(M=>{const k=String(ae[M.id]||"").toLowerCase();return q==="startsWith"?k.startsWith(ne):k.includes(ne)})});t.useEffect(()=>{const ae=ne=>{ue.current&&!ue.current.contains(ne.target)&&(te(!1),a&&j&&F(v(a)))};return f&&document.addEventListener("mousedown",ae),()=>{document.removeEventListener("mousedown",ae)}},[f,a]),t.useEffect(()=>{const ae=ne=>{if(f)switch(ne.key){case"ArrowDown":ne.preventDefault(),T(M=>M<g.length-1?M+1:M);break;case"ArrowUp":ne.preventDefault(),T(M=>M>0?M-1:0);break;case"Enter":ne.preventDefault(),$>=0&&$<g.length&&I(g[$]);break;case"Escape":ne.preventDefault(),te(!1),a&&j&&F(v(a));break}};return f&&document.addEventListener("keydown",ae),()=>{document.removeEventListener("keydown",ae)}},[f,$,g,a]),t.useEffect(()=>{if(f&&$>=0&&H.current){const ae=H.current.querySelector(`[data-row-index="${$}"]`);ae&&ae.scrollIntoView({block:"nearest",behavior:"smooth"})}},[$,f]);const I=ae=>{P(ae),F(v(ae)),te(!1),T(-1),i?.(ae.id,ae)},Z=ae=>{const ne=ae.target.value;F(ne),c?.(ne),f||te(!0),T(0)},b=ae=>{ae.stopPropagation(),P(null),F(""),i?.("",void 0),N.current?.focus()},Y=()=>{!V&&!p&&(te(!f),f||(T(0),N.current?.focus()))},de=K?.header!==!1,G=K?.borderless===!0,U=K?.scroll===!0,ie=K?.yCount?K.yCount*40:U?300:void 0;return e.jsxs("div",{ref:ue,"data-testid":E,className:`avakio-gridsuggest ${J}`,style:{width:ee},"data-disabled":V,"data-readonly":p,"data-error":!!L,children:[w&&e.jsxs("label",{className:"avakio-gridsuggest-label",style:{width:A==="left"?z:void 0,textAlign:A},children:[w,_&&e.jsx("span",{className:"avakio-gridsuggest-required",children:"*"})]}),e.jsxs("div",{className:"avakio-gridsuggest-wrapper",children:[e.jsxs("div",{className:"avakio-gridsuggest-input-wrapper",children:[e.jsx("input",{ref:N,type:"text",id:s,className:"avakio-gridsuggest-input",value:S,onChange:Z,onFocus:()=>!V&&!p&&te(!0),placeholder:m,disabled:V,readOnly:p||!j,"aria-haspopup":"grid","aria-expanded":f,"aria-label":w||"Grid select input"}),e.jsxs("div",{className:"avakio-gridsuggest-icons",children:[j&&e.jsx(Je,{size:16,className:"avakio-gridsuggest-search-icon"}),S&&!V&&!p&&e.jsx("button",{type:"button",className:"avakio-gridsuggest-clear",onClick:b,"aria-label":"Clear selection",children:e.jsx(We,{size:16})}),e.jsx("button",{type:"button",className:"avakio-gridsuggest-toggle",onClick:Y,disabled:V,"aria-label":"Toggle dropdown",children:e.jsx(Ye,{size:18,className:f?"open":""})})]})]}),f&&e.jsx("div",{ref:H,className:`avakio-gridsuggest-dropdown ${G?"borderless":""}`,style:{maxHeight:ie},role:"grid",children:g.length===0?e.jsx("div",{className:"avakio-gridsuggest-empty",children:"No data found"}):e.jsxs("div",{className:"avakio-gridsuggest-table",children:[de&&e.jsx("div",{className:"avakio-gridsuggest-header",children:u.map(ae=>e.jsx("div",{className:"avakio-gridsuggest-header-cell",style:{width:ae.width},children:ae.header||ae.id},ae.id))}),e.jsx("div",{className:`avakio-gridsuggest-body ${U?"scrollable":""}`,children:g.map((ae,ne)=>{const M=a?.id===ae.id,k=ne===$;return e.jsx("div",{"data-row-index":ne,className:`avakio-gridsuggest-row ${M?"selected":""} ${k?"highlighted":""}`,onClick:()=>I(ae),role:"row","aria-selected":M,children:u.map(o=>e.jsx("div",{className:"avakio-gridsuggest-cell",style:{width:o.width},role:"gridcell",children:o.template?o.template(ae[o.id],ae):ae[o.id]},o.id))},ae.id)})})]})})]}),L&&e.jsx("div",{className:"avakio-gridsuggest-error",children:L})]})}function Pt({options:s,value:r=[],onChange:l,placeholder:i="Select items...",className:c,showCount:m=!1,maxDisplayItems:w=3,disabled:A=!1,id:z,testId:V}){const[p,D]=t.useState(!1),[W,ee]=t.useState(""),K=t.useRef(null),_=t.useRef(null),L=t.useMemo(()=>{if(!W.trim())return s;const T=W.toLowerCase();return s.filter(a=>a.label.toLowerCase().includes(T)||a.value.toLowerCase().includes(T))},[s,W]),J=t.useMemo(()=>s.filter(T=>r.includes(T.value)),[s,r]);t.useEffect(()=>{const T=a=>{K.current&&!K.current.contains(a.target)&&(D(!1),ee(""))};return p&&document.addEventListener("mousedown",T),()=>{document.removeEventListener("mousedown",T)}},[p]);const j=T=>{r.includes(T)?l(r.filter(a=>a!==T)):l([...r,T])},q=(T,a)=>{a.stopPropagation(),l(r.filter(P=>P!==T))},E=T=>{T.stopPropagation(),l([])},f=()=>{A||(D(!0),_.current?.focus())},te=T=>{ee(T.target.value),p||D(!0)},S=()=>{if(L.length===0)return;const T=L.map(P=>P.value);if(T.every(P=>r.includes(P)))l(r.filter(P=>!T.includes(P)));else{const P=Array.from(new Set([...r,...T]));l(P)}},F=()=>{if(J.length===0)return e.jsx("span",{className:"avakio-mc-placeholder",children:i});if(m)return e.jsxs("span",{className:"avakio-mc-count",children:[J.length," ",J.length===1?"item":"items"," selected"]});const T=J.slice(0,w),a=J.length-w;return e.jsxs("div",{className:"avakio-mc-chips",children:[T.map(P=>e.jsxs("span",{className:"avakio-mc-chip",children:[e.jsx("span",{className:"avakio-mc-chip-label",children:P.label}),e.jsx("button",{type:"button",className:"avakio-mc-chip-remove",onClick:N=>q(P.value,N),disabled:A,children:e.jsx(We,{className:"h-3 w-3"})})]},P.value)),a>0&&e.jsxs("span",{className:"avakio-mc-chip avakio-mc-chip-more",children:["+",a," more"]})]})},$=L.length>0&&L.every(T=>r.includes(T.value));return e.jsxs("div",{ref:K,id:z,"data-testid":V,className:He("avakio-multicombo",A&&"avakio-mc-disabled",c),children:[e.jsxs("div",{className:He("avakio-mc-input-wrapper",p&&"avakio-mc-input-wrapper-open"),onClick:f,children:[e.jsxs("div",{className:"avakio-mc-input-content",children:[!p&&F(),p&&e.jsx("input",{ref:_,type:"text",className:"avakio-mc-search-input",value:W,onChange:te,placeholder:J.length>0?"Search...":i,disabled:A})]}),e.jsxs("div",{className:"avakio-mc-actions",children:[r.length>0&&!A&&e.jsx("button",{type:"button",className:"avakio-mc-clear-btn",onClick:E,children:e.jsx(We,{className:"h-4 w-4"})}),e.jsx("button",{type:"button",className:"avakio-mc-toggle-btn",onClick:T=>{T.stopPropagation(),A||(D(!p),p||_.current?.focus())},disabled:A,children:e.jsx(Ye,{className:He("h-4 w-4",p&&"avakio-mc-toggle-open")})})]})]}),p&&e.jsxs("div",{className:"avakio-mc-dropdown",children:[L.length>0&&e.jsx("div",{className:"avakio-mc-select-all",children:e.jsxs("button",{type:"button",className:"avakio-mc-option",onClick:S,children:[e.jsx("div",{className:He("avakio-mc-checkbox",$&&"avakio-mc-checkbox-checked"),children:$&&e.jsx(tt,{className:"h-3 w-3"})}),e.jsx("span",{className:"avakio-mc-option-label avakio-mc-select-all-label",children:$?"Deselect All":"Select All"})]})}),e.jsx("div",{className:"avakio-mc-options",children:L.length>0?L.map(T=>{const a=r.includes(T.value);return e.jsxs("button",{type:"button",className:"avakio-mc-option",onClick:()=>j(T.value),children:[e.jsx("div",{className:He("avakio-mc-checkbox",a&&"avakio-mc-checkbox-checked"),children:a&&e.jsx(tt,{className:"h-3 w-3"})}),e.jsx("span",{className:"avakio-mc-option-label",children:T.label})]},T.value)}):e.jsx("div",{className:"avakio-mc-no-results",children:W?"No matches found":"No options available"})}),r.length>0&&e.jsxs("div",{className:"avakio-mc-footer",children:[r.length," ",r.length===1?"item":"items"," selected"]})]})]})}function Ht({id:s,value:r,options:l=[],onChange:i,placeholder:c="Select...",label:m,labelAlign:w="left",labelWidth:A=100,disabled:z=!1,readonly:V=!1,template:p,width:D,maxHeight:W=300,yCount:ee,required:K=!1,error:_,className:L="",clearable:J=!0,padding:j,margin:q,testId:E}){const[f,te]=t.useState(!1),[S,F]=t.useState(-1),[$,T]=t.useState(null),a=t.useRef(null),P=t.useRef(null),N=t.useRef(null),H=l.map(I=>typeof I=="string"?{id:I,value:I}:I);t.useEffect(()=>{if(r!=null&&r!==""){const I=H.find(Z=>Z.id===r||Z.value===r);I&&T(I)}else T(null)},[r]),t.useEffect(()=>{const I=Z=>{a.current&&!a.current.contains(Z.target)&&te(!1)};return f&&document.addEventListener("mousedown",I),()=>{document.removeEventListener("mousedown",I)}},[f]),t.useEffect(()=>{const I=Z=>{if(f)switch(Z.key){case"ArrowDown":Z.preventDefault(),F(b=>b<H.length-1?b+1:b);break;case"ArrowUp":Z.preventDefault(),F(b=>b>0?b-1:0);break;case"Enter":Z.preventDefault(),S>=0&&S<H.length&&ue(H[S]);break;case"Escape":Z.preventDefault(),te(!1);break}};return f&&document.addEventListener("keydown",I),()=>{document.removeEventListener("keydown",I)}},[f,S,H]),t.useEffect(()=>{if(f&&S>=0&&P.current){const I=P.current.querySelector(`[data-index="${S}"]`);I&&I.scrollIntoView({block:"nearest",behavior:"smooth"})}},[S,f]);const ue=I=>{T(I),te(!1),F(-1),i?.(I.id,I)},le=I=>{I.stopPropagation(),T(null),i?.("",void 0)},u=()=>{if(!z&&!V&&(te(!f),!f)){const I=H.findIndex(Z=>Z.id===$?.id);F(I>=0?I:0)}},v=$?$.value:"",g=ee?ee*40:W;return e.jsxs("div",{ref:a,"data-testid":E,className:`avakio-richselect ${L}`,style:{width:D,padding:Array.isArray(j)?`${j[0]}px ${j[1]}px ${j[2]}px ${j[3]}px`:typeof j=="number"?`${j}px`:j,margin:Array.isArray(q)?`${q[0]}px ${q[1]}px ${q[2]}px ${q[3]}px`:typeof q=="number"?`${q}px`:q},"data-disabled":z,"data-readonly":V,"data-error":!!_,children:[m&&e.jsxs("label",{className:"avakio-richselect-label",style:{width:w==="left"?A:void 0,textAlign:w},children:[m,K&&e.jsx("span",{className:"avakio-richselect-required",children:"*"})]}),e.jsxs("div",{className:"avakio-richselect-wrapper",children:[e.jsxs("button",{ref:N,type:"button",id:s,className:"avakio-richselect-button",onClick:u,disabled:z,"aria-haspopup":"listbox","aria-expanded":f,"aria-label":m||"Select option",children:[e.jsx("span",{className:`avakio-richselect-value ${v?"":"placeholder"}`,children:v||c}),e.jsxs("div",{className:"avakio-richselect-icons",children:[J&&$&&!z&&!V&&e.jsx("span",{role:"button",tabIndex:-1,className:"avakio-richselect-clear",onClick:le,"aria-label":"Clear selection",children:e.jsx(We,{size:16})}),e.jsx(Ye,{size:18,className:`avakio-richselect-toggle ${f?"open":""}`})]})]}),f&&e.jsx("div",{ref:P,className:"avakio-richselect-dropdown",style:{maxHeight:g},role:"listbox",children:H.length===0?e.jsx("div",{className:"avakio-richselect-empty",children:"No options available"}):H.map((I,Z)=>{const b=$?.id===I.id,Y=Z===S;return e.jsx("div",{"data-index":Z,className:`avakio-richselect-option ${b?"selected":""} ${Y?"highlighted":""}`,onClick:()=>ue(I),role:"option","aria-selected":b,children:p?p(I):I.value},I.id)})})]}),_&&e.jsx("div",{className:"avakio-richselect-error",children:_})]})}const Wa={getValue:s=>s.current?.selectedOption?.id,getText:s=>s.current?.selectedOption?.value};function Ge(s,r,l){return Math.min(Math.max(s,r),l)}function Bt({value:s,defaultValue:r,onChange:l,min:i=0,max:c=100,step:m=1,range:w=!1,disabled:A,label:z,description:V,required:p,error:D,showValue:W=!0,formatValue:ee,marks:K,size:_="md",id:L,testId:J,theme:j}){const q=s!==void 0,E=(b,Y,de)=>b===void 0?[Y,de]:Array.isArray(b)?[Ge(b[0],i,c),Ge(b[1],i,c)]:[i,Ge(b,i,c)],f=(b,Y)=>b===void 0?Y:Array.isArray(b)?b[1]:Ge(b,i,c),[te,S]=t.useState(()=>E(r,i,w?c:i)),[F,$]=t.useState(()=>f(r,i)),T=q?E(s,i,c):te,a=q?f(s,i):F,P=w?(T[0]-i)/(c-i||1)*100:0,N=w?(T[1]-i)/(c-i||1)*100:(a-i)/(c-i||1)*100,H=t.useMemo(()=>{const b=w?T[0]:a;return ee?ee(b):b.toString()},[w,T,a,ee]),ue=t.useMemo(()=>w?ee?ee(T[1]):T[1].toString():H,[w,T,ee,H]),le=t.useMemo(()=>!K||!K.length?[]:K.filter(b=>b>=i&&b<=c),[K,i,c]),u=t.useCallback(b=>{const Y=Ge(b,i,c);q||$(Y),l?.(Y)},[i,c,q,l]),v=t.useCallback((b,Y)=>{const de=Ge(Y,i,c);let G;b===0?G=[Math.min(de,T[1]),T[1]]:G=[T[0],Math.max(de,T[0])],q||S(G),l?.(G)},[i,c,T,q,l]),g=t.useRef(null),I=t.useCallback(b=>{if(A||!w||!g.current)return;const Y=g.current.getBoundingClientRect(),de=(b.clientX-Y.left)/Y.width,G=i+de*(c-i),U=Math.round(G/m)*m,ie=Math.abs(U-T[0]),ae=Math.abs(U-T[1]);ie<=ae?v(0,U):v(1,U)},[A,w,i,c,m,T,v]),Z=w?{"--slider-progress-start":`${P}%`,"--slider-progress-end":`${N}%`,"--slider-progress":`${N}%`}:{"--slider-progress":`${N}%`};return e.jsxs("div",{id:L,"data-testid":J,"data-admin-theme":j,className:["avakio-slider",`avakio-slider-${_}`,w&&"avakio-slider-range",D&&"avakio-slider-error",A&&"avakio-slider-disabled"].filter(Boolean).join(" "),style:Z,children:[(z||V)&&e.jsxs("div",{className:"avakio-slider-header",children:[e.jsxs("div",{className:"avakio-slider-label-row",children:[z&&e.jsx("span",{className:"avakio-slider-label",children:z}),p&&e.jsx("span",{className:"avakio-slider-required",children:"*"}),W&&e.jsx("span",{className:"avakio-slider-value-chip",children:w?`${H} - ${ue}`:H})]}),V&&e.jsx("div",{className:"avakio-slider-description",children:V})]}),e.jsxs("div",{className:"avakio-slider-body",children:[w?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"range",className:"avakio-slider-input avakio-slider-input-low",min:i,max:c,step:m,value:T[0],disabled:A,onChange:b=>v(0,Number(b.target.value)),"aria-label":"Range minimum"}),e.jsx("input",{type:"range",className:"avakio-slider-input avakio-slider-input-high",min:i,max:c,step:m,value:T[1],disabled:A,onChange:b=>v(1,Number(b.target.value)),"aria-label":"Range maximum"})]}):e.jsx("input",{type:"range",className:"avakio-slider-input",min:i,max:c,step:m,value:a,disabled:A,onChange:b=>u(Number(b.target.value))}),e.jsxs("div",{ref:g,className:"avakio-slider-track",onClick:w?I:void 0,children:[w?e.jsx("div",{className:"avakio-slider-progress avakio-slider-progress-range",style:{left:`${P}%`,width:`${N-P}%`}}):e.jsx("div",{className:"avakio-slider-progress"}),w?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"avakio-slider-thumb avakio-slider-thumb-low",style:{left:`${P}%`}}),e.jsx("div",{className:"avakio-slider-thumb avakio-slider-thumb-high",style:{left:`${N}%`}})]}):e.jsx("div",{className:"avakio-slider-thumb",style:{left:`${N}%`}})]}),le.length>0&&e.jsx("div",{className:"avakio-slider-marks",children:le.map(b=>{const Y=(b-i)/(c-i||1)*100,de=w?b>=T[0]&&b<=T[1]:b<=a;return e.jsxs("div",{className:`avakio-slider-mark ${de?"avakio-slider-mark-active":""}`,style:{left:`${Y}%`},children:[e.jsx("span",{className:"avakio-slider-mark-dot"}),e.jsx("span",{className:"avakio-slider-mark-label",children:b})]},b)})})]}),D&&e.jsx("div",{className:"avakio-slider-error-text",children:D})]})}function Ka({items:s,onChange:r,theme:l,className:i,style:c,dense:m,showBorders:w,id:A,testId:z}){const[V,p]=t.useState(s),[D,W]=t.useState(null),[ee,K]=t.useState(null),[_,L]=t.useState("bottom"),J=t.useRef(null),j=t.useRef({});t.useEffect(()=>{p(s)},[s]),t.useEffect(()=>{D&&(r?.(V,D),W(null))},[D,r,V]),t.useEffect(()=>{if(!ee)return;const a=P=>{J.current&&(J.current.contains(P.target)||K(null))};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[ee]);const q=a=>{const P=j.current[a];if(!P)return"bottom";const N=P.getBoundingClientRect(),H=window.innerHeight,ue=360,le=H-N.bottom,u=N.top;return le<ue&&u>le?"top":"bottom"},E=a=>{if(a==null||a==="")return null;const P=String(a),N=P.includes("T")?P:`${P}T00:00:00`,H=new Date(N);return Number.isNaN(H.getTime())?null:H},f=a=>{if(a.value===void 0||a.value===null||a.value==="")return a.placeholder||(a.type==="datetime"?"Select date & time":"Select date");if(a.type==="date"&&typeof a.value=="string"){const P=E(a.value);return P?P.toLocaleDateString(void 0,{dateStyle:"medium"}):"Invalid date"}if(a.type==="datetime"&&typeof a.value=="string"){const P=E(a.value);return P?P.toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"}):"Invalid date"}return String(a.value)},te=t.useMemo(()=>{const a={};return V.forEach(P=>{const N=P.group||"__ungrouped";a[N]||(a[N]=[]),a[N].push(P)}),a},[V]),S=(a,P)=>{p(N=>{const H=N.map(le=>le.id===a?{...le,value:P}:le),ue=H.find(le=>le.id===a);return W(ue),H})},F=a=>{const P={id:a.id,name:a.id,disabled:a.disabled,required:a.required,placeholder:a.placeholder};switch(a.type){case"number":return e.jsx("input",{type:"number",className:"av-prop-input",...P,value:a.value===void 0||a.value===null?"":a.value,onChange:N=>S(a.id,N.target.value===""?"":Number(N.target.value))});case"select":{const N=(a.selectOptions??a.options??[]).map(H=>{if(typeof H=="string"||H.id!==void 0)return H;const ue=H;return{id:typeof ue.value=="boolean"?String(ue.value):ue.value,value:ue.label}});return e.jsx(Ht,{id:a.id,value:typeof a.value=="string"||typeof a.value=="number"?a.value:void 0,options:N,onChange:(H,ue)=>{a.selectOnChange?.(H,ue,a),S(a.id,H??"")},placeholder:a.selectPlaceholder??a.placeholder,disabled:a.selectDisabled??a.disabled,readonly:a.selectReadOnly,template:a.selectTemplate,width:a.selectWidth,maxHeight:a.selectMaxHeight,yCount:a.selectYCount,required:a.selectRequired??a.required,error:a.selectError,className:a.selectClassName,clearable:a.selectClearable})}case"checkbox":{const N=a.value===void 0?!1:!!a.value;return e.jsx(Et,{id:a.id,name:a.id,checked:N,onChange:H=>{a.checkboxOnChange?.(H,a),S(a.id,H)},label:a.checkboxLabel??a.placeholder??a.label,description:a.checkboxDescription??a.description,disabled:a.disabled,required:a.required})}case"combo":return e.jsx(Lt,{id:a.id,value:typeof a.value=="string"||typeof a.value=="number"?a.value:void 0,options:a.comboOptions??a.options??[],onChange:(N,H)=>{a.comboOnChange?.(N,H,a),S(a.id,N??"")},onInputChange:N=>a.comboOnInputChange?.(N,a),placeholder:a.comboPlaceholder??a.placeholder,label:a.comboLabel,labelAlign:a.comboLabelAlign,labelWidth:a.comboLabelWidth,disabled:a.comboDisabled??a.disabled,readonly:a.comboReadOnly,filterMode:a.comboFilterMode,customFilter:a.comboCustomFilter,template:a.comboTemplate,width:a.comboWidth,maxHeight:a.comboMaxHeight,required:a.comboRequired??a.required,error:a.comboError,className:a.comboClassName});case"colorpicker":return e.jsx(It,{id:a.id,value:typeof a.value=="string"?a.value:void 0,defaultValue:a.colorDefaultValue,label:a.colorLabel,description:a.colorDescription,error:a.colorError,disabled:a.colorDisabled??a.disabled,readOnly:a.colorReadOnly,required:a.colorRequired??a.required,presets:a.colorPresets,allowCustomInput:a.colorAllowCustomInput,showPreview:a.colorShowPreview,className:a.colorClassName,onChange:N=>{a.colorOnChange?.(N,a),S(a.id,N)}});case"counter":return e.jsx(Tt,{id:a.id,value:typeof a.value=="number"?a.value:void 0,defaultValue:a.counterDefaultValue,step:a.counterStep,min:a.counterMin,max:a.counterMax,label:a.counterLabel??a.label,description:a.counterDescription??a.description,error:a.counterError,required:a.counterRequired??a.required,disabled:a.counterDisabled??a.disabled,readOnly:a.counterReadOnly,size:a.counterSize,allowInput:a.counterAllowInput,className:a.counterClassName,onChange:N=>{a.counterOnChange?.(N,a),S(a.id,N)}});case"slider":return e.jsx(Bt,{value:typeof a.value=="number"?a.value:void 0,defaultValue:a.sliderDefaultValue,min:a.sliderMin,max:a.sliderMax,step:a.sliderStep,disabled:a.sliderDisabled??a.disabled,label:a.sliderLabel??a.label,description:a.sliderDescription??a.description,required:a.sliderRequired??a.required,error:a.sliderError,showValue:a.sliderShowValue,formatValue:a.sliderFormatValue,marks:a.sliderMarks,size:a.sliderSize,onChange:N=>{const H=typeof N=="number"?N:N[0];a.sliderOnChange?.(H,a),S(a.id,H)}});case"date":return e.jsxs("div",{className:"av-prop-datewrap",children:[e.jsx("button",{type:"button",className:"av-prop-datebtn",ref:N=>{j.current[a.id]=N},onClick:()=>{if(ee===a.id){K(null);return}const N=q(a.id);L(N),K(a.id)},children:f(a)}),ee===a.id&&e.jsx("div",{className:`av-prop-datepop ${_==="top"?"is-top":""}`,children:e.jsx(Ze,{value:a.value??"",onChange:N=>{a.dateOnChange?.(N,a),S(a.id,N),K(null)},showTime:a.dateShowTime??!1,className:a.dateClassName??"av-prop-datepicker"})})]});case"daterangepicker":return e.jsx(zt,{value:a.value&&typeof a.value=="object"?a.value:void 0,defaultValue:a.daterangeDefaultValue,presets:a.daterangePresets,allowSingleDay:a.daterangeAllowSingleDay,showTime:a.daterangeShowTime,className:a.daterangeClassName,onChange:N=>{a.daterangeOnChange?.(N,a),S(a.id,N)}});case"gridsuggest":return e.jsx(Ft,{id:a.id,value:typeof a.value=="string"||typeof a.value=="number"?a.value:void 0,data:a.gridsuggestData??a.options??[],onChange:(N,H)=>{a.gridsuggestOnChange?.(N,H,a),S(a.id,N??"")},onInputChange:N=>a.gridsuggestOnInputChange?.(N,a),placeholder:a.gridsuggestPlaceholder??a.placeholder,label:a.gridsuggestLabel,labelAlign:a.gridsuggestLabelAlign,labelWidth:a.gridsuggestLabelWidth,disabled:a.gridsuggestDisabled??a.disabled,readonly:a.gridsuggestReadOnly,textValue:a.gridsuggestTextValue,template:a.gridsuggestTemplate,width:a.gridsuggestWidth,body:a.gridsuggestBody,required:a.gridsuggestRequired??a.required,error:a.gridsuggestError,className:a.gridsuggestClassName,editable:a.gridsuggestEditable,filterMode:a.gridsuggestFilterMode});case"multicombo":return e.jsx(Pt,{options:a.multicomboOptions??[],value:Array.isArray(a.multicomboValue??a.value)?a.multicomboValue??a.value:[],onChange:N=>{a.multicomboOnChange?.(N,a),S(a.id,N)},placeholder:a.multicomboPlaceholder??a.placeholder,className:a.multicomboClassName,showCount:a.multicomboShowCount,maxDisplayItems:a.multicomboMaxDisplayItems,disabled:a.multicomboDisabled??a.disabled});case"datetime":return e.jsxs("div",{className:"av-prop-datewrap",children:[e.jsx("button",{type:"button",className:"av-prop-datebtn",ref:N=>{j.current[a.id]=N},onClick:()=>{if(ee===a.id){K(null);return}const N=q(a.id);L(N),K(a.id)},children:f(a)}),ee===a.id&&e.jsx("div",{className:`av-prop-datepop ${_==="top"?"is-top":""}`,children:e.jsx(Ze,{value:a.value??"",onChange:N=>{a.dateOnChange?.(N,a),S(a.id,N),K(null)},showTime:a.dateShowTime??!0,className:a.dateClassName??"av-prop-datepicker"})})]});case"button":return e.jsx(_t,{label:a.buttonLabel||a.placeholder||"Action",onClick:()=>{a.disabled||(a.buttonOnClick?.(a),S(a.id,!0))},disabled:a.disabled,variant:a.buttonVariant,size:a.buttonSize,badge:a.buttonBadge,icon:a.buttonIcon,iconRight:a.buttonIconRight,block:a.buttonBlock});case"textarea":return e.jsx("textarea",{className:"av-prop-input av-prop-textarea",...P,value:a.value??"",onChange:N=>S(a.id,N.target.value)});default:return e.jsx("input",{type:"text",className:"av-prop-input",...P,value:a.value??"",onChange:N=>S(a.id,N.target.value)})}},$=["avakio-property",m?"is-dense":"",w?"has-borders":"",i||""].filter(Boolean).join(" "),T=l?{"data-admin-theme":l}:void 0;return e.jsx("div",{ref:J,id:A,"data-testid":z,className:$,style:c,...T,children:e.jsx("div",{className:"av-prop-table",children:Object.entries(te).map(([a,P])=>e.jsxs(t.Fragment,{children:[a!=="__ungrouped"&&e.jsx("div",{className:"av-prop-group",children:a}),P.map(N=>e.jsxs("div",{className:"av-prop-row",children:[e.jsxs("div",{className:"av-prop-label",children:[e.jsx("label",{htmlFor:N.id,children:N.label}),N.description&&e.jsx("div",{className:"av-prop-desc",children:N.description})]}),e.jsx("div",{className:"av-prop-control",children:F(N)})]},N.id))]},a))})})}function jt(s,r){return s.getFullYear()===r.getFullYear()&&s.getMonth()===r.getMonth()&&s.getDate()===r.getDate()}function rt(s){const r=s.getFullYear(),l=String(s.getMonth()+1).padStart(2,"0"),i=String(s.getDate()).padStart(2,"0");return`${r}-${l}-${i}`}function Qe(s){const[r,l,i]=s.split("-").map(Number);return new Date(r,l-1,i)}function Wt({value:s,onChange:r,mode:l="single",minDate:i,maxDate:c,disabledDates:m=[],markers:w=[],showWeekNumbers:A=!1,monthsToShow:z=1,weekStart:V=0,className:p="",onMonthChange:D,id:W,testId:ee}){const K=()=>{if(s){const u=Array.isArray(s)?s[0]:s;if(u&&u.trim())return Qe(u)}return new Date},[_,L]=t.useState(K),J=Math.max(1,Math.min(3,z));t.useEffect(()=>{if(s){const u=Array.isArray(s)?s[0]:s;if(u&&u.trim()){const v=Qe(u);(v.getFullYear()!==_.getFullYear()||v.getMonth()!==_.getMonth())&&L(v)}}},[s]);const j=t.useMemo(()=>s?(Array.isArray(s)?s:[s]).filter(v=>v&&v.trim()).map(Qe):[],[s]),q=t.useMemo(()=>new Set(m),[m]),E=t.useMemo(()=>{const u=new Map;return w.forEach(v=>{const g=v.date.includes("T")?v.date.split("T")[0]:v.date;u.has(g)||u.set(g,[]),u.get(g).push(v)}),u},[w]),f=["January","February","March","April","May","June","July","August","September","October","November","December"],te=V===0?["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],S=u=>{const v=u.getFullYear(),g=u.getMonth(),I=new Date(v,g,1),Z=new Date(v,g+1,0);let b=I.getDay();V===1&&(b=b===0?6:b-1);const Y=Z.getDate(),de=new Date(v,g,0).getDate(),G=[];for(let ie=b-1;ie>=0;ie--)G.push({date:new Date(v,g-1,de-ie),isCurrentMonth:!1});for(let ie=1;ie<=Y;ie++){const ae=new Date(v,g,ie);G.push({date:ae,isCurrentMonth:!0,weekNumber:A?F(ae):void 0})}const U=42-G.length;for(let ie=1;ie<=U;ie++)G.push({date:new Date(v,g+1,ie),isCurrentMonth:!1});return G},F=u=>{const v=new Date(Date.UTC(u.getFullYear(),u.getMonth(),u.getDate())),g=v.getUTCDay()||7;v.setUTCDate(v.getUTCDate()+4-g);const I=new Date(Date.UTC(v.getUTCFullYear(),0,1));return Math.ceil(((v.getTime()-I.getTime())/864e5+1)/7)},$=u=>{const v=rt(u);if(q.has(v))return!0;if(i){const g=Qe(i);if(u.getFullYear()<g.getFullYear()||u.getFullYear()===g.getFullYear()&&u.getMonth()<g.getMonth()||u.getFullYear()===g.getFullYear()&&u.getMonth()===g.getMonth()&&u.getDate()<g.getDate())return!0}if(c){const g=Qe(c);if(u.getFullYear()>g.getFullYear()||u.getFullYear()===g.getFullYear()&&u.getMonth()>g.getMonth()||u.getFullYear()===g.getFullYear()&&u.getMonth()===g.getMonth()&&u.getDate()>g.getDate())return!0}return!1},T=u=>j.some(v=>jt(v,u)),a=u=>{if(l!=="range"||j.length!==2)return!1;const[v,g]=j.sort((I,Z)=>I.getTime()-Z.getTime());return u>v&&u<g},P=u=>{if($(u))return;const v=rt(u);if(l==="single")r?.((typeof s=="string"?s:"")===v?"":v);else if(l==="multiple"){const g=Array.isArray(s)?s:s?[s]:[],Z=g.includes(v)?g.filter(b=>b!==v):[...g,v];r?.(Z)}else if(l==="range"){const g=Array.isArray(s)?s:s?[s]:[];if(g.length===0||g.length===2)r?.([v]);else if(g.length===1)if(g[0]===v)r?.([]);else{const I=[g[0],v].sort();r?.(I)}}},N=()=>{const u=new Date(_.getFullYear(),_.getMonth()-1,1);L(u),D?.(u)},H=()=>{const u=new Date(_.getFullYear(),_.getMonth()+1,1);L(u),D?.(u)},ue=()=>{const u=new Date;L(u),D?.(u);const v=rt(u);if(l==="single")r?.(v);else if(l==="multiple"){const g=Array.isArray(s)?s:s?[s]:[];g.includes(v)||r?.([...g,v])}else l==="range"&&r?.([v])},le=u=>{const v=new Date(_.getFullYear(),_.getMonth()+u,1),g=S(v),I=new Date;return e.jsxs("div",{className:"avakio-cal-month",children:[e.jsxs("div",{className:"avakio-cal-header",children:[u===0&&J===1&&e.jsx("button",{type:"button",className:"avakio-cal-nav-btn",onClick:N,children:e.jsx(qe,{className:"h-4 w-4"})}),e.jsxs("div",{className:"avakio-cal-title",children:[f[v.getMonth()]," ",v.getFullYear()]}),u===z-1&&J===1&&e.jsx("button",{type:"button",className:"avakio-cal-nav-btn",onClick:H,children:e.jsx(je,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:`avakio-cal-weekdays ${A?"avakio-cal-with-week-nums":""}`,children:[A&&e.jsx("div",{className:"avakio-cal-weekday avakio-cal-week-num-header",children:"#"}),te.map(Z=>e.jsx("div",{className:"avakio-cal-weekday",children:Z},Z))]}),e.jsx("div",{className:`avakio-cal-grid ${A?"avakio-cal-with-week-nums":""}`,children:g.map((Z,b)=>{const Y=T(Z.date),de=jt(Z.date,I),G=$(Z.date),U=a(Z.date),ie=rt(Z.date),ae=E.get(ie)||[],ne=A&&b%7===0,M=`${ie}-${b}`,k=ne?Z.weekNumber??F(Z.date):void 0;return e.jsxs(t.Fragment,{children:[ne&&e.jsx("div",{className:"avakio-cal-week-num",children:k}),e.jsxs("button",{type:"button",onClick:()=>P(Z.date),disabled:G,className:`avakio-cal-day ${Z.isCurrentMonth?"":"avakio-cal-day-outside"} ${Y?"avakio-cal-day-selected":""} ${de?"avakio-cal-day-today":""} ${G?"avakio-cal-day-disabled":""} ${U?"avakio-cal-day-in-range":""}`,children:[e.jsx("span",{className:"avakio-cal-day-number",children:Z.date.getDate()}),ae.length>0&&e.jsx("div",{className:"avakio-cal-markers",children:ae.slice(0,3).map((o,O)=>e.jsx("span",{className:"avakio-cal-marker",style:{backgroundColor:o.color||"#3b82f6"},title:o.text},`marker-${M}-${O}`))})]})]},M)})})]},u)};return e.jsxs("div",{id:W,"data-testid":ee,className:`avakio-calendar ${p}`,children:[J>1&&e.jsxs("div",{className:"avakio-cal-multi-nav",children:[e.jsx("button",{type:"button",className:"avakio-cal-nav-btn",onClick:N,children:e.jsx(qe,{className:"h-4 w-4"})}),e.jsx("button",{type:"button",className:"avakio-cal-today-btn",onClick:ue,children:"Today"}),e.jsx("button",{type:"button",className:"avakio-cal-nav-btn",onClick:H,children:e.jsx(je,{className:"h-4 w-4"})})]}),e.jsx("div",{className:`avakio-cal-months avakio-cal-months-${J}`,children:Array.from({length:J},(u,v)=>le(v))}),J===1&&e.jsx("div",{className:"avakio-cal-footer",children:e.jsx("button",{type:"button",className:"avakio-cal-today-btn",onClick:ue,children:"Today"})})]})}function nt(s){const r=new Date(s),l=(r.getDay()+6)%7;return r.setDate(r.getDate()-l),r.setHours(0,0,0,0),r}function Ke(s,r){const l=new Date(s);return l.setDate(l.getDate()+r),l}function ot(s){const r=s.getFullYear(),l=String(s.getMonth()+1).padStart(2,"0"),i=String(s.getDate()).padStart(2,"0");return`${r}-${l}-${i}`}function Kt(s){const[r,l,i]=s.split("-").map(Number);return new Date(r,l-1,i)}function Ue(s){return s.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})}function ht(s){return s.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})}function qa({events:s=[],defaultView:r="month",defaultDate:l,theme:i,userId:c,dataUrl:m,eventsUrl:w,loadRemoteOnNavigate:A,fetchOptions:z,transformEvent:V,buildEventsQuery:p,mutationUrl:D,buildMutationUrl:W,mutationMethod:ee="post",onNavigate:K,onViewChange:_,onEventClick:L,onEventCreate:J,className:j,id:q,testId:E}){const[f,te]=t.useState(r),[S,F]=t.useState(l?new Date(l):new Date(2020,9,1)),[$,T]=t.useState(ot(l?new Date(l):new Date)),[a,P]=t.useState(!1),[N,H]=t.useState([]),[ue,le]=t.useState(!1),[u,v]=t.useState(null),[g,I]=t.useState(!1),[Z,b]=t.useState(null),Y=w||m,de=(x,se)=>{if(x==="month"){const h=nt(new Date(se.getFullYear(),se.getMonth(),1)),oe=Ke(h,42);return{start:h,end:oe}}if(x==="week"){const h=nt(se),oe=Ke(h,7);return{start:h,end:oe}}const pe=new Date(se);pe.setHours(0,0,0,0);const ge=Ke(pe,1);return{start:pe,end:ge}};t.useEffect(()=>{if(!Y||!A&&g)return;let x=!1;le(!0),v(null);const{start:se,end:pe}=de(f,S),ge=p?p({start:se,end:pe,view:f,userId:c}):`?start=${se.toISOString()}&end=${pe.toISOString()}${c?`&userId=${c}`:""}`,h=Y+ge,oe=n=>{if(V)return V(n);const C=n.start_date&&n.end_date,d=C?new Date(n.start_date):new Date(n.start||n.startDate||n.date),X=C?new Date(n.end_date):new Date(n.end||n.endDate||n.finish||n.finishDate||d);return{id:String(n.id??n._id??`${d?.toISOString()||"evt"}-${Math.random()}`),title:n.title||n.text||"Event",start:d?.toISOString(),end:X?.toISOString(),color:n.color}};return fetch(h,z).then(async n=>{if(!n.ok)throw new Error(`Request failed: ${n.status}`);const C=await n.json(),X=(Array.isArray(C)?C:Array.isArray(C.data)?C.data:Array.isArray(C.events)?C.events:[]).map(oe).filter(y=>y.start&&y.end);x||(H(X),I(!0))}).catch(n=>{x||v(n.message)}).finally(()=>{x||le(!1)}),()=>{x=!0}},[Y,A,f,S,c,z,V,p,g]),t.useEffect(()=>{const x=()=>typeof window>"u"?!1:window.innerWidth<=768;P(x());const se=()=>P(x());return window.addEventListener("resize",se),()=>window.removeEventListener("resize",se)},[]),t.useEffect(()=>{T(ot(S))},[S]);const G=t.useMemo(()=>{const x=new Date(S.getFullYear(),S.getMonth(),1),se=nt(x),pe=[];for(let ge=0;ge<42;ge++)pe.push(Ke(se,ge));return pe},[S]),U=t.useMemo(()=>{const x=nt(S);return Array.from({length:7},(se,pe)=>Ke(x,pe))},[S]),ie=t.useMemo(()=>[S],[S]),ae=t.useMemo(()=>[...N,...s].map(se=>({...se,_start:new Date(se.start),_end:new Date(se.end)})),[s,N]),ne=t.useMemo(()=>Kt($),[$]),M=t.useMemo(()=>f!=="month"?[]:[...ae].filter(x=>x._start.getMonth()===S.getMonth()&&x._start.getFullYear()===S.getFullYear()).sort((x,se)=>x._start.getTime()-se._start.getTime()),[f,ae,S]),k=t.useMemo(()=>{if(f==="month"){const x=G[0],se=Ke(G[G.length-1],1);return ae.filter(pe=>pe._start<se&&pe._end>=x)}if(f==="week"){const x=U[0],se=Ke(U[U.length-1],1);return ae.filter(pe=>pe._start<se&&pe._end>=x)}return ae.filter(x=>{const se=ie[0];return x._start.toDateString()===se.toDateString()})},[f,G,U,ie,ae]),o=x=>{let se=new Date(S);f==="month"&&(se=new Date(S.getFullYear(),S.getMonth()+x,1)),f==="week"&&(se=Ke(S,x*7)),f==="day"&&(se=Ke(S,x)),F(se),K?.(se.toISOString(),f)},O=x=>{te(x),_?.(x)},R=()=>{const x=new Date(S),se=Ke(x,0);x.setHours(9,0,0,0),se.setHours(10,0,0,0);const pe={id:`${Date.now()}`,title:"New event",start:x.toISOString(),end:se.toISOString()};(async()=>{if(!D)return J?.(pe);const h=W?W(pe,"create"):D;try{le(!0),v(null);const oe=await fetch(h,{method:ee,headers:{"Content-Type":"application/json"},body:JSON.stringify(pe)});if(!oe.ok)throw new Error(`Failed to save event: ${oe.status}`);const n=await oe.json(),C=V?V(n):n;H(d=>[...d,C]),J?.(C)}catch(oe){v(oe.message||"Failed to save event")}finally{le(!1)}})()},ce=x=>k.filter(se=>se._start.toDateString()===x.toDateString()),fe=x=>k.filter(se=>se._start.toDateString()===x),me=x=>k.filter(se=>ot(se._start)===x),Se=t.useMemo(()=>k.map(x=>({date:ot(x._start),color:x.color,text:x.title})),[k]),Ne=t.useMemo(()=>me($),[$,k]),De=x=>e.jsxs("div",{className:"avakio-sch-event",style:{background:x.color||"var(--sch-primary)"},onClick:()=>L?.(x),children:[e.jsx("div",{className:"avakio-sch-event-title",children:x.title}),e.jsxs("div",{className:"avakio-sch-event-time",children:[Ue(x._start)," – ",Ue(x._end)]})]},x.id),Me=x=>{const se=ce(x).sort((pe,ge)=>pe._start.getTime()-ge._start.getTime());return se.length?se.map(pe=>De(pe)):e.jsx("div",{className:"avakio-sch-mobile-empty",children:"No events"})};return e.jsxs("div",{id:q,"data-testid":E,className:["avakio-scheduler",j||""].join(" "),children:[e.jsxs("div",{className:"avakio-sch-toolbar",children:[e.jsxs("div",{className:"avakio-sch-nav",children:[e.jsx("button",{onClick:()=>o(-1),className:"avakio-sch-btn",children:"Prev"}),e.jsx("button",{onClick:()=>F(new Date),className:"avakio-sch-btn",children:"Today"}),e.jsx("button",{onClick:()=>o(1),className:"avakio-sch-btn",children:"Next"})]}),e.jsx("div",{className:"avakio-sch-title",children:S.toLocaleString(void 0,{month:"long",year:"numeric",day:f==="day"?"numeric":void 0})}),e.jsxs("div",{className:"avakio-sch-views",children:[e.jsx("button",{onClick:()=>O("month"),className:`avakio-sch-btn ${f==="month"?"is-active":""}`,children:"Month"}),e.jsx("button",{onClick:()=>O("week"),className:`avakio-sch-btn ${f==="week"?"is-active":""}`,children:"Week"}),e.jsx("button",{onClick:()=>O("day"),className:`avakio-sch-btn ${f==="day"?"is-active":""}`,children:"Day"}),e.jsx("button",{onClick:R,className:"avakio-sch-btn",children:"New"})]}),ue&&e.jsx("div",{className:"avakio-sch-status",children:"Loading remote events…"}),u&&e.jsx("div",{className:"avakio-sch-status is-error",children:u})]}),f==="month"&&a&&e.jsxs("div",{className:"avakio-sch-month-mobile",children:[e.jsx(Wt,{value:$,onChange:x=>{const se=Array.isArray(x)?x[0]:x;se&&(T(se),F(Kt(se)))},onMonthChange:x=>F(x),markers:Se,weekStart:1}),e.jsxs("div",{className:"avakio-sch-mobile-events",children:[e.jsxs("div",{className:"avakio-sch-mobile-events-header",children:[ht(ne)," — ",Ne.length," event",Ne.length===1?"":"s"]}),e.jsxs("div",{className:"avakio-sch-mobile-list",children:[Ne.length===0&&e.jsx("div",{className:"avakio-sch-mobile-empty",children:"No events for this date."}),Ne.slice().sort((x,se)=>x._start.getTime()-se._start.getTime()).map(x=>e.jsxs("div",{className:"avakio-sch-mobile-item",onClick:()=>L?.(x),children:[e.jsx("span",{className:"avakio-sch-dot",style:{background:x.color||"var(--sch-primary)"}}),e.jsxs("div",{className:"avakio-sch-mobile-meta",children:[e.jsx("div",{className:"avakio-sch-mobile-title",children:x.title}),e.jsxs("div",{className:"avakio-sch-mobile-time",children:[Ue(x._start)," – ",Ue(x._end)]})]})]},x.id))]})]})]}),f==="month"&&!a&&e.jsxs("div",{className:"avakio-sch-month",children:[e.jsx("div",{className:"avakio-sch-weekdays",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(x=>e.jsx("div",{className:"avakio-sch-weekday",children:x},x))}),e.jsx("div",{className:"avakio-sch-grid",children:G.map(x=>e.jsxs("div",{className:`avakio-sch-cell ${x.getMonth()===S.getMonth()?"":"is-out"}`,children:[e.jsxs("div",{className:"avakio-sch-cell-date",children:[e.jsx("span",{children:x.getDate()}),ce(x).length>1&&e.jsxs("button",{className:"avakio-sch-more-btn",onClick:se=>b({dateKey:x.toDateString(),anchorRect:se.currentTarget.getBoundingClientRect()}),title:`${ce(x).length-1} more`,children:[ce(x).length-1," more"]})]}),e.jsx("div",{className:"avakio-sch-cell-events",children:ce(x).slice(0,1).map(se=>De(se))})]},x.toISOString()))})]}),f==="month"&&!a&&M.length>0&&e.jsx("div",{className:"avakio-sch-month-agenda",children:M.map(x=>e.jsxs("div",{className:"avakio-sch-agenda-item",onClick:()=>L?.(x),children:[e.jsxs("div",{className:"avakio-sch-agenda-time",children:[e.jsx("div",{children:Ue(x._start)}),e.jsx("div",{className:"avakio-sch-agenda-time-end",children:Ue(x._end)})]}),e.jsx("span",{className:"avakio-sch-dot",style:{background:x.color||"var(--sch-primary)"}}),e.jsxs("div",{className:"avakio-sch-agenda-meta",children:[e.jsx("div",{className:"avakio-sch-agenda-title",children:x.title}),e.jsx("div",{className:"avakio-sch-agenda-date",children:x._start.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})})]})]},x.id))}),Z&&e.jsxs(gt,{open:!0,anchorRect:Z.anchorRect||void 0,offset:{y:6},theme:i,closeOnOutside:!0,closeOnEsc:!0,onClose:()=>b(null),children:[e.jsx("h4",{children:"Other events"}),e.jsx("div",{className:"avakio-sch-more-list",children:fe(Z.dateKey).slice(1).map(x=>e.jsxs("div",{className:"avakio-sch-more-item",onClick:()=>L?.(x),children:[e.jsx("span",{className:"avakio-sch-dot",style:{background:x.color||"var(--sch-primary)"}}),e.jsxs("div",{className:"avakio-sch-more-meta",children:[e.jsx("div",{className:"avakio-sch-more-title",children:x.title}),e.jsxs("div",{className:"avakio-sch-more-time",children:[Ue(x._start)," – ",Ue(x._end)]})]})]},x.id))})]}),f==="week"&&e.jsx("div",{className:"avakio-sch-week",children:e.jsx("div",{className:"avakio-sch-week-row",children:U.map(x=>e.jsxs("div",{className:"avakio-sch-daycol",children:[e.jsx("div",{className:"avakio-sch-day-header",children:ht(x)}),e.jsx("div",{className:"avakio-sch-day-events",children:Me(x)})]},x.toISOString()))})}),f==="day"&&e.jsxs("div",{className:"avakio-sch-day",children:[e.jsx("div",{className:"avakio-sch-day-header",children:ht(ie[0])}),e.jsx("div",{className:"avakio-sch-day-events",children:Me(ie[0])})]})]})}function Ua({data:s,collapsed:r=!1,position:l="left",collapsedWidth:i=41,width:c=250,activeTitle:m=!0,titleHeight:w=40,multipleOpen:A=!1,onSelect:z,onToggle:V,className:p="",mobileBreakpoint:D=768,tabletBreakpoint:W=1024,autoCloseMobile:ee=!0,showOverlay:K=!0,onOverlayClick:_,showMobileDongle:L=!0,dongleIcon:J,id:j,testId:q}){const[E,f]=t.useState(r),[te,S]=t.useState({}),[F,$]=t.useState(null),[T,a]=t.useState(null),[P,N]=t.useState(!1),[H,ue]=t.useState(!1);t.useEffect(()=>{const b=()=>{const Y=window.innerWidth,de=Y<D,G=Y>=D&&Y<W;N(de),ue(G),f(!!(de||G))};return b(),window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[D,W]),t.useEffect(()=>{f(r)},[r]),t.useEffect(()=>(P&&!E?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[P,E]),t.useCallback(()=>{const b=!E;f(b),V&&V(b)},[E,V]);const le=t.useCallback((b,Y)=>{!Y||!m||S(de=>A?{...de,[b]:!de[b]}:{[b]:!de[b]})},[A,m]),u=t.useCallback((b,Y,de=0,G)=>{if(E&&Y){f(!1);return}a(b.id),z&&z(b),(P||H)&&ee&&(de>0||!Y)?(H&&de>0&&G&&a(G),f(!0)):Y&&!E&&le(b.id,Y)},[le,z,P,H,ee,E]),v=t.useCallback(()=>{_?_():f(!0)},[_]),g=b=>b?e.jsx("span",{className:"avakio-sidebar-icon",children:b}):null,I=(b,Y,de)=>!b||de===0?null:e.jsx("span",{className:`avakio-sidebar-arrow ${Y?"open":""}`,children:e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"currentColor",children:e.jsx("path",{d:"M4 3l4 3-4 3V3z"})})}),Z=(b,Y=0,de)=>{const G=!!(b.data&&b.data.length>0),U=te[b.id]||!1,ie=T===b.id,ae=F===b.id;return e.jsxs("div",{className:"avakio-sidebar-item-wrapper",children:[e.jsxs("div",{className:["avakio-sidebar-item",`level-${Y}`,ie?"selected":"",G?"has-children":""].filter(Boolean).join(" "),onClick:()=>u(b,G,Y,de),onMouseEnter:()=>$(b.id),onMouseLeave:()=>$(null),style:{paddingLeft:Y===0?void 0:`${16+Y*20}px`,minHeight:Y===0?`${w}px`:void 0},children:[I(G,U,Y),g(b.icon),!E&&e.jsx("span",{className:"avakio-sidebar-value",children:b.value})]}),E&&ae&&Y===0&&e.jsxs("div",{className:`avakio-sidebar-popup ${l==="right"?"popup-left":"popup-right"}`,style:{minHeight:`${w}px`},children:[e.jsx("div",{className:"avakio-sidebar-popup-title",children:b.value}),G&&e.jsx("div",{className:"avakio-sidebar-popup-children",children:b.data?.map(ne=>e.jsxs("div",{className:`avakio-sidebar-popup-item ${T===ne.id?"selected":""}`,onClick:M=>{M.stopPropagation(),u(ne,!1,1,b.id)},children:[g(ne.icon),e.jsx("span",{className:"avakio-sidebar-value",children:ne.value})]},ne.id))})]}),!E&&G&&U&&e.jsx("div",{className:"avakio-sidebar-children",children:b.data?.map(ne=>Z(ne,Y+1,Y===0?b.id:de))})]},b.id)};return e.jsxs(e.Fragment,{children:[P&&!E&&K&&e.jsx("div",{className:"avakio-sidebar-overlay",onClick:v,"aria-hidden":"true"}),P&&E&&L&&e.jsx("button",{type:"button",className:`avakio-sidebar-mobile-dongle position-${l}`,onClick:()=>f(!1),"aria-label":"Open sidebar",children:J||e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M2 4h16v2H2V4zm0 5h16v2H2V9zm0 5h16v2H2v-2z"})})}),e.jsx("div",{id:j,"data-testid":q,className:["avakio-sidebar",E?"collapsed":"expanded",`position-${l}`,P?"mobile":"desktop",p].filter(Boolean).join(" "),style:{width:E?`${i}px`:`${c}px`},children:e.jsx("div",{className:"avakio-sidebar-content",children:s.map(b=>Z(b))})})]})}function Ya({onClick:s,className:r="",icon:l,isCollapsed:i=!1}){return e.jsx("button",{type:"button",className:`avakio-sidebar-toggle-button ${i?"collapsed":"expanded"} ${r}`,onClick:s,"aria-label":i?"Expand sidebar":"Collapse sidebar",children:l||e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M2 4h16v2H2V4zm0 5h16v2H2V9zm0 5h16v2H2v-2z"})})})}const Ga=s=>{const r=typeof s=="string"?new Date(s):s,l=new Date,i=l.getTime()-r.getTime(),c=Math.floor(i/6e4),m=Math.floor(i/36e5),w=Math.floor(i/864e5);return c<1?"Just now":c<60?`${c}m ago`:m<24?`${m}h ago`:w<7?`${w}d ago`:r.toLocaleDateString(void 0,{month:"short",day:"numeric",year:r.getFullYear()!==l.getFullYear()?"numeric":void 0})},qt=()=>`comment-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,Ut=t.forwardRef(({id:s,testId:r,theme:l,data:i=[],users:c=[],currentUser:m,mode:w="default",readonly:A=!1,sendAction:z="enter",placeholder:V="Write a comment...",moreButtonLabel:p="Load more comments",hasMore:D=!1,mentions:W=!1,keepButtonVisible:ee=!1,borderless:K=!1,css:_,className:L="",width:J,height:j,disabled:q=!1,onAdd:E,onDelete:f,onEdit:te,onLoadMore:S,onUserMentioned:F,dateFormatter:$=Ga,renderAvatar:T},a)=>{const P=t.useRef(null),N=t.useRef(null),H=t.useRef(null),[ue,le]=t.useState(i),[u,v]=t.useState(q),[g,I]=t.useState(""),[Z,b]=t.useState(null),[Y,de]=t.useState(""),[G,U]=t.useState(null),[ie,ae]=t.useState(!1),[ne,M]=t.useState(""),[k,o]=t.useState(m);t.useEffect(()=>{le(i)},[i]),t.useEffect(()=>{v(q)},[q]),t.useEffect(()=>{o(m)},[m]);const O=t.useMemo(()=>{const n=[...ue].sort((C,d)=>{const X=new Date(C.date).getTime(),y=new Date(d.date).getTime();return w==="chat"?y-X:X-y});return w==="chat"?n.reverse():n},[ue,w]),R=t.useCallback(n=>{if(n)return c.find(C=>C.id===n)},[c]),ce=t.useMemo(()=>{if(!ne)return c;const n=ne.toLowerCase();return c.filter(C=>C.value.toLowerCase().includes(n))},[c,ne]),fe=t.useCallback(()=>{if(!g.trim()||u||A)return;const n={id:qt(),user_id:k,date:new Date,text:g.trim()};if(le(C=>[...C,n]),I(""),E?.(n),W){const C=/@"([^"]+)"/g;let d;for(;(d=C.exec(n.text))!==null;){const X=c.find(y=>y.value===d[1]);X&&F?.(X.id,n)}}setTimeout(()=>{H.current&&(H.current.scrollTop=H.current.scrollHeight)},100)},[g,u,A,k,W,c,w,E,F]),me=n=>{(z==="enter"&&n.key==="Enter"&&!n.shiftKey||z==="shift+enter"&&n.key==="Enter"&&n.shiftKey)&&(n.preventDefault(),fe()),W&&n.key==="@"&&(ae(!0),M(""))},Se=n=>{const C=n.target.value;if(I(C),W&&ie){const d=C.lastIndexOf("@");d!==-1&&M(C.slice(d+1))}},Ne=n=>{const C=g.lastIndexOf("@");if(C!==-1){const d=g.slice(0,C)+`@"${n.value}" `;I(d)}ae(!1),M(""),N.current?.focus()},De=n=>{le(C=>C.filter(d=>d.id!==n)),U(null),f?.(n)},Me=n=>{b(n.id),de(n.text),U(null)},x=n=>{if(!Y.trim())return;le(d=>d.map(X=>X.id===n?{...X,text:Y.trim()}:X));const C=ue.find(d=>d.id===n);C&&te?.({...C,text:Y.trim()}),b(null),de("")},se=()=>{b(null),de("")},pe=n=>{if(n?.image)return e.jsx("img",{src:n.image,alt:n.value,className:"avakio-comment-avatar-img"});const C=n?.value?n.value.split(" ").map(d=>d[0]).join("").toUpperCase().slice(0,2):"?";return e.jsx("span",{className:"avakio-comment-avatar-initials",children:C})},ge=n=>W?n.split(/(@"[^"]+")/).filter(Boolean).map((d,X)=>{if(d.startsWith('@"')&&d.endsWith('"')){const y=d.slice(2,-1);return e.jsxs("span",{className:"avakio-comment-mention",children:["@",y]},X)}return d}):n;t.useImperativeHandle(a,()=>({getNode:()=>P.current,getComments:()=>ue,add:n=>{const C={...n,id:qt()};le(d=>[...d,C]),E?.(C)},remove:n=>{le(C=>C.filter(d=>d.id!==n)),f?.(n)},edit:n=>{const C=ue.find(d=>d.id===n);C&&Me(C)},getUsers:()=>c,setCurrentUser:n=>o(n),focus:()=>N.current?.focus(),isEnabled:()=>!u,enable:()=>v(!1),disable:()=>v(!0),clear:()=>le([])}),[ue,c,u,E,f]);const h=["avakio-comment",l&&`avakio-comment-theme-${l}`,w==="chat"&&"avakio-comment-mode-chat",K&&"avakio-comment-borderless",u&&"avakio-comment-disabled",A&&"avakio-comment-readonly",L].filter(Boolean).join(" "),oe={..._&&typeof _=="object"&&!Array.isArray(_)?_:{},width:typeof J=="number"?`${J}px`:J,height:typeof j=="number"?`${j}px`:j};return e.jsxs("div",{ref:P,id:s,"data-testid":r,"data-admin-theme":l,className:h,style:oe,children:[e.jsxs("div",{ref:H,className:"avakio-comment-list",children:[w==="chat"&&D&&e.jsx("button",{className:"avakio-comment-more-btn",onClick:S,disabled:u,children:p}),O.map(n=>{const C=R(n.user_id),d=k!==void 0&&n.user_id===k,X=Z===n.id;return e.jsxs("div",{className:"avakio-comment-item",children:[e.jsxs("div",{className:"avakio-comment-avatar",children:[T?T(C):pe(C),C?.status&&C.status!=="none"&&e.jsx("span",{className:`avakio-comment-status avakio-comment-status-${C.status}`})]}),e.jsxs("div",{className:"avakio-comment-content",children:[e.jsxs("div",{className:"avakio-comment-header",children:[e.jsx("span",{className:"avakio-comment-author",children:C?.value||"Anonymous"}),e.jsx("span",{className:"avakio-comment-date",children:$(n.date)}),d&&!A&&!X&&e.jsxs("div",{className:"avakio-comment-menu-wrapper",children:[e.jsx("button",{className:"avakio-comment-menu-btn",onClick:()=>U(G===n.id?null:n.id),children:e.jsx(Ia,{size:16})}),G===n.id&&e.jsxs("div",{className:"avakio-comment-menu",children:[e.jsxs("button",{onClick:()=>Me(n),children:[e.jsx(Pa,{size:14}),"Edit"]}),e.jsxs("button",{onClick:()=>De(n.id),children:[e.jsx(Ba,{size:14}),"Delete"]})]})]})]}),X?e.jsxs("div",{className:"avakio-comment-edit",children:[e.jsx("textarea",{value:Y,onChange:y=>de(y.target.value),className:"avakio-comment-edit-input",autoFocus:!0}),e.jsxs("div",{className:"avakio-comment-edit-actions",children:[e.jsx("button",{className:"avakio-comment-edit-save",onClick:()=>x(n.id),children:e.jsx(tt,{size:14})}),e.jsx("button",{className:"avakio-comment-edit-cancel",onClick:se,children:e.jsx(We,{size:14})})]})]}):e.jsx("div",{className:"avakio-comment-text",children:ge(n.text)})]})]},n.id)}),w==="default"&&D&&e.jsx("button",{className:"avakio-comment-more-btn",onClick:S,disabled:u,children:p}),O.length===0&&e.jsx("div",{className:"avakio-comment-empty",children:"No comments yet. Be the first to comment!"})]}),!A&&e.jsxs("div",{className:"avakio-comment-input-area",children:[e.jsxs("div",{className:"avakio-comment-input-wrapper",children:[e.jsx("textarea",{ref:N,value:g,onChange:Se,onKeyDown:me,placeholder:V,className:"avakio-comment-input",disabled:u,rows:1}),ie&&ce.length>0&&e.jsx("div",{className:"avakio-comment-mentions",children:ce.map(n=>e.jsxs("button",{className:"avakio-comment-mention-item",onClick:()=>Ne(n),children:[e.jsx("div",{className:"avakio-comment-mention-avatar",children:pe(n)}),e.jsx("span",{children:n.value})]},n.id))})]}),(ee||g.trim())&&e.jsx("button",{className:"avakio-comment-send-btn",onClick:fe,disabled:u||!g.trim(),children:e.jsx(Ha,{size:18})})]})]})});Ut.displayName="AvakioComment";const Re=t.createContext(null),Xa=({children:s,value:r,defaultValue:l,onValueChange:i,disabled:c})=>{const[m,w]=t.useState(l||""),[A,z]=t.useState(!1),V=r!==void 0?r:m,p=D=>{r===void 0&&w(D),i?.(D),z(!1)};return e.jsx(Re.Provider,{value:{value:V,onValueChange:p,open:A,setOpen:z},children:e.jsx("div",{style:{position:"relative",display:"inline-block"},children:s})})},Ja=({children:s,className:r,...l})=>{const i=t.useContext(Re);if(!i)throw new Error("SelectTrigger must be used within Select");return e.jsx("button",{type:"button",className:r,onClick:()=>i.setOpen(!i.open),...l,children:s})},Za=({placeholder:s,...r})=>{const l=t.useContext(Re);if(!l)throw new Error("SelectValue must be used within Select");return e.jsx("span",{...r,children:l.value||s})},Qa=({children:s,className:r,...l})=>{const i=t.useContext(Re),c=t.useRef(null);if(!i)throw new Error("SelectContent must be used within Select");return t.useEffect(()=>{const m=w=>{c.current&&!c.current.contains(w.target)&&i.setOpen(!1)};return i.open&&document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[i.open]),i.open?e.jsx("div",{ref:c,className:r,style:{position:"absolute",top:"100%",left:0,right:0,zIndex:50,minWidth:"8rem",background:"var(--view-background-color, white)",border:"1px solid var(--view-border-color, #e5e7eb)",borderRadius:"6px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",marginTop:"4px",overflow:"hidden"},...l,children:s}):null},lt=({children:s,value:r,className:l,...i})=>{const c=t.useContext(Re);if(!c)throw new Error("SelectItem must be used within Select");const m=c.value===r;return e.jsx("div",{className:l,style:{padding:"8px 12px",cursor:"pointer",background:m?"var(--view-hover-color, #f3f4f6)":"transparent",fontSize:"14px"},onClick:()=>c.onValueChange(r),onMouseEnter:w=>{w.target.style.background="var(--view-hover-color, #f3f4f6)"},onMouseLeave:w=>{w.target.style.background=m?"var(--view-hover-color, #f3f4f6)":"transparent"},...i,children:s})};function Ra({id:s="avakio-datatable",data:r,spans:l,columns:i,height:c="auto",width:m="100%",select:w=!1,multiselect:A=!1,rowHeight:z=40,headerHeight:V=44,fixedRowNumber:p=0,hover:D=!0,resizable:W=!0,sortable:ee=!0,filterable:K=!0,paging:_=!1,pageSize:L=20,autoConfig:J=!1,scroll:j="xy",css:q="",serverSide:E=!1,onRowClick:f,onRowDoubleClick:te,onSelectChange:S,onSort:F,onFilter:$,loading:T=!1,emptyText:a="No data available",totalCount:P,currentPage:N=1,onPageChange:H,onPageSizeChange:ue,testId:le}){const[u,v]=t.useState(new Set),[g,I]=t.useState(null),[Z,b]=t.useState("asc"),Y=t.useMemo(()=>{const d=new Map;return!l||l.length===0||l.forEach(([X,y,Q,re,be,B])=>{const ve=String(X),we=`${ve}-${y}`;d.set(we,{skip:!1,colspan:Q,rowspan:re,value:be,cssClass:B});const xe=i.findIndex(_e=>_e.id===y);if(xe!==-1)for(let _e=1;_e<Q;_e++){const ze=i[xe+_e];ze&&d.set(`${ve}-${ze.id}`,{skip:!0})}const Ae=r.map(_e=>String(_e.id||_e.Id)),Ie=Ae.indexOf(ve);if(Ie!==-1)for(let _e=1;_e<re;_e++){const ze=Ie+_e;if(ze<Ae.length){const Be=Ae[ze];d.set(`${Be}-${y}`,{skip:!0});for(let he=1;he<Q;he++){const ke=i[xe+he];ke&&d.set(`${Be}-${ke.id}`,{skip:!0})}}}}),d},[l,i,r]),[de,G]=t.useState({}),[U,ie]=t.useState({}),[ae,ne]=t.useState(N),[M,k]=t.useState(L),[o,O]=t.useState(null),[R,ce]=t.useState(0),[fe,me]=t.useState(0);t.useEffect(()=>{ne(N)},[N]);const Se=t.useMemo(()=>{if(E)return r;let d=[...r];return Object.entries(de).forEach(([X,y])=>{if(!y||Array.isArray(y)&&y.length===0)return;const Q=i.find(re=>re.id===X);d=d.filter(re=>{const be=re[X];if(Q?.filterType==="multicombo"&&Array.isArray(y)&&y.length>0){const B=String(be||"").toLowerCase();return y.some(ve=>B.includes(ve.toLowerCase()))}if(Q?.filterType==="combo"&&y){const B=String(be||"").toLowerCase(),ve=String(y).toLowerCase();return B.includes(ve)}if(Q?.filterType==="date"&&be){const B=String(be).split("T")[0],ve=String(y).split("T")[0];return B===ve}return typeof y=="string"&&y.trim()?String(be||"").toLowerCase().includes(y.toLowerCase()):!0})}),d},[r,de,i,E]),Ne=t.useMemo(()=>E||!g?Se:[...Se].sort((d,X)=>{const y=d[g],Q=X[g];if(y==null)return 1;if(Q==null)return-1;let re=0;return typeof y=="number"&&typeof Q=="number"?re=y-Q:re=String(y).localeCompare(String(Q)),Z==="asc"?re:-re}),[Se,g,Z,E]),De=t.useMemo(()=>{if(E)return r;if(!_)return Ne;const d=(ae-1)*M;return Ne.slice(d,d+M)},[Ne,_,ae,M,E,r]),Me=Math.ceil((P||Ne.length)/M),x=t.useCallback(d=>{if(!ee)return;const X=g===d&&Z==="asc"?"desc":"asc";I(d),b(X),F&&F(d,X)},[ee,g,Z,F]),se=t.useCallback((d,X)=>{const y={...de,[d]:X};G(y),ne(1),$&&$(y)},[de,$]),pe=t.useCallback((d,X,y)=>{w&&(A&&(y.ctrlKey||y.metaKey)?v(Q=>{const re=new Set(Q);return re.has(X)?re.delete(X):re.add(X),re}):v(new Set([X]))),f&&f(d,X)},[w,A,f]),ge=t.useCallback((d,X)=>{te&&te(d,X)},[te]),h=t.useCallback((d,X)=>{if(!W)return;X.preventDefault(),X.stopPropagation();const y=i.find(re=>re.id===d),Q=U[d]||(typeof y?.width=="number"?y.width:150);O(d),ce(X.clientX),me(Q)},[W,i,U]);t.useEffect(()=>{if(!o)return;const d=y=>{const Q=y.clientX-R,re=Math.max(50,fe+Q);ie(be=>({...be,[o]:re}))},X=()=>{O(null)};return document.addEventListener("mousemove",d),document.addEventListener("mouseup",X),()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",X)}},[o,R,fe]),t.useEffect(()=>{if(S){const d=Array.from(u).map(X=>De[X]).filter(Boolean);S(d)}},[u,De,S]);const oe=d=>{const X=U[d.id];return X?`${X}px`:d.width?typeof d.width=="number"?`${d.width}px`:d.width:"auto"},n=(d,X)=>{if(d.template)return d.template(X);const y=X[d.id];return d.format?d.format(y):y!=null?String(y):""},C=i.filter(d=>!d.hidden);return e.jsxs("div",{id:s,"data-testid":le,className:`avakio-datatable ${q}`,style:{height:typeof c=="number"?`${c}px`:c,width:typeof m=="number"?`${m}px`:m},children:[e.jsxs("div",{className:"avakio-datatable-header",style:{minHeight:`${V}px`},children:[e.jsx("div",{className:"avakio-datatable-header-row",children:C.map(d=>e.jsxs("div",{className:`avakio-datatable-header-cell ${d.headerCssClass||""} ${g===d.id?"sorted":""}`,style:{width:oe(d),minWidth:d.minWidth?`${d.minWidth}px`:void 0,maxWidth:d.maxWidth?`${d.maxWidth}px`:void 0,textAlign:d.align||"left"},children:[e.jsxs("div",{className:"avakio-datatable-header-content",onClick:()=>ee&&d.sort!==!1&&x(d.id),children:[e.jsx("span",{className:"avakio-datatable-header-text",children:d.header}),ee&&d.sort!==!1&&e.jsx("span",{className:"avakio-datatable-sort-icon",children:g===d.id?Z==="asc"?e.jsx(Da,{className:"h-4 w-4"}):e.jsx(Ye,{className:"h-4 w-4"}):e.jsx(Ea,{className:"h-4 w-4 opacity-40"})})]}),W&&d.resizable!==!1&&e.jsx("div",{className:"avakio-datatable-resize-handle",onMouseDown:X=>h(d.id,X)})]},d.id))}),K&&e.jsx("div",{className:"avakio-datatable-filter-row",children:C.map(d=>e.jsx("div",{className:"avakio-datatable-filter-cell",style:{width:oe(d),minWidth:d.minWidth?`${d.minWidth}px`:void 0,maxWidth:d.maxWidth?`${d.maxWidth}px`:void 0},children:d.filterable!==!1&&e.jsx(e.Fragment,{children:d.filterComponent?d.filterComponent(de[d.id],X=>se(d.id,X)):e.jsxs("div",{className:"avakio-datatable-filter-input-wrapper",children:[e.jsx(Je,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("input",{type:"text",className:"avakio-datatable-filter-input",placeholder:"Filter...",value:de[d.id]||"",onChange:X=>se(d.id,X.target.value)}),de[d.id]&&e.jsx("button",{className:"avakio-datatable-filter-clear",onClick:()=>se(d.id,""),children:e.jsx(We,{className:"h-3 w-3"})})]})})},d.id))})]}),e.jsx("div",{className:`avakio-datatable-body ${j?`scroll-${j}`:""} scrollbar-visible`,style:{height:typeof c=="number"?`${c-V-(_?50:0)}px`:"auto"},children:T?e.jsxs("div",{className:"avakio-datatable-loading",children:[e.jsx("div",{className:"avakio-datatable-spinner"}),e.jsx("p",{children:"Loading data..."})]}):De.length===0?e.jsx("div",{className:"avakio-datatable-empty",children:e.jsx("p",{children:a})}):e.jsx("div",{className:"avakio-datatable-rows",children:De.map((d,X)=>{const y=d.id!==void 0?`row-${d.id}`:X,Q=String(d.id||d.Id);return e.jsx("div",{className:`avakio-datatable-row ${u.has(X)?"selected":""} ${D?"hover":""}`,style:{height:`${z}px`},onClick:re=>pe(d,X,re),onDoubleClick:()=>ge(d,X),children:C.map(re=>{const be=`${Q}-${re.id}`,B=Y.get(be);if(B&&B.skip)return null;const ve=["avakio-datatable-cell",re.cssClass||"",B?.cssClass||""].filter(Boolean).join(" ");return e.jsx("div",{className:ve,style:{width:oe(re),minWidth:re.minWidth?`${re.minWidth}px`:void 0,maxWidth:re.maxWidth?`${re.maxWidth}px`:void 0,textAlign:re.align||"left"},...B?.colspan&&B.colspan>1?{"data-colspan":B.colspan}:{},...B?.rowspan&&B.rowspan>1?{"data-rowspan":B.rowspan}:{},children:B?.value!==void 0?B.value:n(re,d)},re.id)})},y)})})}),_&&!T&&De.length>0&&e.jsxs("div",{className:"avakio-datatable-footer",children:[e.jsxs("div",{className:"avakio-datatable-footer-info",children:["Showing ",(ae-1)*M+1," to"," ",Math.min(ae*M,P||Ne.length)," of"," ",P||Ne.length," records"]}),e.jsxs("div",{className:"avakio-datatable-pagination",children:[e.jsxs(Xa,{value:String(M),onValueChange:d=>{const X=Number(d);k(X),ne(1),E&&ue&&ue(X)},children:[e.jsx(Ja,{className:"avakio-datatable-page-size-select",children:e.jsx(Za,{})}),e.jsxs(Qa,{children:[e.jsx(lt,{value:"10",children:"10 / page"}),e.jsx(lt,{value:"20",children:"20 / page"}),e.jsx(lt,{value:"50",children:"50 / page"}),e.jsx(lt,{value:"100",children:"100 / page"})]})]}),e.jsxs("div",{className:"avakio-datatable-pagination-controls",children:[e.jsx(at,{variant:"outline",size:"sm",onClick:()=>{const d=Math.max(1,ae-1);ne(d),H?.(d)},disabled:ae===1,children:e.jsx(qe,{className:"h-4 w-4"})}),e.jsxs("span",{className:"avakio-datatable-page-info",children:["Page ",ae," of ",Me]}),e.jsx(at,{variant:"outline",size:"sm",onClick:()=>{const d=Math.min(Me,ae+1);ne(d),H?.(d)},disabled:ae===Me,children:e.jsx(je,{className:"h-4 w-4"})})]})]})]})]})}function es({items:s,theme:r,onItemClick:l,className:i,style:c,dense:m,orientation:w="vertical",variant:A="default"}){const z=["avakio-timeline",m?"is-dense":"",i||""].filter(Boolean);w==="horizontal"&&z.push("is-horizontal"),w==="vertical"&&A==="split"&&z.push("is-vertical-split"),w==="horizontal"&&A==="colorband"&&z.push("is-horizontal-colorband");const V=e.jsx("div",{className:z.join(" ").trim(),"data-admin-theme":r,style:c,children:s.map((D,W)=>{const ee=W===s.length-1,K=D.status?`av-tl-dot-${D.status}`:"",_=A==="split",L=_?void 0:D.date||D.meta||D.time,J=!0,j=!!l,q=()=>l?.(D),E=f=>{l&&(f.key==="Enter"||f.key===" ")&&(f.preventDefault(),l(D))};return e.jsxs("div",{className:["av-tl-row",j?"is-clickable":""].join(" ").trim(),onClick:q,role:j?"button":void 0,tabIndex:j?0:void 0,onKeyDown:E,children:[e.jsx("div",{className:"av-tl-date",children:L}),e.jsxs("div",{className:["av-tl-marker",ee?"is-last":""].join(" ").trim(),children:[e.jsx("span",{className:["av-tl-dot",K].join(" ").trim(),style:D.color?{background:D.color,boxShadow:`0 0 0 3px ${D.color}1a`}:void 0,children:A==="split"?D.id:void 0}),!ee&&J&&e.jsx("span",{className:"av-tl-line"})]}),e.jsxs("div",{className:"av-tl-card",children:[e.jsxs("div",{className:"av-tl-card-head",children:[_&&D.date&&e.jsx("div",{className:"av-tl-date-inline",children:D.date}),e.jsx("div",{className:"av-tl-title",children:D.title})]}),D.subtitle&&e.jsx("div",{className:"av-tl-subtitle",children:D.subtitle}),D.description&&e.jsx("div",{className:"av-tl-desc",children:D.description})]})]},D.id)})}),p=e.jsx("div",{className:z.join(" ").trim(),"data-admin-theme":r,style:c,children:e.jsx("div",{className:"av-tl-h-track",children:s.map((D,W)=>{const ee=W===0,K=W===s.length-1,_=D.status?`av-tl-dot-${D.status}`:"",L=A==="colorband",J=L?void 0:D.date||D.meta||D.time,j=!!l,q=()=>l?.(D),E=te=>{l&&(te.key==="Enter"||te.key===" ")&&(te.preventDefault(),l(D))},f=L?W%2===0?"is-top":"is-bottom":"";return e.jsxs("div",{className:["av-tl-h-item",ee?"is-first":"",K?"is-last":"",j?"is-clickable":"",f].join(" ").trim(),onClick:q,role:j?"button":void 0,tabIndex:j?0:void 0,onKeyDown:E,children:[!L&&e.jsx("div",{className:"av-tl-h-date",children:J}),e.jsx("div",{className:["av-tl-h-dotwrap",ee?"is-first":"",K?"is-last":""].join(" ").trim(),children:e.jsx("span",{className:["av-tl-dot",_].join(" ").trim(),style:D.color?{background:D.color,boxShadow:`0 0 0 3px ${D.color}1a`}:void 0})}),e.jsxs("div",{className:"av-tl-h-card",children:[L&&D.date&&e.jsx("div",{className:"av-tl-h-date-inline",children:D.date}),e.jsx("div",{className:"av-tl-h-title",children:D.title}),D.description&&e.jsx("div",{className:"av-tl-h-desc",children:D.description})]})]},D.id)})})});return w==="horizontal"?p:V}function Yt(s,r,l=null,i=0){s.forEach(c=>{r.set(c.id,{node:c,parentId:l,depth:i}),c.data&&c.data.length>0&&Yt(c.data,r,c.id,i+1)})}function it(s){const r=[];return s.data&&s.data.forEach(l=>{r.push(l.id),r.push(...it(l))}),r}function ct(s){const r=[];return s.forEach(l=>{r.push(l.id),l.data&&r.push(...ct(l.data))}),r}const Gt=t.forwardRef(({id:s,testId:r,data:l,select:i=!0,checkbox:c=!1,threeState:m=!1,showIcons:w=!0,showToggle:A=!0,showLines:z=!1,navigation:V=!0,drag:p=!1,editable:D=!1,theme:W,filterMode:ee,itemHeight:K=32,width:_,height:L,className:J="",style:j,onSelect:q,onSelectChange:E,onClick:f,onDblClick:te,onOpen:S,onClose:F,onCheck:$,onEdit:T,onContext:a},P)=>{const N=t.useRef(null),H=t.useId(),ue=s||`avakio-tree-${H}`,[le,u]=t.useState(new Set),[v,g]=t.useState(()=>{const h=new Set,oe=n=>{n.forEach(C=>{C.open&&h.add(C.id),C.data&&oe(C.data)})};return oe(l),h}),[I,Z]=t.useState(()=>{const h=new Set,oe=n=>{n.forEach(C=>{C.checked===!0&&h.add(C.id),C.data&&oe(C.data)})};return oe(l),h}),[b,Y]=t.useState(null),[de,G]=t.useState(null),[U,ie]=t.useState(""),[ae,ne]=t.useState(null),[,M]=t.useState({}),k=t.useRef(new Map);t.useEffect(()=>{k.current.clear(),Yt(l,k.current)},[l]);const o=t.useCallback(h=>{if(!m)return I.has(h);const oe=k.current.get(h);if(!oe)return!1;const{node:n}=oe;if(!n.data||n.data.length===0)return I.has(h);const C=it(n),d=C.filter(X=>I.has(X)).length;return d===0?!1:d===C.length?!0:"indeterminate"},[I,m]),O=t.useCallback(h=>{const oe=k.current.get(h);if(!oe)return;const C=o(h)!==!0;Z(d=>{const X=new Set(d);if(m){const{node:y}=oe,Q=it(y);C?(X.add(h),Q.forEach(be=>X.add(be))):(X.delete(h),Q.forEach(be=>X.delete(be)));let re=oe.parentId;for(;re!==null;){const be=k.current.get(re);if(!be)break;const B=be.node;if(B.data){const ve=B.data.map(xe=>xe.id),we=ve.every(xe=>X.has(xe));ve.some(xe=>X.has(xe)),we?X.add(re):X.delete(re)}re=be.parentId}}else C?X.add(h):X.delete(h);return X}),$?.(h,C,oe.node)},[m,o,$]),R=t.useCallback((h,oe)=>{const n=k.current.get(h);!n||n.node.disabled||(i==="multi"&&oe?.ctrlKey?u(C=>{const d=new Set(C);return d.has(h)?d.delete(h):d.add(h),E?.(Array.from(d)),d}):i&&(u(new Set([h])),q?.(h,n.node),E?.([h])),Y(h))},[i,q,E]),ce=t.useCallback((h,oe)=>{oe?.stopPropagation();const n=k.current.get(h);!n||!n.node.data||g(C=>{const d=new Set(C);return d.has(h)?(d.delete(h),F?.(h,n.node)):(d.add(h),S?.(h,n.node)),d})},[S,F]),fe=t.useCallback((h,oe)=>{const n=k.current.get(h);n&&(R(h,oe),f?.(h,n.node,oe))},[R,f]),me=t.useCallback((h,oe)=>{const n=k.current.get(h);n&&(D&&!n.node.disabled?(G(h),ie(n.node.value)):n.node.data&&ce(h,oe),te?.(h,n.node,oe))},[D,ce,te]),Se=t.useCallback(h=>{const oe=k.current.get(h);oe&&U!==oe.node.value&&T?.(h,U,oe.node),G(null),ie("")},[U,T]),Ne=t.useCallback((h,oe)=>{const n=k.current.get(h);n&&a&&(oe.preventDefault(),a(h,n.node,oe))},[a]),De=t.useCallback(h=>{if(!V||b===null)return;const n=ct(l).filter(d=>{const X=k.current.get(d);if(!X)return!1;let y=X.parentId;for(;y!==null;){if(!v.has(y))return!1;const Q=k.current.get(y);if(!Q)return!1;y=Q.parentId}return!0}),C=n.indexOf(b);switch(h.key){case"ArrowDown":h.preventDefault(),C<n.length-1&&Y(n[C+1]);break;case"ArrowUp":h.preventDefault(),C>0&&Y(n[C-1]);break;case"ArrowRight":{h.preventDefault();const d=k.current.get(b);d?.node.data&&(v.has(b)?d.node.data.length>0&&Y(d.node.data[0].id):ce(b));break}case"ArrowLeft":{h.preventDefault();const d=k.current.get(b);d&&(v.has(b)&&d.node.data?ce(b):d.parentId!==null&&Y(d.parentId));break}case"Enter":case" ":h.preventDefault(),c?O(b):R(b);break;case"Home":h.preventDefault(),n.length>0&&Y(n[0]);break;case"End":h.preventDefault(),n.length>0&&Y(n[n.length-1]);break}},[V,b,l,v,c,ce,O,R]);t.useImperativeHandle(P,()=>({getSelectedId:()=>le.size>0?Array.from(le)[0]:null,getSelectedIds:()=>Array.from(le),select:h=>R(h),unselect:h=>{u(h?oe=>{const n=new Set(oe);return n.delete(h),n}:new Set)},open:h=>{g(n=>new Set(n).add(h));const oe=k.current.get(h);oe&&S?.(h,oe.node)},close:h=>{g(n=>{const C=new Set(n);return C.delete(h),C});const oe=k.current.get(h);oe&&F?.(h,oe.node)},openAll:()=>{const h=ct(l).filter(oe=>{const n=k.current.get(oe);return n?.node.data&&n.node.data.length>0});g(new Set(h))},closeAll:()=>g(new Set),checkItem:h=>{I.has(h)||O(h)},uncheckItem:h=>{I.has(h)&&O(h)},checkAll:()=>{const h=ct(l);Z(new Set(h))},uncheckAll:()=>Z(new Set),getChecked:()=>Array.from(I),isChecked:h=>o(h),isBranchOpen:h=>v.has(h),isBranch:h=>{const oe=k.current.get(h);return oe?.node.data!==void 0&&oe.node.data.length>0},getItem:h=>k.current.get(h)?.node,getParentId:h=>k.current.get(h)?.parentId??null,filter:h=>ne(()=>h),clearFilter:()=>ne(null),refresh:()=>M({}),focus:()=>N.current?.focus(),getNode:()=>N.current,showItem:h=>{let oe=k.current.get(h)?.parentId??null;const n=[];for(;oe!==null;)n.push(oe),oe=k.current.get(oe)?.parentId??null;g(C=>{const d=new Set(C);return n.forEach(X=>d.add(X)),d}),setTimeout(()=>{N.current?.querySelector(`[data-node-id="${h}"]`)?.scrollIntoView({behavior:"smooth",block:"nearest"})},50)}}));const Me=(h,oe=0)=>{const n=h.data&&h.data.length>0,C=v.has(h.id),d=le.has(h.id),X=b===h.id,y=de===h.id,Q=c?o(h.id):!1;if(ae&&!ae(h)&&!h.data?.some(B=>ae(B)||it(B).some(ve=>{const we=k.current.get(ve);return we&&ae(we.node)})))return null;const re=["avakio-tree-node",d&&"avakio-tree-node--selected",X&&"avakio-tree-node--focused",h.disabled&&"avakio-tree-node--disabled",n&&"avakio-tree-node--branch",h.css].filter(Boolean).join(" "),be=oe*20;return e.jsxs("div",{className:"avakio-tree-node-wrapper",children:[e.jsxs("div",{className:re,"data-node-id":h.id,style:{paddingLeft:be+8,height:K},onClick:B=>fe(h.id,B),onDoubleClick:B=>me(h.id,B),onContextMenu:B=>Ne(h.id,B),title:h.tooltip,role:"treeitem","aria-selected":d,"aria-expanded":n?C:void 0,tabIndex:X?0:-1,children:[A&&e.jsx("span",{className:`avakio-tree-toggle ${n?"avakio-tree-toggle--visible":""}`,onClick:B=>n&&ce(h.id,B),children:n?C?e.jsx(Ye,{size:16}):e.jsx(je,{size:16}):null}),c&&e.jsxs("span",{className:`avakio-tree-checkbox ${Q===!0?"avakio-tree-checkbox--checked":""} ${Q==="indeterminate"?"avakio-tree-checkbox--indeterminate":""}`,onClick:B=>{B.stopPropagation(),h.disabled||O(h.id)},children:[Q===!0&&e.jsx(tt,{size:12}),Q==="indeterminate"&&e.jsx(xt,{size:12})]}),w&&e.jsx("span",{className:"avakio-tree-icon",children:h.icon?C&&h.openIcon?h.openIcon:h.icon:n?C?e.jsx(Oa,{size:16}):e.jsx(za,{size:16}):e.jsx(Va,{size:16})}),y?e.jsx("input",{type:"text",className:"avakio-tree-edit-input",value:U,onChange:B=>ie(B.target.value),onBlur:()=>Se(h.id),onKeyDown:B=>{B.key==="Enter"&&Se(h.id),B.key==="Escape"&&(G(null),ie(""))},autoFocus:!0,onClick:B=>B.stopPropagation()}):e.jsx("span",{className:"avakio-tree-label",children:h.value})]}),n&&C&&e.jsx("div",{className:`avakio-tree-children ${z?"avakio-tree-children--lines":""}`,children:h.data.map(B=>Me(B,oe+1))})]},h.id)},[x,se]=t.useState(W||"material");t.useEffect(()=>{if(!W){const h=document.documentElement.getAttribute("data-admin-theme");h&&se(h);const oe=new MutationObserver(()=>{const n=document.documentElement.getAttribute("data-admin-theme");n&&se(n)});return oe.observe(document.documentElement,{attributes:!0,attributeFilter:["data-admin-theme"]}),()=>oe.disconnect()}},[W]);const ge=["avakio-tree",`avakio-tree--${W||x}`,z&&"avakio-tree--lines",J].filter(Boolean).join(" ");return e.jsx("div",{ref:N,id:ue,"data-testid":r,className:ge,style:{width:_,height:L,...j},role:"tree",tabIndex:0,onKeyDown:De,onFocus:()=>{b===null&&l.length>0&&Y(l[0].id)},children:l.map(h=>Me(h,0))})});Gt.displayName="AvakioTree";const Oe=s=>{if(s!==void 0)return typeof s=="number"?`${s}px`:s},Xt=t.forwardRef((s,r)=>{const{id:l,testId:i,theme:c="material",cells:m,width:w,height:A,minWidth:z,minHeight:V,maxWidth:p,maxHeight:D,borderless:W=!1,css:ee,hidden:K=!1,disabled:_=!1,visibleBatch:L,background:J,padding:j,onCellClick:q,onResize:E}=s,[f,te]=t.useState(m),[S,F]=t.useState(K),[$,T]=t.useState(_),[a,P]=t.useState(L),N=t.useRef(null),H=t.useRef(null);t.useEffect(()=>{te(m)},[m]),t.useEffect(()=>{if(!(!N.current||!E))return H.current=new ResizeObserver(v=>{for(const g of v){const{width:I,height:Z}=g.contentRect;E(I,Z)}}),H.current.observe(N.current),()=>{H.current?.disconnect()}},[E]);const ue=t.useCallback(v=>{$||v.disabled||q?.(v.id,v)},[$,q]),le=t.useCallback(v=>v.hidden?!1:!a||!v.batch?!0:v.batch===a,[a]);t.useImperativeHandle(r,()=>({addView:(v,g)=>{te(I=>{if(g!==void 0&&g>=0&&g<=I.length){const Z=[...I];return Z.splice(g,0,v),Z}return[...I,v]})},removeView:v=>{te(g=>typeof v=="number"?g.filter((I,Z)=>Z!==v):g.filter(I=>I.id!==v))},getChildViews:()=>f,getNode:()=>N.current,show:()=>F(!1),hide:()=>F(!0),isVisible:()=>!S,enable:()=>T(!1),disable:()=>T(!0),isEnabled:()=>!$,resize:()=>{if(N.current&&E){const{width:v,height:g}=N.current.getBoundingClientRect();E(v,g)}},showBatch:v=>P(v),index:v=>f.findIndex(g=>g.id===v),reconstruct:v=>te(v)}),[f,S,$,E]);const u={width:Oe(w),height:Oe(A),minWidth:Oe(z),minHeight:Oe(V),maxWidth:Oe(p),maxHeight:Oe(D),background:J,padding:Oe(j)};return S?null:e.jsx("div",{ref:N,id:l,"data-testid":i,className:`avakio-absolute-layout avakio-absolute-layout-theme-${c} ${W?"borderless":""} ${$?"disabled":""} ${ee||""}`,style:u,children:f.map((v,g)=>{if(!le(v))return null;const I=v.relative?{position:"relative",width:Oe(v.width)||"100%",height:Oe(v.height)||"100%",minWidth:Oe(v.minWidth),minHeight:Oe(v.minHeight),maxWidth:Oe(v.maxWidth),maxHeight:Oe(v.maxHeight),zIndex:v.zIndex}:{position:"absolute",top:Oe(v.top),left:Oe(v.left),bottom:Oe(v.bottom),right:Oe(v.right),width:Oe(v.width),height:Oe(v.height),minWidth:Oe(v.minWidth),minHeight:Oe(v.minHeight),maxWidth:Oe(v.maxWidth),maxHeight:Oe(v.maxHeight),zIndex:v.zIndex};return e.jsx("div",{className:`avakio-absolute-layout-cell ${v.relative?"relative":"absolute"} ${v.disabled?"disabled":""} ${v.css||""}`,style:I,onClick:()=>ue(v),"data-cell-id":v.id,"data-batch":v.batch,children:v.content},v.id||g)})})});Xt.displayName="AvakioAbsoluteLayout";const ft=t.forwardRef(({id:s,testId:r,gridColumns:l=2,gridRows:i=2,cellWidth:c,cellHeight:m,cells:w=[],theme:A="material",cellMargin:z=10,margin:V,padding:p=10,paddingX:D,paddingY:W,width:ee,height:K,minWidth:_,minHeight:L,borderless:J=!1,cellBorderless:j=!1,className:q="",css:E,hidden:f=!1,disabled:te=!1,autoplace:S=!1,factory:F,onChange:$,onCellClick:T,isDraggable:a=!1,onDragStart:P,onDragEnd:N},H)=>{const ue=t.useRef(null),[le,u]=t.useState(w),[v,g]=t.useState(f),[I,Z]=t.useState({width:0,height:0}),b=t.useRef(le),[Y,de]=t.useState(null),[G,U]=t.useState({x:0,y:0}),[ie,ae]=t.useState({x:0,y:0});t.useEffect(()=>{b.current=le},[le]),t.useEffect(()=>{u(w)},[w]),t.useEffect(()=>{if(!ue.current)return;const x=ue.current.clientWidth,se=ue.current.clientHeight;(x>0||se>0)&&Z({width:x,height:se});let pe=null,ge=null;const h=new ResizeObserver(oe=>{for(const n of oe){const C=n.target;ge={width:C.clientWidth,height:C.clientHeight},pe===null&&(pe=requestAnimationFrame(()=>{ge&&(Z(ge),ge=null),pe=null}))}});return h.observe(ue.current),()=>{h.disconnect(),pe!==null&&cancelAnimationFrame(pe)}},[]);const ne=t.useMemo(()=>{if(c)return c;const x=Array.isArray(p)?p:[p,p,p,p],pe=(D!==void 0?D:x[1])*2,ge=z*(l-1),h=I.width-pe-ge;return Math.max(h/l,50)},[c,I.width,l,z,p,D]),M=t.useMemo(()=>{if(m)return le.reduce((Q,re)=>(Q[re.id]=re.height||m,Q),{});const x=Array.isArray(p)?p:[p,p,p,p],pe=(W!==void 0?W:x[0])*2,ge=z*(i-1),h=I.height-pe-ge;let oe=0,n=0;const C={};for(let Q=0;Q<i;Q++){const be=le.filter(B=>B.y===Q&&!B.hidden).find(B=>B.height!==void 0);be&&be.height?(C[Q]=be.height,oe+=be.height):(C[Q]="flex",n++)}const d=h-oe,X=n>0?Math.max(d/n,50):50,y={};return le.forEach(Q=>{if(Q.height)y[Q.id]=Q.height;else{const re=Q.dy||1;let be=0;for(let B=0;B<re;B++){const ve=C[Q.y+B];be+=ve==="flex"?X:ve,B>0&&(be+=z)}y[Q.id]=be}}),y},[le,m,I.height,i,z,p,W]),k=t.useMemo(()=>{const x=Array.isArray(p)?p:[p,p,p,p],pe=(W!==void 0?W:x[0])*2,ge=I.height-pe-z*(i-1);let h=0,oe=0;const n=[];for(let y=0;y<i;y++){const re=le.filter(be=>be.y===y&&!be.hidden).find(be=>be.height!==void 0);re&&re.height?(n[y]=re.height,h+=re.height):m?n[y]=m:(n[y]="flex",oe++)}const C=ge-h,d=oe>0?Math.max(C/oe,50):m||50,X=[0];for(let y=0;y<i;y++){const Q=n[y]==="flex"?d:n[y];X[y+1]=X[y]+Q+z}return X},[le,m,I.height,i,z,p,W]),o=t.useCallback(x=>{const se=x.dx||1,pe=Array.isArray(p)?p:[p,p,p,p],ge=D!==void 0?D:pe[1],h=W!==void 0?W:pe[0],oe=ge+x.x*(ne+z),n=h+k[x.y],C=se*ne+(se-1)*z,d=M[x.id]||50;return{position:"absolute",left:`${oe}px`,top:`${n}px`,width:`${C}px`,height:`${d}px`,...x.css}},[ne,M,k,z,p,D,W]),O=t.useCallback(x=>{if(F)return F(x);if(x.content)return x.content;if(typeof x.template=="function")return x.template(x);if(typeof x.template=="string"){let se=x.template;return x.data&&Object.entries(x.data).forEach(([pe,ge])=>{se=se.replace(new RegExp(`#${pe}#`,"g"),String(ge))}),e.jsx("div",{dangerouslySetInnerHTML:{__html:se}})}return null},[F]),R=t.useCallback((x,se)=>{const pe=Array.isArray(p)?p:[p,p,p,p],ge=D!==void 0?D:pe[1],h=W!==void 0?W:pe[0],oe=x-ge,n=ne+z;let C=Math.round(oe/n);C=Math.max(0,Math.min(C,l-1));const d=se-h;let X=0;for(let y=0;y<k.length-1;y++){const Q=k[y]+(k[y+1]-k[y]-z)/2;d>Q&&(X=y+1)}return X=Math.max(0,Math.min(X,i-1)),{x:C,y:X}},[ne,z,l,i,p,D,W,k]);t.useCallback((x,se,pe)=>b.current.some(ge=>{if(ge.id===pe)return!1;const h=ge.dx||1,oe=ge.dy||1;return x>=ge.x&&x<ge.x+h&&se>=ge.y&&se<ge.y+oe}),[]);const ce=t.useCallback((x,se)=>{if(!a||te||se.disabled||se.draggable===!1)return;x.preventDefault(),x.stopPropagation();const pe="touches"in x?x.touches[0].clientX:x.clientX,ge="touches"in x?x.touches[0].clientY:x.clientY,h=ue.current?.getBoundingClientRect();if(!h)return;const oe=o(se),n=parseFloat(String(oe.left)),C=parseFloat(String(oe.top));U({x:pe-h.left-n,y:ge-h.top-C}),ae({x:pe-h.left-(pe-h.left-n),y:ge-h.top-(ge-h.top-C)}),de(se.id),P?.(se)},[a,te,o,P]),fe=t.useCallback(x=>{if(!Y||!ue.current)return;const se="touches"in x?x.touches[0].clientX:x.clientX,pe="touches"in x?x.touches[0].clientY:x.clientY,ge=ue.current.getBoundingClientRect();ae({x:se-ge.left-G.x,y:pe-ge.top-G.y})},[Y,G]),me=t.useCallback(()=>{if(!Y)return;const x=b.current.find(n=>n.id===Y);if(!x){de(null);return}const se=R(ie.x,ie.y),pe=x.dx||1,ge=x.dy||1;let h=!0;for(let n=0;n<pe&&h;n++)for(let C=0;C<ge&&h;C++){const d=se.x+n,X=se.y+C;(d>=l||X>=i)&&(h=!1)}const oe=se.x!==x.x||se.y!==x.y;if(h&&oe){const n=l===1,C=b.current.every(d=>(d.dx||1)===1&&(d.dy||1)===1);if(n&&C){const d=x.y,X=se.y;u(y=>{const Q=y.map(re=>{if(re.id===Y)return{...re,y:X};if(d<X){if(re.y>d&&re.y<=X)return{...re,y:re.y-1}}else if(re.y>=X&&re.y<d)return{...re,y:re.y+1};return re});return $?.(Q),Q})}else{const d=b.current.find(X=>{if(X.id===Y)return!1;const y=X.dx||1,Q=X.dy||1;return se.x>=X.x&&se.x<X.x+y&&se.y>=X.y&&se.y<X.y+Q});u(X=>{const y=X.map(Q=>Q.id===Y?{...Q,x:se.x,y:se.y}:d&&Q.id===d.id?{...Q,x:x.x,y:x.y}:Q);return $?.(y),y})}N?.(x,se)}de(null)},[Y,ie,R,l,i,$,N]);t.useEffect(()=>{if(!a||!Y)return;const x=pe=>fe(pe),se=()=>me();return document.addEventListener("mousemove",x),document.addEventListener("mouseup",se),document.addEventListener("touchmove",x,{passive:!1}),document.addEventListener("touchend",se),()=>{document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",se),document.removeEventListener("touchmove",x),document.removeEventListener("touchend",se)}},[a,Y,fe,me]);const Se=t.useCallback(()=>{const x=new Set;b.current.forEach(se=>{const pe=se.dx||1,ge=se.dy||1;for(let h=0;h<pe;h++)for(let oe=0;oe<ge;oe++)x.add(`${se.x+h},${se.y+oe}`)});for(let se=0;se<i;se++)for(let pe=0;pe<l;pe++)if(!x.has(`${pe},${se}`))return{x:pe,y:se};return{x:0,y:i}},[l,i]);t.useImperativeHandle(H,()=>({addView:(x,se)=>{const pe=S&&(x.x===void 0||x.y===void 0)?{...x,...Se()}:x;u(ge=>{const h=se!==void 0?[...ge.slice(0,se),pe,...ge.slice(se)]:[...ge,pe];return $?.(h),h})},removeView:x=>{u(se=>{const pe=se.filter(ge=>ge.id!==x);return $?.(pe),pe})},moveView:(x,se)=>{u(pe=>{const ge=pe.map(h=>h.id===x?{...h,x:se.x??h.x,y:se.y??h.y,dx:se.dx??h.dx,dy:se.dy??h.dy}:h);return $?.(ge),ge})},clearAll:()=>{u([]),$?.([])},getCells:()=>b.current,getCell:x=>b.current.find(se=>se.id===x),serialize:()=>b.current.map(({id:x,x:se,y:pe,dx:ge,dy:h,data:oe})=>({id:x,x:se,y:pe,dx:ge||1,dy:h||1,data:oe})),restore:x=>{u(x),$?.(x)},reconstruct:()=>{u([...b.current])},show:()=>g(!1),hide:()=>g(!0),getNode:()=>ue.current}));const Ne=["avakio-grid",`avakio-grid-theme-${A}`,J?"avakio-grid-borderless":"",j?"avakio-grid-cell-borderless":"",v?"avakio-grid-hidden":"",te?"avakio-grid-disabled":"",a?"avakio-grid-draggable":"",Y?"avakio-grid-dragging":"",q].filter(Boolean).join(" "),Me={position:"relative",width:(()=>{if(ee!==void 0){if(typeof ee=="number")return`${ee}px`;if(ee==="100%"&&V!==void 0){const x=typeof V=="number"?V*2:0;return x>0?`calc(100% - ${x}px)`:"100%"}return ee}})(),height:typeof K=="number"?`${K}px`:K,minWidth:typeof _=="number"?`${_}px`:_,minHeight:typeof L=="number"?`${L}px`:L,margin:V!==void 0?typeof V=="number"?`${V}px`:V:void 0,...E&&typeof E=="object"&&!Array.isArray(E)?E:{}};return e.jsx("div",{ref:ue,id:s,"data-testid":r,className:Ne,style:Me,children:le.map(x=>{if(x.hidden)return null;const se=Y===x.id,pe=["avakio-grid-cell",x.cssClass||"",x.disabled?"avakio-grid-cell-disabled":"",a&&!x.disabled&&x.draggable!==!1?"avakio-grid-cell-draggable":"",se?"avakio-grid-cell-dragging":""].filter(Boolean).join(" "),ge=se?{...o(x),left:`${ie.x}px`,top:`${ie.y}px`,zIndex:1e3}:o(x);return e.jsx("div",{id:x.id,className:pe,style:ge,onClick:()=>!se&&T?.(x),onMouseDown:h=>ce(h,x),onTouchStart:h=>ce(h,x),"data-cell-id":x.id,children:e.jsx("div",{className:"avakio-grid-cell-content",children:O(x)})},x.id)})})});ft.displayName="AvakioGrid";function ts({rows:s,cols:r,children:l,theme:i="material",className:c="",css:m,width:w,height:A,minWidth:z,minHeight:V,maxWidth:p,maxHeight:D,borderless:W=!1,type:ee="space",padding:K,paddingX:_,paddingY:L,margin:J,gravity:j,hidden:q=!1,disabled:E=!1,responsive:f=!1,id:te,testId:S,gap:F,align:$="stretch",justify:T="start",onResize:a,autoResize:P=!1}){const N=t.useRef(null),[H,ue]=t.useState(!1),le=!!s||!r&&!s,u=s||r||[],v=t.useCallback(()=>{if(!f||!N.current)return;N.current.offsetWidth<768&&!le?ue(!0):ue(!1),a&&a()},[f,le,a]);t.useEffect(()=>{if(!f&&!P)return;v();const b=()=>{v()};return window.addEventListener("resize",b),()=>{window.removeEventListener("resize",b)}},[f,P,v]),t.useEffect(()=>{if(!P||!N.current)return;const b=new ResizeObserver(()=>{v()});return b.observe(N.current),()=>{b.disconnect()}},[P,v]);const g=["avakio-layout",`avakio-layout-theme-${i}`,`avakio-layout-type-${ee}`,le||H?"avakio-layout-rows":"avakio-layout-cols",W?"avakio-layout-borderless":"",E?"avakio-layout-disabled":"",q?"avakio-layout-hidden":"",f?"avakio-layout-responsive":"",H?"avakio-layout-responsive-active":"",c].filter(Boolean).join(" "),I={width:typeof w=="number"?`${w}px`:w,height:typeof A=="number"?`${A}px`:A,minWidth:typeof z=="number"?`${z}px`:z,minHeight:typeof V=="number"?`${V}px`:V,maxWidth:typeof p=="number"?`${p}px`:p,maxHeight:typeof D=="number"?`${D}px`:D,margin:typeof J=="number"?`${J}px`:J,gap:typeof F=="number"?`${F}px`:F,alignItems:$,justifyContent:T,flex:j,...m&&typeof m=="object"&&!Array.isArray(m)?m:{}};K!==void 0?I.padding=Array.isArray(K)?`${K[0]}px ${K[1]}px ${K[2]}px ${K[3]}px`:typeof K=="number"?`${K}px`:K:(_!==void 0&&(I.paddingLeft=typeof _=="number"?`${_}px`:_,I.paddingRight=typeof _=="number"?`${_}px`:_),L!==void 0&&(I.paddingTop=typeof L=="number"?`${L}px`:L,I.paddingBottom=typeof L=="number"?`${L}px`:L));const Z=b=>{if(!t.isValidElement(b))return!1;const Y=b.props;if(Y.gravity)return!0;if(Y.css&&typeof Y.css=="object"){const de=Y.css;if(de.flex===1||de.flex==="1")return!0}return!1};return e.jsx("div",{ref:N,id:te,"data-testid":S,className:g,style:I,children:u.length>0?u.map((b,Y)=>{const de=["avakio-layout-item"];return Z(b)&&de.push("avakio-layout-item-flex"),e.jsx("div",{className:de.join(" "),children:b},Y)}):l})}function as({direction:s,theme:r="material",onResizeStart:l,onResize:i,onResizeEnd:c,className:m="",css:w,id:A,testId:z}){const V=t.useRef(null),p=t.useRef(0),[D,W]=t.useState(!1);t.useEffect(()=>{if(!D)return;const _=J=>{J.preventDefault();const j=s==="horizontal"?J.clientY:J.clientX,q=j-p.current;i&&i(q),p.current=j},L=()=>{W(!1),document.body.style.cursor="",document.body.style.userSelect="",c&&c()};return document.addEventListener("mousemove",_),document.addEventListener("mouseup",L),()=>{document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",L)}},[D,s,i,c]);const ee=_=>{_.preventDefault(),p.current=s==="horizontal"?_.clientY:_.clientX,W(!0),document.body.style.cursor=s==="horizontal"?"row-resize":"col-resize",document.body.style.userSelect="none",l&&l()},K=["avakio-resizer",`avakio-resizer-${s}`,`avakio-resizer-theme-${r}`,D?"avakio-resizer-dragging":"",m].filter(Boolean).join(" ");return e.jsx("div",{ref:V,id:A,"data-testid":z,className:K,"data-admin-theme":r,onMouseDown:ee,style:w,role:"separator","aria-orientation":s==="horizontal"?"horizontal":"vertical","aria-label":"Resizer",children:e.jsx("div",{className:"avakio-resizer-handle"})})}function ss({data:s,value:r=[],onChange:l,labelLeft:i="Available",labelRight:c="Selected",labelBottomLeft:m,labelBottomRight:w,showButtons:A=!0,searchable:z=!0,draggable:V=!0,disabled:p=!1,listHeight:D=300,id:W,testId:ee,className:K}){const[_,L]=t.useState(""),[J,j]=t.useState(""),[q,E]=t.useState([]),[f,te]=t.useState([]),[S,F]=t.useState(null),[$,T]=t.useState(null),a=t.useRef(null),P=t.useRef(null),N=t.useMemo(()=>new Set(r),[r]),H=t.useMemo(()=>s.filter(k=>!N.has(k.id)),[s,N]),ue=t.useMemo(()=>s.filter(k=>N.has(k.id)),[s,N]),le=t.useMemo(()=>{if(!_.trim())return H;const k=_.toLowerCase();return H.filter(o=>o.value.toLowerCase().includes(k))},[H,_]),u=t.useMemo(()=>{if(!J.trim())return ue;const k=J.toLowerCase();return ue.filter(o=>o.value.toLowerCase().includes(k))},[ue,J]),v=t.useCallback(k=>{const o=k.filter(O=>{const R=s.find(ce=>ce.id===O);return R&&!R.disabled&&!N.has(O)});o.length>0&&(l([...r,...o]),E([]))},[s,N,r,l]),g=t.useCallback(k=>{const o=new Set(k.filter(O=>{const R=s.find(ce=>ce.id===O);return R&&!R.disabled}));o.size>0&&(l(r.filter(O=>!o.has(O))),te([]))},[s,r,l]),I=t.useCallback(()=>{const k=H.filter(o=>!o.disabled).map(o=>o.id);l([...r,...k]),E([])},[H,r,l]),Z=t.useCallback(()=>{const k=ue.filter(o=>o.disabled).map(o=>o.id);l(k),te([])},[ue,l]),b=t.useCallback((k,o,O)=>{const R=s.find(me=>me.id===k);if(!R||R.disabled||p)return;const ce=o==="left"?E:te,fe=o==="left"?q:f;if(O.ctrlKey||O.metaKey)ce(me=>me.includes(k)?me.filter(Se=>Se!==k):[...me,k]);else if(O.shiftKey&&fe.length>0){const me=o==="left"?le:u,Se=fe[fe.length-1],Ne=me.findIndex(Me=>Me.id===Se),De=me.findIndex(Me=>Me.id===k);if(Ne!==-1&&De!==-1){const Me=Math.min(Ne,De),x=Math.max(Ne,De),se=me.slice(Me,x+1).filter(pe=>!pe.disabled).map(pe=>pe.id);ce(se)}}else ce([k])},[s,p,q,f,le,u]),Y=t.useCallback((k,o)=>{p||(o==="left"?v([k]):g([k]))},[p,v,g]),de=t.useCallback((k,o)=>{!V||p||(k.dataTransfer.setData("text/plain",o),k.dataTransfer.effectAllowed="move",F(o))},[V,p]),G=t.useCallback(()=>{F(null),T(null)},[]),U=t.useCallback((k,o)=>{!V||p||(k.preventDefault(),k.dataTransfer.dropEffect="move",T(o))},[V,p]),ie=t.useCallback(()=>{T(null)},[]),ae=t.useCallback((k,o)=>{if(!V||p)return;k.preventDefault();const O=k.dataTransfer.getData("text/plain");if(O){const R=N.has(O);o==="right"&&!R?v([O]):o==="left"&&R&&g([O])}F(null),T(null)},[V,p,N,v,g]),ne=(k,o)=>{const R=(o==="left"?q:f).includes(k.id),ce=S===k.id;return e.jsxs("div",{className:He("avakio-doublelist-item",R&&"avakio-doublelist-item-selected",k.disabled&&"avakio-doublelist-item-disabled",ce&&"avakio-doublelist-item-dragging"),onClick:fe=>b(k.id,o,fe),onDoubleClick:()=>Y(k.id,o),draggable:V&&!k.disabled&&!p,onDragStart:fe=>de(fe,k.id),onDragEnd:G,"data-item-id":k.id,children:[V&&!k.disabled&&!p&&e.jsx(Fa,{size:14,className:"avakio-doublelist-drag-handle"}),e.jsx("span",{className:"avakio-doublelist-item-text",children:k.value})]},k.id)},M={height:typeof D=="number"?`${D}px`:D};return e.jsxs("div",{id:W,"data-testid":ee,className:He("avakio-doublelist",p&&"avakio-doublelist-disabled",K),children:[e.jsxs("div",{className:"avakio-doublelist-panel",children:[i&&e.jsxs("div",{className:"avakio-doublelist-label avakio-doublelist-label-top",children:[i,e.jsxs("span",{className:"avakio-doublelist-count",children:["(",le.length,")"]})]}),z&&e.jsxs("div",{className:"avakio-doublelist-search",children:[e.jsx(Je,{size:14,className:"avakio-doublelist-search-icon"}),e.jsx("input",{type:"text",placeholder:"Search...",value:_,onChange:k=>L(k.target.value),disabled:p,className:"avakio-doublelist-search-input"})]}),e.jsx("div",{ref:a,className:He("avakio-doublelist-list",$==="left"&&"avakio-doublelist-list-dragover"),style:M,onDragOver:k=>U(k,"left"),onDragLeave:ie,onDrop:k=>ae(k,"left"),children:le.length===0?e.jsx("div",{className:"avakio-doublelist-empty",children:_?"No matches found":"No items available"}):le.map(k=>ne(k,"left"))}),m&&e.jsx("div",{className:"avakio-doublelist-label avakio-doublelist-label-bottom",children:m})]}),A&&e.jsxs("div",{className:"avakio-doublelist-buttons",children:[e.jsx("button",{type:"button",className:"avakio-doublelist-btn",onClick:()=>v(q),disabled:p||q.length===0,title:"Move selected to right",children:e.jsx(je,{size:18})}),e.jsx("button",{type:"button",className:"avakio-doublelist-btn",onClick:I,disabled:p||H.filter(k=>!k.disabled).length===0,title:"Move all to right",children:e.jsx(Ma,{size:18})}),e.jsx("button",{type:"button",className:"avakio-doublelist-btn",onClick:()=>g(f),disabled:p||f.length===0,title:"Move selected to left",children:e.jsx(qe,{size:18})}),e.jsx("button",{type:"button",className:"avakio-doublelist-btn",onClick:Z,disabled:p||ue.filter(k=>!k.disabled).length===0,title:"Move all to left",children:e.jsx(Aa,{size:18})})]}),e.jsxs("div",{className:"avakio-doublelist-panel",children:[c&&e.jsxs("div",{className:"avakio-doublelist-label avakio-doublelist-label-top",children:[c,e.jsxs("span",{className:"avakio-doublelist-count",children:["(",u.length,")"]})]}),z&&e.jsxs("div",{className:"avakio-doublelist-search",children:[e.jsx(Je,{size:14,className:"avakio-doublelist-search-icon"}),e.jsx("input",{type:"text",placeholder:"Search...",value:J,onChange:k=>j(k.target.value),disabled:p,className:"avakio-doublelist-search-input"})]}),e.jsx("div",{ref:P,className:He("avakio-doublelist-list",$==="right"&&"avakio-doublelist-list-dragover"),style:M,onDragOver:k=>U(k,"right"),onDragLeave:ie,onDrop:k=>ae(k,"right"),children:u.length===0?e.jsx("div",{className:"avakio-doublelist-empty",children:J?"No matches found":"No items selected"}):u.map(k=>ne(k,"right"))}),w&&e.jsx("div",{className:"avakio-doublelist-label avakio-doublelist-label-bottom",children:w})]})]})}const Jt=t.forwardRef(({id:s,testId:r,label:l,children:i,borderless:c=!1,theme:m,disabled:w=!1,width:A,height:z,paddingX:V=18,paddingY:p=16,css:D,className:W="",collapsible:ee=!1,defaultCollapsed:K=!1,collapsed:_,onCollapse:L,icon:J},j)=>{const q=t.useRef(null),E=t.useRef(null),[f,te]=t.useState(w),S=_!==void 0,[F,$]=t.useState(K),T=S?_:F;t.useEffect(()=>{te(w)},[w]);const a=()=>{if(!ee)return;const ue=!T;S||$(ue),L?.(ue)};t.useImperativeHandle(j,()=>({getNode:()=>q.current,getBody:()=>E.current,isEnabled:()=>!f,enable:()=>te(!1),disable:()=>te(!0),collapse:()=>{ee&&(S||$(!0),L?.(!0))},expand:()=>{ee&&(S||$(!1),L?.(!1))},isCollapsed:()=>T,toggle:()=>a()}),[f,T,S,ee,L]);const P=["avakio-fieldset",m&&`avakio-fieldset-theme-${m}`,c&&"avakio-fieldset-borderless",f&&"avakio-fieldset-disabled",ee&&"avakio-fieldset-collapsible",T&&"avakio-fieldset-collapsed",W].filter(Boolean).join(" "),N={...D&&typeof D=="object"&&!Array.isArray(D)?D:{},width:typeof A=="number"?`${A}px`:A,height:typeof z=="number"?`${z}px`:z},H={paddingLeft:`${V}px`,paddingRight:`${V}px`,paddingTop:`${p}px`,paddingBottom:`${p}px`};return e.jsxs("fieldset",{ref:q,id:s,"data-testid":r,"data-admin-theme":m,className:P,style:N,disabled:f,children:[l&&e.jsxs("legend",{className:`avakio-fieldset-legend ${ee?"avakio-fieldset-legend-clickable":""}`,onClick:ee?a:void 0,children:[ee&&e.jsx("span",{className:"avakio-fieldset-collapse-icon",children:e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:`avakio-fieldset-chevron ${T?"avakio-fieldset-chevron-collapsed":""}`,children:e.jsx("path",{d:"M3 4.5L6 7.5L9 4.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),J&&e.jsx("span",{className:"avakio-fieldset-icon",children:J}),e.jsx("span",{className:"avakio-fieldset-label-text",children:l})]}),e.jsx("div",{ref:E,className:"avakio-fieldset-body",style:H,children:i})]})});Jt.displayName="AvakioFieldset";const Zt=t.forwardRef(({id:s,testId:r,label:l="",html:i,align:c="left",width:m,height:w,theme:A="material",className:z="",css:V={},tooltip:p,disabled:D=!1,hidden:W=!1,onClick:ee,autowidth:K=!1,fontSize:_,fontWeight:L,color:J,backgroundColor:j,padding:q,margin:E,border:f,borderRadius:te},S)=>{const F=t.useRef(null),[$,T]=t.useState(l),[a,P]=t.useState(i),[N,H]=t.useState(!W),[ue,le]=t.useState(D);t.useImperativeHandle(S,()=>({getValue:()=>$,setValue:I=>{T(I),P(void 0)},setHTML:I=>{P(I)},getNode:()=>F.current,hide:()=>H(!1),show:()=>H(!0),isVisible:()=>N,disable:()=>le(!0),enable:()=>le(!1),isEnabled:()=>!ue}));const u=["avakio-label",`avakio-label-theme-${A}`,`avakio-label-align-${c}`,ue&&"avakio-label-disabled",K&&"avakio-label-autowidth",z].filter(Boolean).join(" "),v={...V&&typeof V=="object"&&!Array.isArray(V)?V:{},width:K?"auto":m,height:w,fontSize:_,fontWeight:L,color:J,backgroundColor:j,padding:Array.isArray(q)?`${q[0]}px ${q[1]}px ${q[2]}px ${q[3]}px`:typeof q=="number"?`${q}px`:q,margin:Array.isArray(E)?`${E[0]}px ${E[1]}px ${E[2]}px ${E[3]}px`:typeof E=="number"?`${E}px`:E,border:f,borderRadius:te,display:N?void 0:"none"},g=I=>{!ue&&ee&&ee(I)};return e.jsx("div",{ref:F,id:s,"data-testid":r,className:u,style:v,title:p,onClick:g,children:a?e.jsx("div",{dangerouslySetInnerHTML:{__html:a}}):e.jsx("span",{children:$})})});Zt.displayName="AvakioLabel";let rs=0;const Xe=()=>`multitext-field-${++rs}`,Qt=t.forwardRef(({id:s,testId:r,name:l,value:i,defaultValue:c,label:m,labelWidth:w=100,labelAlign:A="left",labelPosition:z="left",placeholder:V,required:p=!1,error:D,invalidMessage:W,bottomLabel:ee,theme:K="material",disabled:_=!1,readonly:L=!1,className:J="",css:j,width:q,height:E,minWidth:f,maxWidth:te,inputAlign:S="left",inputWidth:F,icon:$,iconWidth:T=28,maxFields:a,separator:P=", ",subConfig:N,showNumbers:H=!1,addButtonLabel:ue,addButtonTooltip:le="Add field",validate:u,validateEvent:v="blur",maxLength:g,pattern:I,autoComplete:Z,onChange:b,onSectionAdd:Y,onSectionRemove:de,onFocus:G,onBlur:U,onEnter:ie},ae)=>{const ne=t.useCallback(B=>{if(!B)return[{id:Xe(),value:"",isPrimary:!0}];const ve=Array.isArray(B)?B:B.split(P).map(we=>we.trim()).filter(we=>we);return ve.length===0?[{id:Xe(),value:"",isPrimary:!0}]:ve.map((we,xe)=>({id:Xe(),value:we,isPrimary:xe===0}))},[P]),[M,k]=t.useState(()=>ne(i??c)),[o,O]=t.useState(_),[R,ce]=t.useState(!0),[fe,me]=t.useState(!1),[Se,Ne]=t.useState(D||W||""),[De,Me]=t.useState(0),x=t.useRef(null),se=t.useRef(new Map);t.useEffect(()=>{i!==void 0&&k(ne(i))},[i,ne]),t.useEffect(()=>{O(_)},[_]),t.useEffect(()=>{D?(me(!0),Ne(D)):W&&Ne(W)},[D,W]);const pe=t.useCallback(()=>M.map(B=>B.value).filter(B=>B).join(P),[M,P]),ge=t.useCallback(()=>M.map(B=>B.value),[M]),h=t.useCallback(()=>{if(p&&M.every(B=>!B.value.trim()))return me(!0),Ne(W||"This field is required"),!1;if(u){const B=M.map(we=>we.value),ve=u(B);if(typeof ve=="string")return me(!0),Ne(ve),!1;if(ve===!1)return me(!0),Ne(W||"Invalid value"),!1}return me(!1),Ne(""),!0},[M,p,u,W]),oe=t.useCallback((B,ve)=>{k(we=>{const xe=we.map(Ae=>Ae.id===B?{...Ae,value:ve}:Ae);return setTimeout(()=>{const Ae=xe.map(_e=>_e.value),Ie=Ae.filter(_e=>_e).join(P);b?.(Ae,Ie),v==="change"&&h()},0),xe})},[P,b,v,h]),n=t.useCallback((B="")=>{if(a&&M.length>=a)return"";const ve=Xe(),we={id:ve,value:B,isPrimary:!1};return k(xe=>[...xe,we]),setTimeout(()=>{se.current.get(ve)?.focus()},50),Y?.(ve,M.length),setTimeout(()=>{const xe=[...M.map(Ie=>Ie.value),B],Ae=xe.filter(Ie=>Ie).join(P);b?.(xe,Ae)},0),ve},[M,a,P,b,Y]),C=t.useCallback(B=>{k(ve=>{const we=B||ve.filter(Ie=>!Ie.isPrimary).pop()?.id;if(!we)return ve;const xe=ve.find(Ie=>Ie.id===we);if(!xe||xe.isPrimary)return ve;const Ae=ve.filter(Ie=>Ie.id!==we);return de?.(we,xe.value),setTimeout(()=>{const Ie=Ae.map(ze=>ze.value),_e=Ie.filter(ze=>ze).join(P);b?.(Ie,_e)},0),Ae})},[P,b,de]),d=t.useCallback((B,ve)=>{if(ve.key==="Enter"){const we=M.find(xe=>xe.id===B);we&&ie?.(B,we.value)}},[M,ie]),X=t.useCallback((B,ve)=>{G?.(B,ve)},[G]),y=t.useCallback((B,ve)=>{U?.(B,ve),v==="blur"&&h()},[U,v,h]);t.useImperativeHandle(ae,()=>({getValue:()=>pe(),getValues:()=>ge(),setValue:B=>{k(ne(B))},getValueHere:()=>M[0]?.value||"",setValueHere:B=>{k(ve=>{const we=[...ve];return we[0]&&(we[0]={...we[0],value:B}),we})},addSection:B=>n(B||""),removeSection:B=>C(B),getFieldIds:()=>M.map(B=>B.id),getField:B=>M.find(ve=>ve.id===B),getFieldCount:()=>M.length,clearAdditional:()=>{k(B=>{const ve=B.find(we=>we.isPrimary);return ve?[ve]:[{id:Xe(),value:"",isPrimary:!0}]})},clear:()=>{k([{id:Xe(),value:"",isPrimary:!0}])},focus:()=>{const B=M.find(ve=>ve.isPrimary);B&&se.current.get(B.id)?.focus()},focusField:B=>{se.current.get(B)?.focus()},blur:()=>{se.current.forEach(B=>B.blur())},refresh:()=>Me(B=>B+1),enable:()=>O(!1),disable:()=>O(!0),isEnabled:()=>!o,hide:()=>ce(!1),show:()=>ce(!0),isVisible:()=>R,validate:()=>h(),getNode:()=>x.current}),[M,pe,ge,ne,n,C,o,R,h]);const Q=["avakio-multitext",`avakio-multitext--${K}`,`avakio-multitext--label-${z}`,o&&"avakio-multitext--disabled",L&&"avakio-multitext--readonly",fe&&"avakio-multitext--invalid",!R&&"avakio-multitext--hidden",J].filter(Boolean).join(" "),re={...j&&typeof j=="object"&&!Array.isArray(j)?j:{},width:q?typeof q=="number"?`${q}px`:q:void 0,height:E?typeof E=="number"?`${E}px`:E:void 0,minWidth:f?typeof f=="number"?`${f}px`:f:void 0,maxWidth:te?typeof te=="number"?`${te}px`:te:void 0},be=!a||M.length<a;return R?e.jsxs("div",{ref:x,id:s,"data-testid":r,className:Q,style:re,"data-admin-theme":K,children:[m&&e.jsxs("label",{className:"avakio-multitext__label",style:{width:z==="left"?`${w}px`:void 0,textAlign:A},children:[m,p&&e.jsx("span",{className:"avakio-multitext__required",children:"*"})]}),e.jsxs("div",{className:"avakio-multitext__fields",children:[M.map((B,ve)=>e.jsxs("div",{className:"avakio-multitext__field-row",children:[H&&e.jsxs("span",{className:"avakio-multitext__field-number",children:[ve+1,"."]}),e.jsxs("div",{className:"avakio-multitext__input-wrapper",children:[e.jsx("input",{ref:we=>{we?se.current.set(B.id,we):se.current.delete(B.id)},type:"text",name:l?`${l}[${ve}]`:void 0,value:B.value,placeholder:B.isPrimary?V:N?.placeholder||V,disabled:o||B.disabled||(B.isPrimary?!1:N?.disabled),readOnly:L,maxLength:B.isPrimary?g:N?.maxLength||g,pattern:B.isPrimary?I:N?.pattern||I,autoComplete:Z,className:"avakio-multitext__input",style:{textAlign:S,width:F?`${F}px`:void 0},onChange:we=>oe(B.id,we.target.value),onKeyPress:we=>d(B.id,we),onFocus:we=>X(B.id,we),onBlur:we=>y(B.id,we),"aria-invalid":fe,"aria-describedby":fe?`${s}-error`:void 0}),B.isPrimary&&!L&&be&&e.jsxs("button",{type:"button",className:"avakio-multitext__add-btn",onClick:()=>n(),disabled:o,title:le,style:{width:T?`${T}px`:void 0},"aria-label":ue||"Add field",children:[$||e.jsx(St,{size:16}),ue&&e.jsx("span",{className:"avakio-multitext__add-btn-label",children:ue})]}),!B.isPrimary&&!L&&e.jsx("button",{type:"button",className:"avakio-multitext__remove-btn",onClick:()=>C(B.id),disabled:o,title:"Remove field","aria-label":"Remove field",children:e.jsx(We,{size:16})})]})]},B.id)),ee&&e.jsx("div",{className:"avakio-multitext__bottom-label",children:ee}),fe&&Se&&e.jsx("div",{id:`${s}-error`,className:"avakio-multitext__error",role:"alert",children:Se})]})]},De):null});Qt.displayName="AvakioMultitext";function ns(s){return s.map((r,l)=>typeof r=="string"?{id:r,value:r}:r)}const Rt=t.forwardRef(({id:s,testId:r,name:l,value:i,defaultValue:c=null,options:m,label:w,labelWidth:A=80,labelAlign:z="left",labelPosition:V="left",vertical:p=!1,size:D="md",theme:W,disabled:ee=!1,required:K=!1,invalid:_=!1,invalidMessage:L,bottomLabel:J,customRadio:j=!0,optionHeight:q,className:E="",css:f,width:te,height:S,onChange:F,onClick:$,onFocus:T,onBlur:a},P)=>{const N=t.useRef(null),H=t.useRef(new Map),ue=t.useId(),le=l||`avakio-radio-${ue}`,u=i!==void 0,[v,g]=t.useState(c),[I,Z]=t.useState(ee),[b,Y]=t.useState(new Map),[,de]=t.useState({}),G=u?i:v,U=ns(m);t.useEffect(()=>{Z(ee)},[ee]);const ie=o=>{const O=b.get(o.id);return{disabled:O?.disabled??o.disabled??!1,hidden:O?.hidden??o.hidden??!1}};t.useImperativeHandle(P,()=>({getValue:()=>(u?i:v)??null,setValue:o=>{u||g(o),o!==null&&F?.(o)},focus:()=>{const o=U.find(O=>!ie(O).disabled&&!ie(O).hidden);o&&H.current.get(o.id)?.focus()},blur:()=>{document.activeElement instanceof HTMLElement&&document.activeElement.blur()},enable:()=>Z(!1),disable:()=>Z(!0),enableOption:o=>{Y(O=>{const R=new Map(O),ce=R.get(o)||{};return R.set(o,{...ce,disabled:!1}),R})},disableOption:o=>{Y(O=>{const R=new Map(O),ce=R.get(o)||{};return R.set(o,{...ce,disabled:!0}),R})},showOption:o=>{Y(O=>{const R=new Map(O),ce=R.get(o)||{};return R.set(o,{...ce,hidden:!1}),R})},hideOption:o=>{Y(O=>{const R=new Map(O),ce=R.get(o)||{};return R.set(o,{...ce,hidden:!0}),R})},isEnabled:()=>!I,getNode:()=>N.current,getOption:o=>U.find(O=>O.id===o),refresh:()=>de({})}));const ae=o=>{u||g(o),F?.(o)},ne=(o,O)=>{const R=U.filter(me=>!ie(me).hidden),ce=R.findIndex(me=>me.id===U[O].id);let fe=-1;if(o.key==="ArrowDown"||o.key==="ArrowRight"){o.preventDefault();for(let me=1;me<=R.length;me++){const Se=(ce+me)%R.length;if(!ie(R[Se]).disabled){fe=Se;break}}}else if(o.key==="ArrowUp"||o.key==="ArrowLeft"){o.preventDefault();for(let me=1;me<=R.length;me++){const Se=(ce-me+R.length)%R.length;if(!ie(R[Se]).disabled){fe=Se;break}}}if(fe>=0){const me=R[fe];H.current.get(me.id)?.focus(),ae(me.id)}},M=["avakio-radio-container",`avakio-radio-container-${D}`,p?"avakio-radio-vertical":"avakio-radio-horizontal",V==="top"?"avakio-radio-label-top":"",I?"avakio-radio-container-disabled":"",_?"avakio-radio-container-invalid":"",E].filter(Boolean).join(" "),k={...f&&typeof f=="object"&&!Array.isArray(f)?f:{},...te?{width:typeof te=="number"?`${te}px`:te}:{},...S?{height:typeof S=="number"?`${S}px`:S}:{}};return e.jsxs("div",{ref:N,id:s,"data-testid":r,className:M,style:k,"data-admin-theme":W,role:"radiogroup","aria-labelledby":w?`${le}-label`:void 0,"aria-required":K,"aria-invalid":_,children:[w&&e.jsxs("label",{id:`${le}-label`,className:`avakio-radio-label avakio-radio-label-${z}`,style:{width:V==="left"?A:void 0},children:[w,K&&e.jsx("span",{className:"avakio-radio-required",children:"*"})]}),e.jsx("div",{className:"avakio-radio-options",children:U.map((o,O)=>{const R=ie(o);if(R.hidden)return null;const ce=G===o.id,fe=I||R.disabled,me=["avakio-radio-option",ce?"avakio-radio-option-checked":"",fe?"avakio-radio-option-disabled":"",j?"avakio-radio-custom":"avakio-radio-native",o.css||""].filter(Boolean).join(" "),Se=q?{height:q}:{};return e.jsxs("label",{className:me,style:Se,title:o.tooltip,onClick:Ne=>{fe||$?.(Ne,o)},children:[e.jsx("input",{ref:Ne=>{Ne?H.current.set(o.id,Ne):H.current.delete(o.id)},type:"radio",name:le,value:String(o.id),checked:ce,disabled:fe,onChange:()=>ae(o.id),onKeyDown:Ne=>ne(Ne,O),onFocus:T,onBlur:a,className:"avakio-radio-input","aria-checked":ce}),j&&e.jsx("span",{className:"avakio-radio-indicator",children:e.jsx("span",{className:"avakio-radio-dot"})}),o.icon&&e.jsx("span",{className:"avakio-radio-icon",children:o.icon}),e.jsx("span",{className:"avakio-radio-text",children:o.value})]},o.id)})}),(J||_&&L)&&e.jsx("div",{className:"avakio-radio-bottom",style:{paddingLeft:V==="left"?A+8:0},children:_&&L?e.jsx("span",{className:"avakio-radio-invalid-message",children:L}):J?e.jsx("span",{className:"avakio-radio-bottom-label",children:J}):null})]})});Rt.displayName="AvakioRadio";const vt=s=>s.map((r,l)=>typeof r=="string"?{id:r,value:r}:r),ea=t.forwardRef(({id:s,testId:r,name:l,value:i,defaultValue:c,options:m=[],label:w,labelWidth:A=120,labelAlign:z="left",labelPosition:V="left",required:p=!1,error:D,invalidMessage:W,bottomLabel:ee,size:K="md",align:_="left",theme:L,fill:J=!1,optionWidth:j,disabled:q=!1,borderless:E=!1,className:f="",css:te,width:S,height:F,minWidth:$,maxWidth:T,multiview:a=!1,tooltip:P,inputAlign:N,inputWidth:H,inputHeight:ue,onChange:le,onBeforeTabClick:u,onAfterTabClick:v,onOptionAdd:g,onOptionRemove:I},Z)=>{const b=t.useRef(null),Y=t.useRef([]),[de,G]=t.useState(()=>vt(m)),U=i!==void 0,[ie,ae]=t.useState(()=>c!==void 0?c:vt(m).find(n=>!n.disabled&&!n.hidden)?.id??null),[ne,M]=t.useState(q),[k,o]=t.useState(!0),[O,R]=t.useState(new Set),[ce,fe]=t.useState(new Set),[me,Se]=t.useState(0),Ne=U?i:ie;t.useEffect(()=>{G(vt(m))},[m]),t.useEffect(()=>{M(q)},[q]),t.useEffect(()=>{if(U)return;const h=de.filter(n=>!n.hidden&&!O.has(n.id));if(!h.some(n=>n.id===ie&&!n.disabled&&!ce.has(n.id))&&h.length>0){const n=h.find(C=>!C.disabled&&!ce.has(C.id))?.id??null;ae(n)}},[de,ie,U,O,ce]);const De=de.filter(h=>!h.hidden&&!O.has(h.id)),Me=t.useCallback(h=>{if(ne)return;const oe=de.find(n=>n.id===h);oe&&(oe.disabled||ce.has(h)||u&&u(h)===!1||(U||ae(h),le?.(h,oe),v?.(h)))},[ne,de,ce,U,le,u,v]),x=t.useCallback((h,oe)=>{if(ne)return;let n=-1;switch(h.key){case"ArrowLeft":case"ArrowUp":for(h.preventDefault(),n=oe-1;n>=0;){const C=De[n];if(!C.disabled&&!ce.has(C.id))break;n--}break;case"ArrowRight":case"ArrowDown":for(h.preventDefault(),n=oe+1;n<De.length;){const C=De[n];if(!C.disabled&&!ce.has(C.id))break;n++}break;case"Home":for(h.preventDefault(),n=0;n<De.length;){const C=De[n];if(!C.disabled&&!ce.has(C.id))break;n++}break;case"End":for(h.preventDefault(),n=De.length-1;n>=0;){const C=De[n];if(!C.disabled&&!ce.has(C.id))break;n--}break;case"Enter":case" ":h.preventDefault(),Me(De[oe].id);return}n>=0&&n<De.length&&Y.current[n]?.focus()},[ne,De,ce,Me]);t.useImperativeHandle(Z,()=>({getValue:()=>Ne,setValue:h=>{U||ae(h);const oe=de.find(n=>n.id===h);le?.(h,oe)},getOption:h=>de.find(oe=>oe.id===h),getOptions:()=>de,addOption:(h,oe)=>{G(n=>{const C=[...n];return oe!==void 0&&oe>=0&&oe<=n.length?C.splice(oe,0,h):C.push(h),C}),g?.(h)},removeOption:h=>{if(G(oe=>oe.filter(n=>n.id!==h)),I?.(h),Ne===h&&!U){const n=de.filter(C=>C.id!==h&&!C.hidden&&!O.has(C.id)).find(C=>!C.disabled&&!ce.has(C.id))?.id??null;ae(n)}},hideOption:h=>{R(oe=>{const n=new Set(Array.from(oe));return n.add(h),n})},showOption:h=>{R(oe=>{const n=new Set(oe);return n.delete(h),n})},disableOption:h=>{fe(oe=>{const n=new Set(Array.from(oe));return n.add(h),n})},enableOption:h=>{fe(oe=>{const n=new Set(oe);return n.delete(h),n})},optionIndex:h=>de.findIndex(oe=>oe.id===h),refresh:()=>Se(h=>h+1),focus:()=>{const h=De.findIndex(n=>n.id===Ne),oe=h>=0?h:0;Y.current[oe]?.focus()},blur:()=>{Y.current.forEach(h=>h?.blur())},enable:()=>M(!1),disable:()=>M(!0),isEnabled:()=>!ne,hide:()=>o(!1),show:()=>o(!0),isVisible:()=>k,validate:()=>!(p&&Ne===null),getNode:()=>b.current}),[Ne,U,de,De,O,ce,ne,k,p,le,g,I]);const se={...te&&typeof te=="object"&&!Array.isArray(te)?te:{},...S!==void 0&&{width:typeof S=="number"?`${S}px`:S},...F!==void 0&&{height:typeof F=="number"?`${F}px`:F},...$!==void 0&&{minWidth:typeof $=="number"?`${$}px`:$},...T!==void 0&&{maxWidth:typeof T=="number"?`${T}px`:T},...k===!1&&{display:"none"}},pe={...H!==void 0&&{width:typeof H=="number"?`${H}px`:H},...ue!==void 0&&{height:typeof ue=="number"?`${ue}px`:ue},...N!==void 0&&{justifyContent:N==="left"?"flex-start":N==="right"?"flex-end":"center"}},ge=!!D||!!W;return e.jsxs("div",{ref:b,id:s,"data-testid":r,"data-admin-theme":L,className:["avakio-segmented",`avakio-segmented-size-${K}`,`avakio-segmented-align-${_}`,J?"avakio-segmented-fill":"",E?"avakio-segmented-borderless":"",ne?"avakio-segmented-disabled":"",ge?"avakio-segmented-error":"",V==="top"?"avakio-segmented-label-top":"",f].filter(Boolean).join(" "),style:se,title:P,children:[w&&e.jsxs("label",{className:"avakio-segmented-label",style:{width:V==="left"?A:"auto",textAlign:z},children:[w,p&&e.jsx("span",{className:"avakio-segmented-required",children:"*"})]}),e.jsxs("div",{className:"avakio-segmented-wrapper",style:pe,children:[e.jsx("div",{className:"avakio-segmented-track",role:"tablist","aria-label":w||"Segmented control",children:De.map((h,oe)=>{const n=h.id===Ne,C=ne||h.disabled||ce.has(h.id);return e.jsxs("button",{ref:d=>{Y.current[oe]=d},type:"button",role:"tab","aria-selected":n,"aria-disabled":C,"aria-controls":h.ariaControls,tabIndex:n?0:-1,className:["avakio-segmented-segment",n?"avakio-segmented-segment-active":"",C?"avakio-segmented-segment-disabled":""].filter(Boolean).join(" "),style:j?{width:j}:void 0,title:h.tooltip,disabled:C,onClick:()=>Me(h.id),onKeyDown:d=>x(d,oe),children:[h.icon&&e.jsx("span",{className:"avakio-segmented-icon",children:h.icon}),e.jsx("span",{className:"avakio-segmented-text",children:h.value}),h.badge!==void 0&&e.jsx("span",{className:"avakio-segmented-badge",children:h.badge})]},h.id)})}),l&&e.jsx("input",{type:"hidden",name:l,value:Ne?.toString()??""})]}),(D||W)&&e.jsx("div",{className:"avakio-segmented-error-text",children:D||W}),ee&&!ge&&e.jsx("div",{className:"avakio-segmented-bottom-label",children:ee})]},me)});ea.displayName="AvakioSegmentedButton";const ta=t.forwardRef(({id:s,testId:r,name:l,value:i,defaultValue:c=!1,label:m,labelWidth:w=80,labelRight:A,onLabel:z,offLabel:V,size:p="md",theme:D,disabled:W=!1,required:ee=!1,invalid:K=!1,invalidMessage:_,bottomLabel:L,tooltip:J,className:j="",css:q,width:E,height:f,onChange:te,onClick:S,onFocus:F,onBlur:$},T)=>{const a=t.useRef(null),P=i!==void 0,N=U=>U===void 0?!1:U===!0||U===1,[H,ue]=t.useState(N(c)),[le,u]=t.useState(W),[,v]=t.useState({}),g=P?N(i):H;t.useEffect(()=>{u(W)},[W]),t.useImperativeHandle(T,()=>({getValue:()=>P?N(i):H,setValue:U=>{P||ue(U),te?.(U)},toggle:()=>{const ie=!(P?N(i):H);P||ue(ie),te?.(ie)},focus:()=>a.current?.focus(),blur:()=>a.current?.blur(),enable:()=>u(!1),disable:()=>u(!0),isEnabled:()=>!le,getNode:()=>a.current,refresh:()=>v({})}),[P,i,H,le,te]);const I=U=>{if(le)return;const ie=!g;P||ue(ie),te?.(ie),S?.(U)},Z=["avakio-switch-container",`avakio-switch-container-${p}`,D&&`avakio-switch-theme-${D}`,le&&"avakio-switch-container-disabled",K&&"avakio-switch-container-invalid",j].filter(Boolean).join(" "),b=["avakio-switch-button",`avakio-switch-button-${p}`,g&&"avakio-switch-button-on",le&&"avakio-switch-button-disabled",(z||V)&&"avakio-switch-button-with-labels"].filter(Boolean).join(" "),Y={...q&&typeof q=="object"&&!Array.isArray(q)?q:{},width:typeof E=="number"?`${E}px`:E,height:typeof f=="number"?`${f}px`:f},de={width:w>0?`${w}px`:void 0,minWidth:w>0?`${w}px`:void 0},G=z||V;return e.jsxs("div",{className:Z,style:Y,"data-admin-theme":D,children:[m&&e.jsxs("label",{className:"avakio-switch-label avakio-switch-label-left",style:de,children:[m,ee&&e.jsx("span",{className:"avakio-switch-required",children:"*"})]}),e.jsx("button",{ref:a,id:s,"data-testid":r,name:l,type:"button",role:"switch","aria-checked":g,"aria-disabled":le,"aria-label":m||A||"Switch",className:b,disabled:le,title:J,onClick:I,onFocus:F,onBlur:$,children:e.jsxs("span",{className:"avakio-switch-track",children:[G&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"avakio-switch-track-on-label",children:z}),e.jsx("span",{className:"avakio-switch-track-off-label",children:V})]}),e.jsx("span",{className:"avakio-switch-thumb"})]})}),A&&e.jsxs("label",{className:"avakio-switch-label avakio-switch-label-right",children:[A,ee&&!m&&e.jsx("span",{className:"avakio-switch-required",children:"*"})]}),(L||K&&_)&&e.jsx("div",{className:"avakio-switch-bottom",children:K&&_?e.jsx("span",{className:"avakio-switch-invalid-message",children:_}):e.jsx("span",{className:"avakio-switch-bottom-label",children:L})})]})});ta.displayName="AvakioSwitchButton";function os({id:s,value:r,options:l=[],onChange:i,onClose:c,renderTab:m,align:w="left",type:A="top",closable:z=!1,fill:V=!1,size:p="md",scrollable:D=!0,label:W,labelWidth:ee=120,labelAlign:K="left",required:_=!1,error:L,disabled:J=!1,className:j="",testId:q}){const[E,f]=t.useState(r??null),[te,S]=t.useState(new Set),[F,$]=t.useState(!1),[T,a]=t.useState(!1),P=t.useRef([]),N=t.useRef(null),H=t.useMemo(()=>l.filter(G=>!G.hidden).filter(G=>!te.has(G.id)),[l,te]),ue=r!==void 0?r:E;t.useEffect(()=>{if(r!==void 0)return;if(!H.some(U=>U.id===E&&!U.disabled)){const U=H.find(ie=>!ie.disabled)?.id??null;f(U)}},[H,E,r]),t.useEffect(()=>{r!==void 0&&f(r??null)},[r]);const le=t.useCallback(()=>{const G=N.current;if(!G||!D){$(!1),a(!1);return}const{scrollLeft:U,scrollWidth:ie,clientWidth:ae}=G;$(U>0),a(U+ae<ie-1)},[D]);t.useEffect(()=>{le();const G=N.current;if(G){G.addEventListener("scroll",le);const U=new ResizeObserver(le);return U.observe(G),()=>{G.removeEventListener("scroll",le),U.disconnect()}}},[le,H]);const u=()=>{const G=N.current;G&&G.scrollBy({left:-150,behavior:"smooth"})},v=()=>{const G=N.current;G&&G.scrollBy({left:150,behavior:"smooth"})},g=(G,U)=>{P.current[G]=U},I=G=>{if(G==null)return;const U=H.findIndex(ie=>ie.id===G);U>=0&&P.current[U]?.focus()},Z=G=>{!G||G.disabled||J||(r===void 0&&f(G.id),i?.(G.id,G))},b=(G,U)=>{if(U&&(U.stopPropagation(),U.preventDefault()),!(G.disabled||J)&&(S(ie=>{const ae=new Set(ie);return ae.add(G.id),ae}),c?.(G.id,G),r===void 0&&ue===G.id)){const ae=H.filter(ne=>ne.id!==G.id&&!ne.disabled)[0]?.id??null;f(ae),requestAnimationFrame(()=>I(ae))}},Y=G=>{if(!H.length)return;const U=H.filter(M=>!M.disabled);if(!U.length)return;const ie=U.findIndex(M=>M.id===ue),ae=ie===-1?0:ie;let ne;switch(G){case"next":ne=U[(ae+1)%U.length];break;case"prev":ne=U[(ae-1+U.length)%U.length];break;case"first":ne=U[0];break;case"last":ne=U[U.length-1];break}Z(ne),I(ne.id)},de=G=>{switch(G.key){case"ArrowRight":case"ArrowDown":G.preventDefault(),Y("next");break;case"ArrowLeft":case"ArrowUp":G.preventDefault(),Y("prev");break;case"Home":G.preventDefault(),Y("first");break;case"End":G.preventDefault(),Y("last");break;case"Delete":case"Backspace":if(z){const U=H.find(ie=>ie.id===ue);U&&(G.preventDefault(),b(U))}break}};return e.jsxs("div",{id:s,"data-testid":q,className:`avakio-tabbar ${j}`.trim(),"data-type":A,"data-align":w,"data-size":p,"data-fill":V,"data-disabled":J,"data-error":!!L,children:[W&&e.jsxs("div",{className:"avakio-tabbar-label",style:{width:ee,textAlign:K},children:[e.jsx("span",{children:W}),_&&e.jsx("span",{className:"avakio-tabbar-required",children:"*"})]}),e.jsxs("div",{className:"avakio-tabbar-wrapper",children:[D&&F&&e.jsx("button",{type:"button",className:"avakio-tabbar-scroll-btn avakio-tabbar-scroll-left",onClick:u,"aria-label":"Scroll tabs left",children:e.jsx(qe,{size:16,strokeWidth:2.5})}),e.jsx("div",{ref:N,className:"avakio-tabbar-track",role:"tablist","aria-label":W||"Tab Bar","data-scrollable":D,"data-has-scroll-left":F,"data-has-scroll-right":T,onKeyDown:de,children:H.map((G,U)=>{const ie=G.id===ue,ae=J||G.disabled,M=(G.close||z)&&!ae?e.jsx("button",{type:"button",className:"avakio-tabbar-close","aria-label":`Close ${G.label}`,onClick:O=>b(G,O),children:e.jsx(We,{size:14,strokeWidth:2.5})}):null,k=e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"avakio-tabbar-inner",children:[G.icon&&e.jsx("span",{className:"avakio-tabbar-icon",children:G.icon}),e.jsx("span",{className:"avakio-tabbar-text",children:G.label}),G.badge!==void 0&&e.jsx("span",{className:"avakio-tabbar-badge",children:G.badge})]}),M]}),o=m?m(G,ie,M):k;return e.jsx("div",{ref:O=>g(U,O),className:`avakio-tabbar-tab${ie?" active":""}`,role:"tab","aria-selected":ie,"aria-controls":G.ariaControls,tabIndex:ie&&!ae?0:-1,onClick:()=>Z(G),onKeyDown:O=>{(O.key==="Enter"||O.key===" ")&&(O.preventDefault(),Z(G))},"aria-disabled":ae,"data-active":ie,"data-disabled":ae,children:o},G.id)})}),D&&T&&e.jsx("button",{type:"button",className:"avakio-tabbar-scroll-btn avakio-tabbar-scroll-right",onClick:v,"aria-label":"Scroll tabs right",children:e.jsx(je,{size:16,strokeWidth:2.5})}),L&&e.jsx("div",{className:"avakio-tabbar-error",children:L})]})]})}const aa=t.forwardRef(({value:s="",label:r,placeholder:l,name:i,type:c="text",disabled:m=!1,readonly:w=!1,required:A=!1,theme:z="material",className:V="",width:p,height:D,labelWidth:W=100,labelPosition:ee="left",labelAlign:K="left",inputAlign:_="left",bottomLabel:L,clear:J=!1,enableValueCopyButton:j=!1,enablePlaceHolderCopyButton:q=!1,icon:E,iconPosition:f="left",validate:te,validateEvent:S="blur",invalid:F=!1,invalidMessage:$,maxLength:T,pattern:a,min:P,max:N,step:H,autoComplete:ue,multiline:le=!1,rows:u=4,onChange:v,onBlur:g,onFocus:I,onEnter:Z,onKeyPress:b,onClick:Y,padding:de,margin:G,textWidth:U},ie)=>{const[ae,ne]=t.useState(s),[M,k]=t.useState(F),[o,O]=t.useState($||""),[R,ce]=t.useState(!1),[fe,me]=t.useState(m),[Se,Ne]=t.useState(!1),De=t.useRef(null);t.useEffect(()=>{ne(s)},[s]),t.useEffect(()=>{k(F)},[F]),t.useEffect(()=>{me(m)},[m]);const Me=xe=>{if(te){const Ae=te(xe);if(typeof Ae=="string")return k(!0),O(Ae),!1;if(Ae===!1)return k(!0),O($||"Invalid value"),!1}if(A&&!xe.trim())return k(!0),O("This field is required"),!1;if(c==="email"&&xe&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(xe))return k(!0),O("Please enter a valid email address"),!1;if(c==="url"&&xe&&!/^https?:\/\/.+/.test(xe))return k(!0),O("Please enter a valid URL"),!1;if(c==="number"&&xe){const Ae=parseFloat(xe);if(isNaN(Ae))return k(!0),O("Please enter a valid number"),!1;if(P!==void 0&&Ae<P)return k(!0),O(`Value must be at least ${P}`),!1;if(N!==void 0&&Ae>N)return k(!0),O(`Value must be at most ${N}`),!1}return a&&xe&&!new RegExp(a).test(xe)?(k(!0),O($||"Invalid format"),!1):T&&xe.length>T?(k(!0),O(`Maximum length is ${T} characters`),!1):(k(!1),O(""),!0)},x=xe=>{const Ae=xe.target.value;ne(Ae),S==="change"&&Me(Ae),v&&v(Ae,xe)},se=xe=>{ce(!1),S==="blur"&&Me(ae),g&&g(xe)},pe=xe=>{ce(!0),I&&I(xe)},ge=xe=>{xe.key==="Enter"&&!le&&Z&&Z(ae),b&&b(xe)},h=()=>{ne(""),k(!1),O(""),v&&v("",{}),De.current?.focus()},oe=()=>{Ne(!Se)},n=()=>{ae&&navigator.clipboard.writeText(ae).then(()=>{}).catch(xe=>{console.error("Failed to copy text: ",xe)})},C=()=>{l&&navigator.clipboard.writeText(l).then(()=>{}).catch(xe=>{console.error("Failed to copy placeholder: ",xe)})};t.useImperativeHandle(ie,()=>({getValue:()=>ae,setValue:xe=>{ne(xe),S==="change"&&Me(xe)},focus:()=>De.current?.focus(),blur:()=>De.current?.blur(),validate:()=>Me(ae),getInputNode:()=>De.current,clear:h,isEnabled:()=>!fe,disable:()=>me(!0),enable:()=>me(!1)}));const d={width:ee==="left"?W:void 0,textAlign:K},X=c==="password"&&Se?"text":c,y=de?typeof de=="number"?`${de}px`:Array.isArray(de)?`${de[0]}px ${de[1]}px ${de[2]}px ${de[3]}px`:de:void 0,Q=G?typeof G=="number"?`${G}px`:Array.isArray(G)?`${G[0]}px ${G[1]}px ${G[2]}px ${G[3]}px`:G:void 0,re={width:typeof p=="number"?`${p}px`:p,height:typeof D=="number"?`${D}px`:D,...y&&{padding:y},...Q&&{margin:Q}},be=["avakio-text",`avakio-text-theme-${z}`,ee==="top"?"avakio-text-label-top":"avakio-text-label-left",M?"avakio-text-invalid":"",fe?"avakio-text-disabled":"",R?"avakio-text-focused":"",w?"avakio-text-readonly":"",V].filter(Boolean).join(" "),B=J&&ae||c==="password"||j&&ae||q&&l,ve=["avakio-text-input",`avakio-text-input-align-${_}`,E&&f==="left"?"avakio-text-input-with-icon-left":"",E&&f==="right"&&!B?"avakio-text-input-with-icon-right":"",B?"avakio-text-input-with-action":""].filter(Boolean).join(" "),we=U?{width:typeof U=="number"?`${U}px`:U}:{};return e.jsxs("div",{className:be,style:re,onClick:Y,children:[r&&e.jsxs("label",{className:"avakio-text-label",style:d,children:[r,A&&e.jsx("span",{className:"avakio-text-required",children:"*"})]}),e.jsxs("div",{className:"avakio-text-content",children:[e.jsxs("div",{className:"avakio-text-input-wrapper",style:we,children:[E&&f==="left"&&e.jsx("span",{className:"avakio-text-icon avakio-text-icon-left",children:E}),le?e.jsx("textarea",{ref:De,className:ve,value:ae,placeholder:l,name:i,disabled:fe,readOnly:w,required:A,maxLength:T,rows:u,onChange:x,onBlur:se,onFocus:pe,onKeyPress:ge}):e.jsx("input",{ref:De,type:X,className:ve,value:ae,placeholder:l,name:i,disabled:fe,readOnly:w,required:A,maxLength:T,pattern:a,min:P,max:N,step:H,autoComplete:ue,onChange:x,onBlur:se,onFocus:pe,onKeyPress:ge}),E&&f==="right"&&!B&&e.jsx("span",{className:"avakio-text-icon avakio-text-icon-right",children:E}),c==="password"&&e.jsx("button",{type:"button",className:"avakio-text-action",onClick:oe,disabled:fe,tabIndex:-1,children:Se?e.jsx(La,{size:16}):e.jsx(Ta,{size:16})}),J&&ae&&c!=="password"&&e.jsx("button",{type:"button",className:"avakio-text-action avakio-text-clear",onClick:h,disabled:fe||w,tabIndex:-1,children:e.jsx(We,{size:16})}),j&&ae&&c!=="password"&&e.jsx("button",{type:"button",className:"avakio-text-action avakio-text-copy",onClick:n,disabled:fe,tabIndex:-1,title:"Copy value to clipboard",children:e.jsx(Nt,{size:16})}),q&&l&&c!=="password"&&!j&&e.jsx("button",{type:"button",className:"avakio-text-action avakio-text-copy",onClick:C,disabled:fe,tabIndex:-1,title:"Copy placeholder to clipboard",children:e.jsx(Nt,{size:16})})]}),L&&e.jsx("div",{className:"avakio-text-bottom-label",children:L}),M&&o&&e.jsx("div",{className:"avakio-text-error-message",children:o})]})]})});aa.displayName="AvakioText";const sa=t.forwardRef(({id:s,testId:r,name:l,value:i,defaultValue:c=!1,label:m,onLabel:w,offLabel:A,icon:z,onIcon:V,offIcon:p,image:D,onImage:W,offImage:ee,type:K="default",size:_="md",theme:L,disabled:J=!1,autowidth:j=!1,block:q=!1,tooltip:E,hotkey:f,className:te="",css:S,width:F,height:$,padding:T,margin:a,onChange:P,onClick:N,onFocus:H,onBlur:ue},le)=>{const u=t.useRef(null),v=i!==void 0,[g,I]=t.useState(c),[Z,b]=t.useState(J),Y=v?i:g;t.useEffect(()=>{b(J)},[J]),t.useEffect(()=>{if(!f||Z)return;const R=ce=>{const fe=f.toLowerCase().split("+"),me=fe.includes("ctrl")||fe.includes("control"),Se=fe.includes("shift"),Ne=fe.includes("alt"),De=fe[fe.length-1];me===(ce.ctrlKey||ce.metaKey)&&Se===ce.shiftKey&&Ne===ce.altKey&&ce.key.toLowerCase()===De&&(ce.preventDefault(),de())};return document.addEventListener("keydown",R),()=>document.removeEventListener("keydown",R)},[f,Z]);const de=t.useCallback(()=>{if(Z)return;const R=!Y;v||I(R),P?.(R)},[Z,Y,v,P]),G=R=>{de(),N?.(R)};t.useImperativeHandle(le,()=>({getValue:()=>Y,setValue:R=>{v||I(R),P?.(R)},toggle:de,focus:()=>u.current?.focus(),blur:()=>u.current?.blur(),enable:()=>b(!1),disable:()=>b(!0),isEnabled:()=>!Z,getNode:()=>u.current}),[Y,v,Z,P,de]);const U=Y?w??m:A??m,ie=Y?V??z:p??z,ae=Y?W??D:ee??D,ne=T?typeof T=="number"?`${T}px`:Array.isArray(T)?`${T[0]}px ${T[1]}px ${T[2]}px ${T[3]}px`:T:void 0,M=a?typeof a=="number"?`${a}px`:Array.isArray(a)?`${a[0]}px ${a[1]}px ${a[2]}px ${a[3]}px`:a:void 0,k={...S&&typeof S=="object"&&!Array.isArray(S)?S:{},width:typeof F=="number"?`${F}px`:F,height:typeof $=="number"?`${$}px`:$,padding:ne,margin:M},o=K==="icon"?"icon":K==="iconTop"?"icon-top":K==="image"?"image":K==="imageTop"?"image-top":"default",O=["avakio-toggle-button",`avakio-toggle-button-${_}`,`avakio-toggle-button-type-${o}`,Y&&"avakio-toggle-button-pressed",Z&&"avakio-toggle-button-disabled",q&&"avakio-toggle-button-block",j&&"avakio-toggle-button-autowidth",te].filter(Boolean).join(" ");return e.jsx("button",{ref:u,id:s,"data-testid":r,"data-admin-theme":L,name:l,type:"button",className:O,style:k,disabled:Z,title:E,"aria-pressed":Y,onClick:G,onFocus:H,onBlur:ue,children:e.jsxs("span",{className:"avakio-toggle-button-inner",children:[ae&&e.jsx("img",{src:ae,alt:"",className:"avakio-toggle-button-image"}),ie&&e.jsx("span",{className:"avakio-toggle-button-icon",children:ie}),U&&e.jsx("span",{className:"avakio-toggle-button-label",children:U}),f&&e.jsx("span",{className:"avakio-toggle-button-hotkey",children:f})]})})});sa.displayName="AvakioToggleButton";const ra=t.forwardRef((s,r)=>{const{id:l,testId:i,items:c,multi:m=!1,type:w="rows",theme:A="material",showIcons:z=!0,collapseIcon:V,expandIcon:p,animate:D=!0,width:W,height:ee,className:K="",style:_,onExpand:L,onCollapse:J,onChange:j}=s,q=t.useId(),E=l||q,f=t.useRef(null),te=t.useRef(new Map),S=t.useCallback(()=>{const u=[];if(c.forEach(v=>{!v.collapsed&&v.headerVisible!==!1&&u.push(v.id)}),u.length===0&&m===!1){const v=c.find(g=>!g.disabled&&g.headerVisible!==!1);v&&u.push(v.id)}return u},[c,m]),[F,$]=t.useState(S),[T,a]=t.useState(()=>new Set(c.filter(u=>u.disabled).map(u=>u.id)));t.useEffect(()=>{$(S()),a(new Set(c.filter(u=>u.disabled).map(u=>u.id)))},[c,S]);const P=t.useCallback(u=>{T.has(u)||$(v=>{const g=v.includes(u);let I;if(g){if(m===!1){const Z=c.find(b=>b.id!==u&&!T.has(b.id)&&b.headerVisible!==!1);I=Z?[Z.id]:v}else if(m==="mixed"){if(v.length<=1)return v;I=v.filter(Z=>Z!==u)}else I=v.filter(Z=>Z!==u);I!==v&&J?.(u)}else m===!1?(v.forEach(Z=>{Z!==u&&J?.(Z)}),I=[u]):I=[...v,u],L?.(u);return I!==v&&j?.(I),I})},[m,c,T,L,J,j]),N=t.useCallback((u,v,g)=>{const I=c.filter(b=>!T.has(b.id)&&b.headerVisible!==!1),Z=I.findIndex(b=>b.id===v);switch(u.key){case"Enter":case" ":u.preventDefault(),P(v);break;case"ArrowDown":case"ArrowRight":if(u.preventDefault(),Z<I.length-1){const b=I[Z+1];f.current?.querySelector(`[data-item-id="${b.id}"] .avakio-accordion-header`)?.focus()}break;case"ArrowUp":case"ArrowLeft":if(u.preventDefault(),Z>0){const b=I[Z-1];f.current?.querySelector(`[data-item-id="${b.id}"] .avakio-accordion-header`)?.focus()}break;case"Home":if(u.preventDefault(),I.length>0){const b=I[0];f.current?.querySelector(`[data-item-id="${b.id}"] .avakio-accordion-header`)?.focus()}break;case"End":if(u.preventDefault(),I.length>0){const b=I[I.length-1];f.current?.querySelector(`[data-item-id="${b.id}"] .avakio-accordion-header`)?.focus()}break}},[c,T,P]);t.useImperativeHandle(r,()=>({getExpandedIds:()=>F,expand:u=>{!F.includes(u)&&!T.has(u)&&P(u)},collapse:u=>{F.includes(u)&&P(u)},toggle:u=>{T.has(u)||P(u)},expandAll:()=>{if(m===!0){const u=c.filter(v=>!T.has(v.id)&&v.headerVisible!==!1).map(v=>v.id);$(u),u.forEach(v=>{F.includes(v)||L?.(v)}),j?.(u)}},collapseAll:()=>{if(m===!0)F.forEach(u=>J?.(u)),$([]),j?.([]);else if(m==="mixed"){const u=F[0];u&&(F.slice(1).forEach(v=>J?.(v)),$([u]),j?.([u]))}},isExpanded:u=>F.includes(u),isDisabled:u=>T.has(u),enable:u=>{a(v=>{const g=new Set(v);return g.delete(u),g})},disable:u=>{a(v=>new Set(v).add(u))}}),[F,T,c,m,P,L,J,j]);const H=u=>z?u?p||e.jsx(Ye,{size:18}):V||e.jsx(je,{size:18}):null,ue=["avakio-accordion",`avakio-accordion--${A}`,`avakio-accordion--${w}`,D&&"avakio-accordion--animated",K].filter(Boolean).join(" "),le={width:typeof W=="number"?`${W}px`:W,height:typeof ee=="number"?`${ee}px`:ee,..._};return e.jsx("div",{ref:f,id:E,"data-testid":i,className:ue,style:le,role:"presentation",children:c.map((u,v)=>{const g=F.includes(u.id),I=T.has(u.id),Z=u.headerVisible!==!1,b=["avakio-accordion-item",g&&"avakio-accordion-item--expanded",I&&"avakio-accordion-item--disabled",!Z&&"avakio-accordion-item--no-header",u.css].filter(Boolean).join(" "),Y=`${E}-header-${u.id}`,de=`${E}-panel-${u.id}`;return e.jsxs("div",{className:b,"data-item-id":u.id,children:[Z&&e.jsxs("div",{id:Y,className:"avakio-accordion-header",role:"button",tabIndex:I?-1:0,"aria-expanded":g,"aria-controls":de,"aria-disabled":I,onClick:()=>P(u.id),onKeyDown:G=>N(G,u.id,v),children:[e.jsx("span",{className:"avakio-accordion-toggle",children:H(g)}),u.icon&&e.jsx("span",{className:"avakio-accordion-icon",children:u.icon}),e.jsx("span",{className:"avakio-accordion-header-text",children:u.header})]}),e.jsx("div",{id:de,ref:G=>{G?te.current.set(u.id,G):te.current.delete(u.id)},className:"avakio-accordion-content",role:"region","aria-labelledby":Y,"aria-hidden":!g,style:{maxHeight:g?void 0:0,overflow:g?"visible":"hidden"},children:e.jsx("div",{className:"avakio-accordion-body",children:u.body})})]},u.id)})})});ra.displayName="AvakioAccordion";const ls=[{value:100,color:"#5be5d6"},{value:80,color:"#fff07e"},{value:60,color:"#fd8b8c"}];function is({value:s,minRange:r=0,maxRange:l=100,marker:i=!1,markerColor:c,color:m="var(--bg-primary)",bands:w=ls,label:A,placeholder:z,stroke:V=8,scale:p,tickSize:D=10,flowTime:W=500,smoothFlow:ee=!0,layout:K="horizontal",labelWidth:_=120,labelHeight:L=40,showLabel:J=!0,showScale:j=!0,disabled:q=!1,id:E,testId:f,className:te}){const[S,F]=t.useState(r),$=t.useRef(null),T=t.useRef(r),a=t.useMemo(()=>Math.max(r,Math.min(l,s)),[s,r,l]);t.useEffect(()=>{if(!ee||W===0){F(a);return}const v=T.current,g=a,I=performance.now(),Z=b=>{const Y=b-I,de=Math.min(Y/W,1),G=1-Math.pow(1-de,3),U=v+(g-v)*G;F(U),de<1?$.current=requestAnimationFrame(Z):T.current=g};return $.current&&cancelAnimationFrame($.current),$.current=requestAnimationFrame(Z),()=>{$.current&&cancelAnimationFrame($.current)}},[a,W,ee]);const P=v=>{const g=l-r;return g===0?0:(v-r)/g*100},N=t.useMemo(()=>typeof m=="function"?m(a):m,[m,a]),H=t.useMemo(()=>{if(!j||!p)return[];const v=p.step||10,g=[];for(let I=r;I<=l;I+=v){let Z=String(I);p.template&&(typeof p.template=="function"?Z=p.template(I):Z=p.template.replace("#value#",String(I))),g.push({value:I,label:Z,position:P(I)})}return g},[j,p,r,l]),ue=t.useMemo(()=>[...w].sort((v,g)=>g.value-v.value),[w]),le=t.useMemo(()=>z?z.replace("#value#",String(Math.round(a))):null,[z,a]),u=K==="vertical";return e.jsxs("div",{id:E,"data-testid":f,className:He("avakio-bullet-graph",u&&"avakio-bullet-graph-vertical",q&&"avakio-bullet-graph-disabled",te),style:{"--bg-label-width":`${_}px`,"--bg-label-height":`${L}px`},children:[J&&A&&e.jsxs("div",{className:"avakio-bullet-graph-label",children:[e.jsx("span",{className:"avakio-bullet-graph-label-text",children:A}),le&&e.jsx("span",{className:"avakio-bullet-graph-placeholder",children:le})]}),e.jsxs("div",{className:"avakio-bullet-graph-container",children:[e.jsxs("div",{className:"avakio-bullet-graph-track",children:[ue.map((v,g)=>e.jsx("div",{className:"avakio-bullet-graph-band",style:{[u?"height":"width"]:`${P(v.value)}%`,backgroundColor:v.color}},g)),e.jsx("div",{className:"avakio-bullet-graph-bar",style:{[u?"height":"width"]:`${P(S)}%`,[u?"width":"height"]:`${V}px`,backgroundColor:N,transition:ee?`all ${W}ms ease-out`:"none"}}),i!==!1&&e.jsx("div",{className:"avakio-bullet-graph-marker",style:{[u?"bottom":"left"]:`${P(i)}%`,backgroundColor:c||"var(--bg-marker)"}})]}),j&&H.length>0&&e.jsx("div",{className:"avakio-bullet-graph-scale",children:H.map((v,g)=>e.jsxs("div",{className:"avakio-bullet-graph-tick",style:{[u?"bottom":"left"]:`${v.position}%`},children:[e.jsx("div",{className:"avakio-bullet-graph-tick-line",style:{[u?"width":"height"]:`${D}px`}}),e.jsx("span",{className:"avakio-bullet-graph-tick-label",children:v.label})]},g))})]})]})}const na=t.forwardRef(({id:s,testId:r,slides:l,theme:i="material",navigation:c={type:"bottom",items:!0,buttons:!0,position:"center"},autoplay:m=!1,autoplayDelay:w=3e3,scrollSpeed:A=300,loop:z=!0,activeIndex:V=0,width:p,height:D=400,css:W,onShow:ee,onSlideChange:K},_)=>{const[L,J]=t.useState(V),[j,q]=t.useState(l),[E,f]=t.useState(!1),[te,S]=t.useState(null),[F,$]=t.useState(null),T=t.useRef(null),a=t.useRef(null),P=50;t.useEffect(()=>{q(l)},[l]);const N=t.useCallback((ne,M=!1)=>{if(E&&!M)return;const k=Math.max(0,Math.min(ne,j.length-1));M||(f(!0),setTimeout(()=>f(!1),A)),J(k);const o=j[k];o&&(ee?.(o.id,k),K?.(o.id,k))},[E,j,A,ee,K]),H=t.useCallback(()=>{L<j.length-1?N(L+1):z&&N(0)},[L,j.length,z,N]),ue=t.useCallback(()=>{L>0?N(L-1):z&&N(j.length-1)},[L,j.length,z,N]),le=t.useCallback(ne=>{const M=j.findIndex(k=>k.id===ne);M!==-1&&N(M)},[j,N]),u=t.useCallback(ne=>{N(ne)},[N]),v=t.useCallback(()=>j[L]?.id||"",[j,L]),g=t.useCallback(()=>L,[L]),I=t.useCallback((ne,M)=>{q(k=>M!==void 0&&M>=0&&M<=k.length?[...k.slice(0,M),ne,...k.slice(M)]:[...k,ne])},[]),Z=t.useCallback(ne=>{q(M=>{const k=M.filter(o=>o.id!==ne);return L>=k.length&&k.length>0&&J(k.length-1),k})},[L]);t.useImperativeHandle(_,()=>({showNext:H,showPrev:ue,setActive:le,setActiveIndex:u,getActiveId:v,getActiveIndex:g,addView:I,removeView:Z})),t.useEffect(()=>{if(m&&j.length>1)return a.current=setInterval(()=>{H()},w),()=>{a.current&&clearInterval(a.current)}},[m,w,H,j.length]);const b=ne=>{$(null),S(ne.targetTouches[0].clientX)},Y=ne=>{$(ne.targetTouches[0].clientX)},de=()=>{if(!te||!F)return;const ne=te-F,M=ne>P,k=ne<-P;M&&H(),k&&ue()};t.useEffect(()=>{const ne=M=>{M.key==="ArrowLeft"?ue():M.key==="ArrowRight"&&H()};return window.addEventListener("keydown",ne),()=>window.removeEventListener("keydown",ne)},[H,ue]);const G={width:typeof p=="number"?`${p}px`:p,height:typeof D=="number"?`${D}px`:D,...W&&typeof W=="object"&&!Array.isArray(W)?W:{}},U=c.type==="side",ie=c.buttons!==!1,ae=c.items!==!1;return e.jsxs("div",{ref:T,id:s,"data-testid":r,className:`avakio-carousel avakio-carousel-theme-${i}`,style:G,onTouchStart:b,onTouchMove:Y,onTouchEnd:de,children:[U&&ie&&e.jsx("button",{className:"avakio-carousel-nav-button avakio-carousel-nav-prev",onClick:ue,disabled:!z&&L===0,"aria-label":"Previous slide",children:e.jsx(qe,{size:24})}),e.jsx("div",{className:"avakio-carousel-viewport",children:e.jsx("div",{className:"avakio-carousel-track",style:{transform:`translateX(-${L*100}%)`,transition:E?`transform ${A}ms ease-in-out`:"none"},children:j.map(ne=>e.jsx("div",{className:"avakio-carousel-slide",children:ne.content},ne.id))})}),U&&ie&&e.jsx("button",{className:"avakio-carousel-nav-button avakio-carousel-nav-next",onClick:H,disabled:!z&&L===j.length-1,"aria-label":"Next slide",children:e.jsx(je,{size:24})}),!U&&(ie||ae)&&e.jsxs("div",{className:`avakio-carousel-nav-bottom avakio-carousel-nav-${c.position||"center"}`,children:[ie&&e.jsxs("div",{className:"avakio-carousel-nav-buttons",children:[e.jsx("button",{className:"avakio-carousel-nav-button",onClick:ue,disabled:!z&&L===0,"aria-label":"Previous slide",children:e.jsx(qe,{size:20})}),e.jsx("button",{className:"avakio-carousel-nav-button",onClick:H,disabled:!z&&L===j.length-1,"aria-label":"Next slide",children:e.jsx(je,{size:20})})]}),ae&&e.jsx("div",{className:"avakio-carousel-indicators",children:j.map((ne,M)=>e.jsx("button",{className:`avakio-carousel-indicator ${M===L?"avakio-carousel-indicator-active":""}`,onClick:()=>N(M),"aria-label":`Go to slide ${M+1}`},ne.id))})]})]})});na.displayName="AvakioCarousel";const cs=["#4285F4","#EA4335","#FBBC05","#34A853","#8E24AA","#00ACC1","#FF7043","#5C6BC0","#26A69A","#D81B60"];function ds(s,r){const l=Math.min(...s),i=Math.max(...s),c=i-l||1,m=Math.pow(10,Math.floor(Math.log10(c))),w=c/m;let A;w<=1.5?A=m*.2:w<=3?A=m*.5:w<=7?A=m:A=m*2,r&&(A=r);const z=Math.floor(l/A)*A,V=Math.ceil(i/A)*A,p=[];for(let D=z;D<=V;D+=A)p.push(Math.round(D*1e3)/1e3);return{min:z,max:V,step:A,ticks:p}}function us(s){if(s.length<2)return"";if(s.length===2)return`M ${s[0].x} ${s[0].y} L ${s[1].x} ${s[1].y}`;const r=.3;let l=`M ${s[0].x} ${s[0].y}`;for(let i=0;i<s.length-1;i++){const c=s[Math.max(0,i-1)],m=s[i],w=s[i+1],A=s[Math.min(s.length-1,i+2)],z=m.x+(w.x-c.x)*r,V=m.y+(w.y-c.y)*r,p=w.x-(A.x-m.x)*r,D=w.y-(A.y-m.y)*r;l+=` C ${z} ${V}, ${p} ${D}, ${w.x} ${w.y}`}return l}function hs(s,r,l,i,c,m){const w={x:s+l*Math.cos((c-90)*Math.PI/180),y:r+l*Math.sin((c-90)*Math.PI/180)},A={x:s+l*Math.cos((m-90)*Math.PI/180),y:r+l*Math.sin((m-90)*Math.PI/180)},z={x:s+i*Math.cos((m-90)*Math.PI/180),y:r+i*Math.sin((m-90)*Math.PI/180)},V={x:s+i*Math.cos((c-90)*Math.PI/180),y:r+i*Math.sin((c-90)*Math.PI/180)},p=m-c<=180?0:1;return i===0?`M ${s} ${r} L ${w.x} ${w.y} A ${l} ${l} 0 ${p} 1 ${A.x} ${A.y} Z`:`M ${w.x} ${w.y} A ${l} ${l} 0 ${p} 1 ${A.x} ${A.y} L ${z.x} ${z.y} A ${i} ${i} 0 ${p} 0 ${V.x} ${V.y} Z`}const oa=t.forwardRef((s,r)=>{const{id:l,testId:i,type:c="line",series:m,xAxis:w={},yAxis:A={},legend:z={show:!0,position:"bottom",toggle:!0},tooltip:V={show:!0},title:p,subtitle:D,colors:W=cs,theme:ee="material",width:K="100%",height:_=400,padding:L={top:40,right:40,bottom:60,left:60},animate:J=!0,animateDuration:j=500,gradient:q=!1,barWidth:E=24,barOffset:f=8,borderRadius:te=4,donutInnerRadius:S=.5,pieStartAngle:F=0,pieLabels:$=!0,donutInnerText:T,stacked:a=!1,className:P,style:N,onClick:H,onHover:ue,onLegendClick:le}=s,u=t.useRef(null),v=t.useRef(null),[g,I]=t.useState({width:0,height:0}),[Z,b]=t.useState(new Set),[Y,de]=t.useState(null),[G,U]=t.useState(null),[ie,ae]=t.useState(J?0:1);t.useEffect(()=>{const n=u.current;if(!n)return;const C=new ResizeObserver(d=>{const X=d[0];X&&I({width:Math.max(0,X.contentRect.width),height:Math.max(0,typeof _=="number"?_:X.contentRect.height)})});return C.observe(n),()=>C.disconnect()},[_]),t.useEffect(()=>{if(!J){ae(1);return}ae(0);const n=performance.now(),C=d=>{const X=d-n,y=Math.min(X/j,1);ae(ne(y)),y<1&&requestAnimationFrame(C)};requestAnimationFrame(C)},[J,j,m]);const ne=n=>1-Math.pow(1-n,3),M=t.useMemo(()=>{const n={top:L.top??40,right:L.right??40,bottom:L.bottom??60,left:L.left??60};if(z.show)switch(z.position){case"top":n.top+=30;break;case"bottom":n.bottom+=30;break;case"left":n.left+=100;break;case"right":n.right+=100;break}return p&&(n.top+=24,D&&(n.top+=16)),{x:n.left,y:n.top,width:Math.max(0,g.width-n.left-n.right),height:Math.max(0,g.height-n.top-n.bottom)}},[g,L,z,p,D]),k=t.useMemo(()=>m.filter(n=>{const C=n.id||n.name;return!Z.has(C)}),[m,Z]),o=t.useMemo(()=>{if(c==="pie"||c==="pie3D"||c==="donut"||c==="radar")return{xScale:null,yScale:null};const d=[],X=[];k.forEach(be=>{be.data.forEach(B=>{B.x!==void 0&&d.push(B.x),X.push(B.y)})});const y=Array.from(new Set(d)),Q=y.every(be=>typeof be=="number"),re=ds(a?O(k):X,A.step);return A.min!==void 0&&(re.min=A.min),A.max!==void 0&&(re.max=A.max),{xValues:y,isXNumeric:Q,yBounds:re,xScale:be=>{if(Q){const ve=be,we=Math.min(...y),xe=Math.max(...y);return M.x+(ve-we)/(xe-we||1)*M.width}const B=y.indexOf(be);return M.x+(B+.5)*(M.width/y.length)},yScale:be=>{const B=re.max-re.min||1;return M.y+M.height-(be-re.min)/B*M.height}}},[k,M,c,w,A,a]);function O(n){const C=[];if(n.length===0)return[0];const d=n[0].data.length;for(let X=0;X<d;X++){let y=0;n.forEach(Q=>{Q.data[X]&&(y+=Q.data[X].y)}),C.push(y)}return C}const R=n=>{if(!z.toggle)return;const C=n.id||n.name,d=new Set(Z);d.has(C)?d.delete(C):d.add(C),b(d),le?.(n,!d.has(C))},ce=(n,C,d,X)=>{if(C&&n&&d!==null){const y=n.id||n.name;if(de({seriesId:y,index:d}),V.show){const Q=V.format?V.format(C,n):`${n.name}: ${C.y}`,re=u.current?.getBoundingClientRect();re&&U({x:X.clientX-re.left,y:X.clientY-re.top,content:Q})}ue?.(C,n,d)}else de(null),U(null),ue?.(null,null,null)},fe=(n,C,d)=>{H?.(C,n,d)};t.useImperativeHandle(r,()=>({getNode:()=>u.current,showSeries:n=>{b(C=>{const d=new Set(C);return d.delete(n),d})},hideSeries:n=>{b(C=>new Set(C).add(n))},toggleSeries:n=>{b(C=>{const d=new Set(C);return d.has(n)?d.delete(n):d.add(n),d})},getVisibleSeries:()=>m.filter(n=>!Z.has(n.id||n.name)).map(n=>n.id||n.name),exportImage:async(n="png")=>{if(!v.current)return"";const C=new XMLSerializer().serializeToString(v.current),d=document.createElement("canvas");d.width=g.width,d.height=g.height;const X=d.getContext("2d");return new Promise(y=>{const Q=new Image;Q.onload=()=>{X?.drawImage(Q,0,0),y(d.toDataURL(`image/${n}`))},Q.src="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(C)))})},refresh:()=>{ae(0),setTimeout(()=>ae(1),10)}}),[m,Z,g]);const me=()=>p?e.jsxs("g",{className:"avakio-chart__title",children:[e.jsx("text",{x:g.width/2,y:24,textAnchor:"middle",className:"avakio-chart__title-text",children:p}),D&&e.jsx("text",{x:g.width/2,y:44,textAnchor:"middle",className:"avakio-chart__subtitle-text",children:D})]}):null,Se=()=>{if(c==="pie"||c==="pie3D"||c==="donut"||c==="radar"||!o.xValues||!o.yBounds)return null;const n=M.y+M.height,C=M.x;return e.jsxs("g",{className:"avakio-chart__axes",children:[w.showLine!==!1&&e.jsx("line",{x1:M.x,y1:n,x2:M.x+M.width,y2:n,className:"avakio-chart__axis-line"}),o.xValues.map((d,X)=>{const y=o.xScale(d);return e.jsxs("g",{children:[w.showTicks!==!1&&e.jsx("line",{x1:y,y1:n,x2:y,y2:n+6,className:"avakio-chart__tick"}),e.jsx("text",{x:y,y:n+20,textAnchor:"middle",className:"avakio-chart__axis-label",transform:w.labelRotation?`rotate(${w.labelRotation}, ${y}, ${n+20})`:void 0,children:w.format?w.format(d):String(d)})]},`x-${X}`)}),w.title&&e.jsx("text",{x:M.x+M.width/2,y:n+45,textAnchor:"middle",className:"avakio-chart__axis-title",children:w.title}),A.showLine!==!1&&e.jsx("line",{x1:C,y1:M.y,x2:C,y2:M.y+M.height,className:"avakio-chart__axis-line"}),o.yBounds.ticks.map((d,X)=>{const y=o.yScale(d);return e.jsxs("g",{children:[A.showGrid!==!1&&e.jsx("line",{x1:M.x,y1:y,x2:M.x+M.width,y2:y,className:"avakio-chart__grid-line"}),A.showTicks!==!1&&e.jsx("line",{x1:C-6,y1:y,x2:C,y2:y,className:"avakio-chart__tick"}),e.jsx("text",{x:C-12,y:y+4,textAnchor:"end",className:"avakio-chart__axis-label",children:A.format?A.format(d):String(d)})]},`y-${X}`)}),A.title&&e.jsx("text",{x:20,y:M.y+M.height/2,textAnchor:"middle",className:"avakio-chart__axis-title",transform:`rotate(-90, 20, ${M.y+M.height/2})`,children:A.title})]})},Ne=(n=!1,C=!1)=>!o.xScale||!o.yScale?null:e.jsx("g",{className:"avakio-chart__series",children:k.map((d,X)=>{const y=d.id||d.name,Q=d.color||W[X%W.length],re=d.data.map(ve=>({x:o.xScale(ve.x??X),y:o.yScale(ve.y*ie)})),be=n?us(re):`M ${re.map(ve=>`${ve.x} ${ve.y}`).join(" L ")}`,B=C?`${be} L ${re[re.length-1]?.x??0} ${M.y+M.height} L ${re[0]?.x??0} ${M.y+M.height} Z`:"";return e.jsxs("g",{className:"avakio-chart__series-group",children:[q&&C&&e.jsx("defs",{children:e.jsxs("linearGradient",{id:`gradient-${y}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:Q,stopOpacity:"0.6"}),e.jsx("stop",{offset:"100%",stopColor:Q,stopOpacity:"0.05"})]})}),C&&e.jsx("path",{d:B,fill:q?`url(#gradient-${y})`:Q,fillOpacity:q?1:d.fillOpacity??.2,className:"avakio-chart__area"}),e.jsx("path",{d:be,stroke:Q,strokeWidth:d.lineWidth??2,fill:"none",className:"avakio-chart__line"}),d.showMarkers!==!1&&re.map((ve,we)=>e.jsx("circle",{cx:ve.x,cy:ve.y,r:Y?.seriesId===y&&Y?.index===we?(d.markerSize??4)+2:d.markerSize??4,fill:Q,stroke:"#fff",strokeWidth:2,className:"avakio-chart__marker",onMouseEnter:xe=>ce(d,d.data[we],we,xe),onMouseLeave:()=>ce(null,null,null,{}),onClick:()=>fe(d,d.data[we],we),style:{cursor:H?"pointer":"default"}},we)),d.showLabels&&re.map((ve,we)=>e.jsx("text",{x:ve.x,y:ve.y-10,textAnchor:"middle",className:"avakio-chart__data-label",children:d.data[we].y},`label-${we}`))]},y)})}),De=(n=!1)=>{if(!o.xScale||!o.yScale||!o.xValues)return null;const C=k.length,d=M.width/Math.max(1,o.xValues.length),X=Math.max(1,Math.min(E,(d-f*2)/Math.max(1,C))),y=X*C,Q=Math.max(0,(d-y)/2);return e.jsx("g",{className:"avakio-chart__series",children:o.xValues.map((re,be)=>{const B=M.x+be*d;let ve=M.y+M.height;return e.jsx("g",{className:"avakio-chart__bar-group",children:k.map((we,xe)=>{const Ae=we.id||we.name,Ie=we.color||W[xe%W.length],_e=we.data.find(Te=>Te.x===re)||we.data[be];if(!_e)return null;const ze=_e.y*ie,Be=Math.max(1,o.yBounds.max-o.yBounds.min),he=Math.max(0,ze/Be*M.height);let ke,ye,$e,Ee;a?(ke=B+Q,Ee=he,ye=ve-Ee,$e=Math.max(1,y),ve=ye):(ke=B+Q+xe*X,ye=o.yScale(ze),$e=Math.max(1,X-2),Ee=Math.max(0,M.y+M.height-ye));const Le=Y?.seriesId===Ae&&Y?.index===be;return e.jsxs("g",{children:[q&&e.jsx("defs",{children:e.jsxs("linearGradient",{id:`bar-gradient-${Ae}-${be}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:Ie,stopOpacity:"1"}),e.jsx("stop",{offset:"100%",stopColor:Ie,stopOpacity:"0.7"})]})}),e.jsx("rect",{x:ke,y:ye,width:$e,height:Math.max(0,Ee),rx:te,fill:q?`url(#bar-gradient-${Ae}-${be})`:Ie,className:`avakio-chart__bar ${Le?"avakio-chart__bar--hovered":""}`,onMouseEnter:Te=>ce(we,_e,be,Te),onMouseLeave:()=>ce(null,null,null,{}),onClick:()=>fe(we,_e,be),style:{cursor:H?"pointer":"default"}}),we.showLabels&&e.jsx("text",{x:ke+$e/2,y:ye-5,textAnchor:"middle",className:"avakio-chart__data-label",children:_e.y})]},Ae)})},`group-${be}`)})})},Me=(n=!1)=>{const C=k[0];if(!C)return null;const d=M.x+M.width/2,X=M.y+M.height/2,y=Math.min(M.width,M.height)/2-20,Q=n?y*S:0,re=C.data.reduce((B,ve)=>B+ve.y,0);let be=F;return e.jsxs("g",{className:"avakio-chart__pie",children:[C.data.map((B,ve)=>{const we=B.y/re*360*ie,xe=be,Ae=be+we;be=Ae;const Ie=B.color||W[ve%W.length],_e=(xe+Ae)/2,ze=Y?.seriesId===(C.id||C.name)&&Y?.index===ve,Be=y+25,he=d+Be*Math.cos((_e-90)*Math.PI/180),ke=X+Be*Math.sin((_e-90)*Math.PI/180),ye=ze?8:0,$e=ye*Math.cos((_e-90)*Math.PI/180),Ee=ye*Math.sin((_e-90)*Math.PI/180);return e.jsxs("g",{transform:`translate(${$e}, ${Ee})`,children:[q&&e.jsx("defs",{children:e.jsxs("radialGradient",{id:`pie-gradient-${ve}`,cx:"30%",cy:"30%",children:[e.jsx("stop",{offset:"0%",stopColor:Ie,stopOpacity:"1"}),e.jsx("stop",{offset:"100%",stopColor:Ie,stopOpacity:"0.8"})]})}),e.jsx("path",{d:hs(d,X,y,Q,xe,Ae),fill:q?`url(#pie-gradient-${ve})`:Ie,stroke:"#fff",strokeWidth:2,className:`avakio-chart__pie-slice ${ze?"avakio-chart__pie-slice--hovered":""}`,onMouseEnter:Le=>ce(C,B,ve,Le),onMouseLeave:()=>ce(null,null,null,{}),onClick:()=>fe(C,B,ve),style:{cursor:H?"pointer":"default"}}),$&&we>15&&e.jsxs("text",{x:he,y:ke,textAnchor:he>d?"start":"end",className:"avakio-chart__pie-label",children:[B.label||B.x||""," (",(B.y/re*100).toFixed(1),"%)"]})]},ve)}),n&&T&&e.jsx("text",{x:d,y:X,textAnchor:"middle",dominantBaseline:"middle",className:"avakio-chart__donut-text",children:T})]})},x=()=>!o.xScale||!o.yScale?null:e.jsx("g",{className:"avakio-chart__series",children:k.map((n,C)=>{const d=n.id||n.name,X=n.color||W[C%W.length];return e.jsx("g",{className:"avakio-chart__scatter-group",children:n.data.map((y,Q)=>{const re=o.xScale(y.x??Q),be=o.yScale(y.y*ie),B=Y?.seriesId===d&&Y?.index===Q;return e.jsx("circle",{cx:re,cy:be,r:B?(n.markerSize??6)+2:n.markerSize??6,fill:y.color||X,fillOpacity:.7,stroke:y.color||X,strokeWidth:2,className:"avakio-chart__scatter-point",onMouseEnter:ve=>ce(n,y,Q,ve),onMouseLeave:()=>ce(null,null,null,{}),onClick:()=>fe(n,y,Q),style:{cursor:H?"pointer":"default"}},Q)})},d)})}),se=()=>{if(k.length===0)return null;const n=k[0].data.map(B=>String(B.label||B.x||"")),C=n.length,d=Math.PI*2/C,X=M.x+M.width/2,y=M.y+M.height/2,Q=Math.min(M.width,M.height)/2-40,re=Math.max(...k.flatMap(B=>B.data.map(ve=>ve.y))),be=5;return e.jsxs("g",{className:"avakio-chart__radar",children:[Array.from({length:be}).map((B,ve)=>{const we=Q*(ve+1)/be,xe=Array.from({length:C}).map((Ae,Ie)=>{const _e=Ie*d-Math.PI/2;return{x:X+we*Math.cos(_e),y:y+we*Math.sin(_e)}});return e.jsx("polygon",{points:xe.map(Ae=>`${Ae.x},${Ae.y}`).join(" "),fill:"none",stroke:"currentColor",strokeOpacity:.2,className:"avakio-chart__radar-level"},ve)}),n.map((B,ve)=>{const we=ve*d-Math.PI/2,xe=X+Q*Math.cos(we),Ae=y+Q*Math.sin(we);return e.jsx("line",{x1:X,y1:y,x2:xe,y2:Ae,stroke:"currentColor",strokeOpacity:.2,className:"avakio-chart__radar-axis"},ve)}),n.map((B,ve)=>{const we=ve*d-Math.PI/2,xe=X+(Q+20)*Math.cos(we),Ae=y+(Q+20)*Math.sin(we);return e.jsx("text",{x:xe,y:Ae,textAnchor:"middle",dominantBaseline:"middle",className:"avakio-chart__radar-label",children:B},ve)}),k.map((B,ve)=>{const we=B.id||B.name,xe=B.color||W[ve%W.length],Ae=B.data.map((Ie,_e)=>{const ze=_e*d-Math.PI/2,Be=Ie.y/re*Q*ie;return{x:X+Be*Math.cos(ze),y:y+Be*Math.sin(ze)}});return e.jsxs("g",{children:[e.jsx("polygon",{points:Ae.map(Ie=>`${Ie.x},${Ie.y}`).join(" "),fill:xe,fillOpacity:.2,stroke:xe,strokeWidth:2,className:"avakio-chart__radar-polygon"}),Ae.map((Ie,_e)=>e.jsx("circle",{cx:Ie.x,cy:Ie.y,r:B.markerSize??4,fill:xe,stroke:"#fff",strokeWidth:2,className:"avakio-chart__radar-point",onMouseEnter:ze=>ce(B,B.data[_e],_e,ze),onMouseLeave:()=>ce(null,null,null,{}),onClick:()=>fe(B,B.data[_e],_e),style:{cursor:H?"pointer":"default"}},_e))]},we)})]})},pe=()=>{if(!z.show)return null;const n=z.position==="left"||z.position==="right";let C,d;switch(z.position){case"top":C=g.width/2,d=p?60:20;break;case"bottom":C=g.width/2,d=g.height-15;break;case"left":C=20,d=M.y+20;break;case"right":C=g.width-100,d=M.y+20;break;default:C=g.width/2,d=g.height-15}return e.jsx("g",{className:"avakio-chart__legend",transform:`translate(${C}, ${d})`,children:m.map((X,y)=>{const Q=X.id||X.name,re=X.color||W[y%W.length],be=Z.has(Q),B=n?0:(y-m.length/2)*100,ve=n?y*24:0;return e.jsxs("g",{className:`avakio-chart__legend-item ${be?"avakio-chart__legend-item--hidden":""}`,transform:`translate(${B}, ${ve})`,onClick:()=>R(X),style:{cursor:z.toggle?"pointer":"default"},children:[e.jsx("rect",{x:0,y:-8,width:12,height:12,rx:2,fill:be?"transparent":re,stroke:re,strokeWidth:2}),e.jsx("text",{x:18,y:0,dominantBaseline:"middle",className:"avakio-chart__legend-text",style:{opacity:be?.5:1},children:X.name})]},Q)})})},ge=()=>G?e.jsx("div",{className:"avakio-chart__tooltip",style:{left:G.x+10,top:G.y-10},children:G.content}):null,h=()=>{switch(c){case"line":return Ne(!1,!1);case"spline":return Ne(!0,!1);case"area":return Ne(!1,!0);case"splineArea":return Ne(!0,!0);case"bar":case"stackedBar":return De(!1);case"barH":case"stackedBarH":return De(!0);case"pie":case"pie3D":return Me(!1);case"donut":return Me(!0);case"scatter":return x();case"radar":return se();default:return Ne(!1,!1)}},oe={width:K,height:_,...N};return e.jsxs("div",{ref:u,id:l,"data-testid":i,className:`avakio-chart avakio-chart--${ee} avakio-chart--${c} ${P||""}`,style:oe,children:[e.jsxs("svg",{ref:v,width:g.width,height:g.height,className:"avakio-chart__svg",children:[me(),Se(),h(),pe()]}),ge()]})});oa.displayName="AvakioChart";function la(s){return Array.isArray(s)?s:typeof s=="number"?[s,s,s,s]:[0,0,0,0]}function fs(s,r){return s.x<r.x+r.dx&&s.x+s.dx>r.x&&s.y<r.y+r.dy&&s.y+s.dy>r.y}const ia=t.forwardRef(({id:s,testId:r,gridColumns:l=2,gridRows:i=2,cellWidth:c,cellHeight:m,cellMargin:w=10,margin:A,padding:z=10,paddingX:V,paddingY:p,width:D,height:W,theme:ee="material",widgets:K,editable:_=!0,dragHandle:L="any",className:J="",style:j,onChange:q,onWidgetClick:E,onDragStart:f,onDragEnd:te,onResizeStart:S,onResizeEnd:F},$)=>{const T=t.useRef(null),a=t.useRef(null),[P,N]=t.useState(K),H=t.useRef(K),[ue,le]=t.useState({width:0,height:0}),u=t.useRef(null);t.useEffect(()=>{N(K)},[K]),t.useEffect(()=>{H.current=P},[P]),t.useEffect(()=>{const o=a.current;if(!o)return;const O=()=>{le({width:o.clientWidth,height:o.clientHeight})};O();let R=null;const ce=new ResizeObserver(()=>{R===null&&(R=requestAnimationFrame(()=>{R=null,O()}))});return ce.observe(o),()=>{ce.disconnect(),R!==null&&cancelAnimationFrame(R)}},[]);const v=t.useMemo(()=>{if(c)return c;const o=la(z),O=V!==void 0?V:o[1],R=ue.width-O*2-w*(l-1);return Math.max(50,R/Math.max(1,l))},[c,ue.width,z,V,w,l]),g=t.useMemo(()=>{if(m)return m;const o=la(z),O=p!==void 0?p:o[0],R=ue.height-O*2-w*(i-1);return Math.max(50,R/Math.max(1,i))},[m,ue.height,z,p,w,i]),I=t.useCallback(o=>{N(O=>{const R=typeof o=="function"?o(O):o;return q?.(R),R})},[q]),Z=t.useCallback(o=>H.current.find(O=>O.id===o),[]),b=t.useCallback(o=>{if(o.x<0||o.y<0||o.x+o.dx>l||o.y+o.dy>i)return!1;for(const O of H.current){if(o.id&&O.id===o.id)continue;const R={x:O.x,y:O.y,dx:O.dx??1,dy:O.dy??1};if(fs({x:o.x,y:o.y,dx:o.dx,dy:o.dy},R))return!1}return!0},[l,i]),Y=t.useCallback((o,O)=>{for(let R=0;R<=i-O;R++)for(let ce=0;ce<=l-o;ce++)if(b({x:ce,y:R,dx:o,dy:O}))return{x:ce,y:R};return null},[i,l,b]);t.useImperativeHandle($,()=>({addWidget:(o,O)=>{const R=o.dx??1,ce=o.dy??1,fe=Y(R,ce),me=fe?{...o,x:fe.x,y:fe.y,dx:R,dy:ce}:{...o,dx:R,dy:ce};I(Se=>{const Ne=[...Se];return typeof O=="number"?Ne.splice(O,0,me):Ne.push(me),Ne})},removeWidget:o=>{I(O=>O.filter(R=>R.id!==o))},moveWidget:(o,O)=>{const R=Z(o);if(!R)return;const ce={id:o,x:O.x??R.x,y:O.y??R.y,dx:O.dx??R.dx??1,dy:O.dy??R.dy??1};b(ce)&&I(fe=>fe.map(me=>me.id===o?{...me,...O}:me))},getWidgets:()=>[...H.current],getWidget:o=>H.current.find(O=>O.id===o),serialize:()=>H.current.map(o=>({id:o.id,x:o.x,y:o.y,dx:o.dx??1,dy:o.dy??1})),restore:o=>{const O=new Map(o.map(R=>[R.id,R]));I(R=>R.map(ce=>{const fe=O.get(ce.id);return fe?{...ce,x:fe.x,y:fe.y,dx:fe.dx,dy:fe.dy}:ce}))}}),[I,Z,b,Y]);const de=t.useCallback(o=>{I(O=>O.map(R=>{const ce=o.find(fe=>fe.id===R.id);return ce?{...R,x:ce.x,y:ce.y,dx:ce.dx??1,dy:ce.dy??1}:R}))},[I]),G=t.useCallback(o=>{const O=Z(o.id);O&&f?.(O)},[Z,f]),U=t.useCallback((o,O)=>{const R=Z(o.id);R&&te?.({...R,x:O.x,y:O.y},O)},[Z,te]),ie=t.useCallback((o,O)=>{if(!_)return;const R=Z(O);!R||R.resizable!==!0||(o.preventDefault(),o.stopPropagation(),u.current={widgetId:O,startClientX:o.clientX,startClientY:o.clientY,startDx:R.dx??1,startDy:R.dy??1},S?.(R),o.currentTarget.setPointerCapture?.(o.pointerId))},[_,Z,S]),ae=t.useCallback(o=>{const O=u.current;if(!O)return;const R=Z(O.widgetId);if(!R)return;const ce=v+w,fe=g+w,me=o.clientX-O.startClientX,Se=o.clientY-O.startClientY,Ne=Math.max(1,R.minDx??1),De=Math.max(1,R.minDy??1),Me=Math.max(1,l-R.x),x=Math.max(1,i-R.y),se=Math.max(Ne,Math.min(Me,O.startDx+Math.round(me/ce))),pe=Math.max(De,Math.min(x,O.startDy+Math.round(Se/fe))),ge={id:R.id,x:R.x,y:R.y,dx:se,dy:pe};b(ge)&&((R.dx??1)===se&&(R.dy??1)===pe||I(h=>h.map(oe=>oe.id===R.id?{...oe,dx:se,dy:pe}:oe)))},[Z,v,g,w,l,i,b,I]),ne=t.useCallback(()=>{const o=u.current;if(!o)return;const O=Z(o.widgetId);O&&F?.(O,{dx:O.dx??1,dy:O.dy??1}),u.current=null},[Z,F]),M=t.useMemo(()=>P.map(o=>{const O=o.dx??1,R=o.dy??1,ce=o.header??null,fe=ce!=null,me=L==="header"&&_;return{id:o.id,x:o.x,y:o.y,dx:O,dy:R,draggable:o.draggable!==!1,content:e.jsxs("div",{className:["avakio-dashboard__panel",fe?"avakio-dashboard__panel--with-header":"avakio-dashboard__panel--no-header",_?"avakio-dashboard__panel--editable":"avakio-dashboard__panel--readonly",o.className].filter(Boolean).join(" "),style:o.style,"data-widget-id":o.id,children:[fe&&e.jsxs("div",{className:"avakio-dashboard__panel-header",children:[o.icon&&e.jsx("span",{className:"avakio-dashboard__panel-icon",children:o.icon}),e.jsx("div",{className:"avakio-dashboard__panel-title",children:ce})]}),e.jsx("div",{className:"avakio-dashboard__panel-body",onMouseDown:me?Se=>Se.stopPropagation():void 0,onTouchStart:me?Se=>Se.stopPropagation():void 0,children:o.body}),_&&o.resizable===!0&&e.jsx("div",{className:"avakio-dashboard__resize-handle",onPointerDown:Se=>ie(Se,o.id),onMouseDown:Se=>Se.stopPropagation(),onTouchStart:Se=>Se.stopPropagation()})]})}}),[P,L,_,ie]),k={width:D,height:W,...j&&typeof j=="object"&&!Array.isArray(j)?j:{}};return e.jsx("div",{ref:a,id:s,"data-testid":r,className:["avakio-dashboard",`avakio-dashboard--${ee}`,J].filter(Boolean).join(" "),"data-admin-theme":ee,style:k,onPointerMove:ae,onPointerUp:ne,onPointerCancel:ne,children:e.jsx(ft,{ref:T,id:s?`${s}__grid`:void 0,testId:r?`${r}__grid`:void 0,gridColumns:l,gridRows:i,cellWidth:c,cellHeight:m,cellMargin:w,margin:A,padding:z,paddingX:V,paddingY:p,width:"100%",height:"100%",theme:ee,borderless:!0,cellBorderless:!0,isDraggable:_,cells:M,onChange:de,onCellClick:o=>{const O=Z(o.id);O&&E?.(O)},onDragStart:G,onDragEnd:U})})});ia.displayName="AvakioDashboard";const vs=s=>{let r="",l=s;for(;l>=0;)r=String.fromCharCode(l%26+65)+r,l=Math.floor(l/26)-1;return r},et=(s,r)=>{if(!s||s.length===0)return[];const l=s[0];return Object.keys(l).map((c,m)=>({id:c,header:r?String(l[c]||vs(m)):c,width:100}))},ca=t.forwardRef((s,r)=>{const{id:l,testId:i,theme:c="material",sheets:m,data:w,columns:A,excelHeader:z=!1,toolbar:V=!0,columnWidth:p=100,rowHeight:D=32,headerRowHeight:W=36,showRowNumbers:ee=!0,resizeColumn:K=!0,resizeRow:_=!1,editable:L=!1,editAction:J="dblclick",select:j="cell",multiselect:q=!1,blockselect:E=!1,gridLines:f=!0,navigation:te=!0,freezeHeader:S=!0,leftSplit:F=0,topSplit:$=0,disabled:T=!1,autowidth:a=!1,autoheight:P=!1,yCount:N,css:H,spans:ue=[],onCellClick:le,onCellDoubleClick:u,onCellChange:v,onSelectionChange:g,onSheetChange:I,onColumnResize:Z,onRowResize:b,onSort:Y,onDataLoad:de}=s,[G,U]=t.useState(()=>{if(m&&m.length>0)return m;if(w){const he=A||et(w,z);return[{name:"Sheet1",data:z?w.slice(1):w,columns:he}]}return[{name:"Sheet1",data:[],columns:[]}]}),[ie,ae]=t.useState(0),[ne,M]=t.useState(()=>{const he=G[0];return he?.columns||et(he?.data||[],z)}),[k,o]=t.useState(()=>G[0]?.data||[]),[O,R]=t.useState(null),[ce,fe]=t.useState(null),[me,Se]=t.useState(""),[Ne,De]=t.useState(null),[Me,x]=t.useState({}),[se,pe]=t.useState({}),[ge,h]=t.useState(new Set),[oe,n]=t.useState(null),C=t.useRef(null),d=t.useRef(null),X=t.useRef(null),y=t.useRef(null);t.useEffect(()=>{if(m&&m.length>0){U(m);const he=m[ie]||m[0];o(he.data),M(he.columns||et(he.data,z))}},[m,ie,z]),t.useEffect(()=>{if(w&&!m){const he=A||et(w,z),ke=z?w.slice(1):w;U([{name:"Sheet1",data:ke,columns:he}]),o(ke),M(he)}},[w,A,m,z]);const Q=ne.filter(he=>!he.hidden&&!ge.has(he.id)),re=t.useMemo(()=>{let he=[...k];if(oe){const{columnId:ke,value:ye,compare:$e}=oe;he=he.filter(Ee=>{const Le=Ee[ke];return $e?$e(Le,ye):ye===""||ye===null||ye===void 0?!0:String(Le).toLowerCase().includes(String(ye).toLowerCase())})}if(Ne){const{columnId:ke,direction:ye}=Ne,$e=ne.find(Ee=>Ee.id===ke);he.sort((Ee,Le)=>{const Te=Ee[ke],Pe=Le[ke];let Fe=0;return typeof $e?.sort=="function"?Fe=$e.sort(Te,Pe):$e?.sort==="number"?Fe=(Number(Te)||0)-(Number(Pe)||0):$e?.sort==="date"?Fe=new Date(Te).getTime()-new Date(Pe).getTime():Fe=String(Te||"").localeCompare(String(Pe||"")),ye==="desc"?-Fe:Fe})}return he},[k,oe,Ne,ne]),be=t.useCallback(he=>{if(he>=0&&he<G.length){ae(he);const ke=G[he];o(ke.data),M(ke.columns||et(ke.data,z)),R(null),fe(null),De(null),n(null),I?.(ke.name,he)}},[G,z,I]),B=t.useCallback((he,ke,ye)=>{if(T)return;const $e=Q[ke],Ee=re[he];j&&(E&&ye.shiftKey&&O?R({...O,endRow:he,endColumn:ke}):(R({row:he,column:ke}),y.current={row:he,col:ke}),g?.({row:he,column:ke})),L&&J==="click"&&$e?.editable!==!1&&(fe({row:he,col:ke}),Se(String(Ee?.[$e?.id]||""))),le?.(Ee,$e,he,ke)},[T,j,E,O,L,J,Q,re,g,le]),ve=t.useCallback((he,ke)=>{if(T)return;const ye=Q[ke],$e=re[he];L&&J==="dblclick"&&ye?.editable!==!1&&(fe({row:he,col:ke}),Se(String($e?.[ye?.id]||""))),u?.($e,ye,he,ke)},[T,L,J,Q,re,u]),we=t.useCallback(()=>{if(!ce)return;const{row:he,col:ke}=ce,ye=Q[ke],$e=re[he],Ee=$e?.[ye?.id];if(me!==String(Ee||"")){const Le=[...k],Te=k.indexOf($e);Te>=0&&(Le[Te]={...Le[Te],[ye.id]:me},o(Le),v?.($e,ye,Ee,me,Te))}fe(null),Se("")},[ce,me,Q,re,k,v]),xe=t.useCallback((he,ke)=>{ke.preventDefault(),ke.stopPropagation();const ye=ne.find(Te=>Te.id===he),$e=Me[he]||ye?.width||p;X.current={columnId:he,startX:ke.clientX,startWidth:$e};const Ee=Te=>{if(!X.current)return;const Pe=Te.clientX-X.current.startX,Fe=Math.max(50,X.current.startWidth+Pe);x(kt=>({...kt,[he]:Fe}))},Le=()=>{if(X.current){const Te=ne.find(Fe=>Fe.id===X.current.columnId),Pe=Me[X.current.columnId]||Te?.width||p;Z?.(Te,Pe)}X.current=null,document.removeEventListener("mousemove",Ee),document.removeEventListener("mouseup",Le)};document.addEventListener("mousemove",Ee),document.addEventListener("mouseup",Le)},[ne,Me,p,Z]),Ae=t.useCallback(he=>{if(!he.sort)return;let ke="asc";Ne?.columnId===he.id&&(ke=Ne.direction==="asc"?"desc":"asc"),De({columnId:he.id,direction:ke}),Y?.(he,ke)},[Ne,Y]),Ie=t.useCallback(he=>{if(T||!te||!O)return;const{row:ke,column:ye}=O;let $e=ke,Ee=ye;switch(he.key){case"ArrowUp":$e=Math.max(0,ke-1);break;case"ArrowDown":$e=Math.min(re.length-1,ke+1);break;case"ArrowLeft":Ee=Math.max(0,ye-1);break;case"ArrowRight":Ee=Math.min(Q.length-1,ye+1);break;case"Tab":he.preventDefault(),he.shiftKey?(Ee=ye-1,Ee<0&&(Ee=Q.length-1,$e=Math.max(0,ke-1))):(Ee=ye+1,Ee>=Q.length&&(Ee=0,$e=Math.min(re.length-1,ke+1)));break;case"Enter":if(ce)we(),$e=Math.min(re.length-1,ke+1);else if(L){const Le=Q[ye];if(Le?.editable!==!1){fe({row:ke,col:ye}),Se(String(re[ke]?.[Le?.id]||""));return}}break;case"Escape":if(ce){fe(null),Se("");return}break;case"Home":he.ctrlKey&&($e=0),Ee=0;break;case"End":he.ctrlKey&&($e=re.length-1),Ee=Q.length-1;break;default:return}($e!==ke||Ee!==ye)&&(he.preventDefault(),R({row:$e,column:Ee}),g?.({row:$e,column:Ee}))},[T,te,O,re,Q,ce,L,we,g]),_e=t.useCallback((he,ke)=>{if(!O)return!1;const{row:ye,column:$e,endRow:Ee,endColumn:Le}=O;if(Ee!==void 0&&Le!==void 0){const Te=Math.min(ye,Ee),Pe=Math.max(ye,Ee),Fe=Math.min($e,Le),kt=Math.max($e,Le);return he>=Te&&he<=Pe&&ke>=Fe&&ke<=kt}return ye===he&&$e===ke},[O]),ze=t.useCallback((he,ke)=>{for(const ye of ue){if(ye.row===he&&ye.column===ke)return{rowspan:ye.rowspan,colspan:ye.colspan};if(ye.rowspan&&ye.colspan){const $e=ye.row+(ye.rowspan-1),Ee=Q.findIndex(Pe=>Pe.id===ye.column),Le=Ee+(ye.colspan-1),Te=Q.findIndex(Pe=>Pe.id===ke);if(he>=ye.row&&he<=$e&&Te>=Ee&&Te<=Le&&!(he===ye.row&&ke===ye.column))return{hidden:!0}}}return{}},[ue,Q]);t.useImperativeHandle(r,()=>({getSheets:()=>G.map(he=>he.name),showSheet:he=>{const ke=G.findIndex(ye=>ye.name===he);ke>=0&&be(ke)},getCurrentSheet:()=>G[ie]?.name||"",getData:()=>k,setData:he=>{o(he),de?.(he)},getColumns:()=>ne,setColumns:he=>M(he),getSelectedId:()=>O,select:(he,ke,ye,$e)=>{R({row:he,column:ke,endRow:ye,endColumn:$e}),g?.({row:he,column:ke,endRow:ye,endColumn:$e})},clearSelection:()=>{R(null),g?.(null)},getCellValue:(he,ke)=>k[he]?.[ke],setCellValue:(he,ke,ye)=>{const $e=[...k];$e[he]&&($e[he]={...$e[he],[ke]:ye},o($e))},addRow:(he,ke)=>{const ye=[...k];ke!==void 0?ye.splice(ke,0,he):ye.push(he),o(ye)},removeRow:he=>{const ke=[...k];ke.splice(he,1),o(ke)},refresh:()=>{o([...k])},getItem:he=>k[he],count:()=>k.length,showCell:(he,ke)=>{C.current?.querySelector(`[data-row="${he}"][data-col="${ke}"]`)?.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})},hideColumn:he=>{h(ke=>new Set([...Array.from(ke),he]))},showColumn:he=>{h(ke=>{const ye=new Set(ke);return ye.delete(he),ye})},isColumnVisible:he=>!ge.has(he),sort:(he,ke)=>{const ye=ne.find($e=>$e.id===he);if(ye){const $e=ke||(Ne?.columnId===he&&Ne?.direction==="asc"?"desc":"asc");De({columnId:he,direction:$e}),Y?.(ye,$e)}},filter:(he,ke,ye)=>{n({columnId:he,value:ke,compare:ye})},clearFilter:()=>{n(null)}}),[G,ie,k,ne,O,ge,Ne,be,de,g,Y]);const Be=N?N*D+W:void 0;return e.jsxs("div",{ref:C,id:l,"data-testid":i,className:`avakio-excel-viewer avakio-excel-viewer-theme-${c} ${H||""} ${T?"avakio-excel-viewer-disabled":""} ${f?"avakio-excel-viewer-grid-lines":""}`,tabIndex:te?0:-1,onKeyDown:Ie,children:[V&&G.length>1&&e.jsx("div",{className:"avakio-excel-viewer-toolbar",children:G.map((he,ke)=>e.jsx("button",{className:`avakio-excel-viewer-sheet-tab ${ke===ie?"active":""}`,onClick:()=>be(ke),disabled:T,children:he.name},he.name))}),e.jsx("div",{className:"avakio-excel-viewer-table-container",style:{maxHeight:Be},children:e.jsxs("table",{ref:d,className:"avakio-excel-viewer-table",children:[e.jsx("thead",{className:S?"avakio-excel-viewer-sticky-header":"",children:e.jsxs("tr",{style:{height:W},children:[ee&&e.jsx("th",{className:"avakio-excel-viewer-row-number-header",children:"#"}),Q.map((he,ke)=>e.jsxs("th",{className:`avakio-excel-viewer-header-cell ${he.css||""} ${he.sort?"sortable":""} ${Ne?.columnId===he.id?`sorted-${Ne.direction}`:""}`,style:{width:Me[he.id]||he.width||p,minWidth:he.minWidth,maxWidth:he.maxWidth,textAlign:he.align||"left"},onClick:()=>Ae(he),children:[e.jsx("span",{className:"avakio-excel-viewer-header-text",children:he.header||he.id}),he.sort&&Ne?.columnId===he.id&&e.jsx("span",{className:"avakio-excel-viewer-sort-icon",children:Ne.direction==="asc"?"▲":"▼"}),K&&e.jsx("div",{className:"avakio-excel-viewer-resize-handle",onMouseDown:ye=>xe(he.id,ye)})]},he.id))]})}),e.jsx("tbody",{children:re.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:Q.length+(ee?1:0),className:"avakio-excel-viewer-empty",children:"No data available"})}):re.map((he,ke)=>e.jsxs("tr",{style:{height:se[ke]||D},className:j==="row"&&O?.row===ke?"selected-row":"",children:[ee&&e.jsx("td",{className:"avakio-excel-viewer-row-number",children:ke+1}),Q.map((ye,$e)=>{const Ee=ze(ke,ye.id);if(Ee.hidden)return null;const Le=ce?.row===ke&&ce?.col===$e,Te=_e(ke,$e),Pe=he[ye.id];return e.jsx("td",{"data-row":ke,"data-col":ye.id,className:`avakio-excel-viewer-cell ${ye.css||""} ${Te?"selected":""} ${Le?"editing":""}`,style:{textAlign:ye.align||"left",width:Me[ye.id]||ye.width||p},rowSpan:Ee.rowspan,colSpan:Ee.colspan,onClick:Fe=>B(ke,$e,Fe),onDoubleClick:()=>ve(ke,$e),children:Le?e.jsx("input",{type:ye.editor==="number"?"number":"text",className:"avakio-excel-viewer-editor",value:me,onChange:Fe=>Se(Fe.target.value),onBlur:we,onKeyDown:Fe=>{Fe.key==="Enter"?we():Fe.key==="Escape"&&(fe(null),Se("")),Fe.stopPropagation()},autoFocus:!0}):ye.template?ye.template(he,ye):e.jsx("span",{className:"avakio-excel-viewer-cell-text",children:Pe!=null?String(Pe):""})},ye.id)})]},ke))})]})})]})});ca.displayName="AvakioExcelViewer";const ps={isRequired:s=>s==null?!1:typeof s=="string"?s.trim().length>0:Array.isArray(s)?s.length>0:!0,isEmail:s=>s?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(s)):!0,isNumber:s=>!s&&s!==0?!0:!isNaN(Number(s)),isPositive:s=>{if(!s&&s!==0)return!0;const r=Number(s);return!isNaN(r)&&r>0},isInteger:s=>!s&&s!==0?!0:Number.isInteger(Number(s)),pattern:s=>r=>r?s.test(String(r)):!0,minLength:s=>r=>r?String(r).length>=s:!0,maxLength:s=>r=>r?String(r).length<=s:!0,minValue:s=>r=>!r&&r!==0?!0:Number(r)>=s,maxValue:s=>r=>!r&&r!==0?!0:Number(r)<=s,custom:s=>s},da=t.createContext(null),ua=()=>t.useContext(da);function ks(s,r,l){const i=r.split("."),c={...s};let m=c;for(let w=0;w<i.length-1;w++){const A=i[w];m[A]=m[A]?{...m[A]}:{},m=m[A]}return m[i[i.length-1]]=l,c}function bs(s,r){return r.split(".").reduce((l,i)=>l?.[i],s)}function dt(s,r=""){const l={};for(const i in s){const c=r?`${r}.${i}`:i;s[i]&&typeof s[i]=="object"&&!Array.isArray(s[i])&&!(s[i]instanceof Date)?Object.assign(l,dt(s[i],c)):l[c]=s[i]}return l}const ha=t.forwardRef((s,r)=>{const{children:l,elements:i,values:c={},defaultValues:m,rules:w={},complexData:A=!1,autoHeight:z=!1,borderless:V=!1,disabled:p=!1,width:D,height:W,minWidth:ee,maxWidth:K,minHeight:_,maxHeight:L,padding:J,paddingX:j,paddingY:q,margin:E,scroll:f,type:te="form",theme:S,className:F,style:$,visibleBatch:T,onChange:a,onValidation:P,onValidationError:N,onValidationSuccess:H,onSubmit:ue,onValues:le}=s,u=t.useRef(null),v=t.useRef(new Map),[g,I]=t.useState(()=>A?dt(c):{...c}),[Z,b]=t.useState(()=>{const y=m||c;return A?dt(y):{...y}}),[Y,de]=t.useState({}),[G,U]=t.useState(p),[ie,ae]=t.useState(!1),[ne,M]=t.useState(T);t.useEffect(()=>{U(p)},[p]);const k=t.useCallback((y,Q)=>{I(re=>{const be=A?ks(re,y,Q):{...re,[y]:Q};return a?.(y,Q,be),be}),ae(!0),de(re=>{if(re[y]){const be={...re};return delete be[y],be}return re})},[A,a]),o=t.useCallback((y,Q)=>{Q&&v.current.set(y,Q)},[]),O=t.useCallback(y=>{v.current.delete(y)},[]),R=t.useCallback((y,Q)=>{const re=w[y];if(!re)return;const be=Array.isArray(re)?re:[re];for(const B of be){const ve=B(Q,y,g);if(ve===!1)return"Invalid value";if(typeof ve=="string")return ve}},[w,g]),ce=t.useCallback(()=>{const y={};let Q=!0;for(const re in w){const be=A?bs(g,re):g[re],B=R(re,be);B?(y[re]=B,Q=!1,N?.(re,B)):H?.(re)}return de(y),P?.(Q,y),Q},[w,g,A,R,P,N,H]),fe=t.useCallback(()=>{if(!A)return{...g};const y={};for(const Q in g)if(Q.includes(".")){const re=Q.split(".");let be=y;for(let B=0;B<re.length-1;B++)be[re[B]]||(be[re[B]]={}),be=be[re[B]];be[re[re.length-1]]=g[Q]}else y[Q]=g[Q];return y},[g,A]),me=t.useCallback((y,Q=!0)=>{const re=A?dt(y):{...y};I(re),Q&&(b(re),ae(!1)),le?.(y)},[A,le]),Se=t.useCallback(()=>{const y={};for(const Q in g)g[Q]===Z[Q]&&(y[Q]=g[Q]);return y},[g,Z]),Ne=t.useCallback(()=>{const y={};for(const Q in g)g[Q]!==Z[Q]&&(y[Q]=g[Q]);return y},[g,Z]),De=t.useCallback(()=>{for(const y in g)if(g[y]!==Z[y])return!0;return!1},[g,Z]),Me=t.useCallback(()=>{de({})},[]),x=t.useCallback((y,Q="Invalid value")=>{de(re=>({...re,[y]:Q}))},[]),se=t.useCallback(()=>{I({}),de({}),ae(!1)},[]),pe=t.useCallback(y=>{if(y){const Q=v.current.get(y);Q&&(Q.querySelector("input, textarea, select, [tabindex]")||Q).focus()}else{const Q=v.current.values().next().value;Q&&(Q.querySelector("input, textarea, select, [tabindex]")||Q).focus()}},[]),ge=t.useCallback(y=>{y.preventDefault(),ce()&&ue?.(fe())},[ce,ue,fe]),h=t.useCallback(y=>{if(y.key==="Enter"&&!y.shiftKey&&y.target.tagName!=="TEXTAREA"){const re=u.current;re&&(re.querySelector('button[type="submit"]')||(y.preventDefault(),ce()&&ue?.(fe())))}},[ce,ue,fe]);t.useImperativeHandle(r,()=>({getNode:()=>u.current,getValues:fe,setValues:me,getCleanValues:Se,getDirtyValues:Ne,isDirty:De,setDirty:ae,validate:ce,clearValidation:Me,markInvalid:x,clear:se,focus:pe,isEnabled:()=>!G,enable:()=>U(!1),disable:()=>U(!0),showBatch:M,getErrors:()=>({...Y})}),[fe,me,Se,Ne,De,ce,Me,x,se,pe,G,Y]);const oe={...$,width:typeof D=="number"?`${D}px`:D,height:z?"auto":typeof W=="number"?`${W}px`:W,minWidth:typeof ee=="number"?`${ee}px`:ee,maxWidth:typeof K=="number"?`${K}px`:K,minHeight:typeof _=="number"?`${_}px`:_,maxHeight:typeof L=="number"?`${L}px`:L};if(J!==void 0&&(oe.padding=typeof J=="number"?`${J}px`:J),j!==void 0){const y=typeof j=="number"?`${j}px`:j;oe.paddingLeft=y,oe.paddingRight=y}if(q!==void 0){const y=typeof q=="number"?`${q}px`:q;oe.paddingTop=y,oe.paddingBottom=y}const n=["avakio-form",`avakio-form--type-${te}`,V&&"avakio-form--borderless",G&&"avakio-form--disabled",f===!0&&"avakio-form--scroll",f==="x"&&"avakio-form--scroll-x",f==="y"&&"avakio-form--scroll-y",f==="xy"&&"avakio-form--scroll",S&&`avakio-form--theme-${S}`,F].filter(Boolean).join(" "),C={values:g,errors:Y,disabled:G,onChange:k,registerField:o,unregisterField:O},d=(y,Q)=>{if(y.hidden||y.batch&&ne&&y.batch!==ne)return null;if(y.type==="section")return e.jsx("div",{className:"avakio-form__section",children:e.jsx("div",{className:"avakio-form__section-header",children:y.label})},Q);if(y.cols){const re={};return y.margin!==void 0&&(re.gap=typeof y.margin=="number"?`${y.margin}px`:y.margin),e.jsx("div",{className:`avakio-form__cols ${y.css||""}`,style:re,children:y.cols.map((be,B)=>d(be,B))},Q)}if(y.rows){const re={};return y.margin!==void 0&&(re.gap=typeof y.margin=="number"?`${y.margin}px`:y.margin),e.jsx("div",{className:`avakio-form__rows ${y.css||""}`,style:re,children:y.rows.map((be,B)=>d(be,B))},Q)}if(y.view){const re={};return y.width!==void 0&&(re.width=typeof y.width=="number"?`${y.width}px`:y.width),y.height!==void 0&&(re.height=typeof y.height=="number"?`${y.height}px`:y.height),y.gravity!==void 0&&(re.flex=y.gravity),y.padding!==void 0&&(re.padding=typeof y.padding=="number"?`${y.padding}px`:y.padding),e.jsx("div",{className:`avakio-form__element ${y.css||""}`,style:re,children:y.view},Q)}return null},X={};return E!==void 0&&(X.gap=typeof E=="number"?`${E}px`:E),e.jsx(da.Provider,{value:C,children:e.jsx("form",{ref:u,className:n,style:oe,onSubmit:ge,onKeyDown:h,"data-admin-theme":S,children:e.jsx("div",{className:"avakio-form__content",style:X,children:i?i.map((y,Q)=>d(y,Q)):l})})})});ha.displayName="AvakioForm";const gs=({name:s,children:r,render:l})=>{const i=ua(),c=t.useRef(null);if(t.useEffect(()=>{if(i&&c.current)return i.registerField(s,c.current),()=>i.unregisterField(s)},[i,s]),!i)return e.jsx("div",{ref:c,className:"avakio-form__field",children:r});const{values:m,errors:w,disabled:A,onChange:z}=i,V=m[s],p=w[s],D=ee=>{z(s,ee)};if(l)return e.jsx("div",{ref:c,className:"avakio-form__field",children:l({value:V,error:p,onChange:D,disabled:A})});const W=t.Children.map(r,ee=>t.isValidElement(ee)?t.cloneElement(ee,{value:V,error:p,onChange:D,disabled:A||ee.props.disabled,invalid:!!p,invalidMessage:p}):ee);return e.jsx("div",{ref:c,className:"avakio-form__field",children:W})};function ys({value:s,defaultValue:r,min:l=0,max:i=100,label:c,subLabel:m,size:w="md",thickness:A,prefix:z="",suffix:V="",formatValue:p,showValue:D=!0,showMinMax:W=!0,trackColor:ee,color:K,target:_,className:L,style:J,id:j,testId:q}){const E=i-l===0?1:i-l,te=Math.min(Math.max(s??r??l,l),i),S=(te-l)/E*100,F=A??(w==="sm"?10:w==="lg"?14:12),$=88,T=2*Math.PI*$,a=T*(1-S/100),P=t.useMemo(()=>{if(_==null)return null;const u=(Math.min(Math.max(_,l),i)-l)/E*100/100*2*Math.PI-Math.PI/2,v=100+$*Math.cos(u),g=100+$*Math.sin(u);return{x:v,y:g}},[_,l,i,E]),N=t.useMemo(()=>{if(!D)return"";const le=p?p(te):te.toString();return`${z}${le}${V}`},[te,p,z,V,D]),H=["avakio-gage",`avakio-gage-${w}`,L].filter(Boolean).join(" "),ue={...J,...K?{"--gg-fill":K}:null,...ee?{"--gg-track":ee}:null};return e.jsxs("div",{id:j,"data-testid":q,className:H,style:ue,"data-percent":S.toFixed(1),children:[c&&e.jsx("div",{className:"avakio-gage-label",children:c}),e.jsxs("div",{className:"avakio-gage-shell",children:[e.jsxs("svg",{viewBox:"0 0 200 200",role:"img","aria-label":c?`${c} ${N}`:N,children:[e.jsx("circle",{className:"avakio-gage-track",cx:"100",cy:"100",r:$,strokeWidth:F}),e.jsx("circle",{className:"avakio-gage-value",cx:"100",cy:"100",r:$,strokeWidth:F,strokeDasharray:`${T} ${T}`,strokeDashoffset:a}),P&&e.jsx("circle",{className:"avakio-gage-target",cx:P.x,cy:P.y,r:6,strokeWidth:2})]}),D&&e.jsxs("div",{className:"avakio-gage-center",children:[e.jsx("div",{className:"avakio-gage-value-text",children:N}),m&&e.jsx("div",{className:"avakio-gage-sublabel",children:m})]})]}),W&&e.jsxs("div",{className:"avakio-gage-minmax",children:[e.jsx("span",{children:l}),e.jsx("span",{children:i})]})]})}const ms={},ws=["material","flat","compact","dark","ocean","sunset"],fa="avakio-googlemaps-script";function Ns(s){return typeof window>"u"?Promise.reject(new Error("window not available")):window.google?.maps?Promise.resolve(window.google):(window.__avakioGooglePromise||(window.__avakioGooglePromise=new Promise((r,l)=>{const i=document.getElementById(fa);if(i){i.addEventListener("load",()=>r(window.google)),i.addEventListener("error",l);return}const c=document.createElement("script");c.id=fa,c.src=`https://maps.googleapis.com/maps/api/js?key=${encodeURIComponent(s)}`,c.async=!0,c.defer=!0,c.onload=()=>r(window.google),c.onerror=l,document.head.appendChild(c)})),window.__avakioGooglePromise)}function xs({center:s,zoom:r=12,markers:l=[],mapType:i="roadmap",height:c=360,className:m,style:w,apiKey:A,theme:z,id:V,testId:p}){const D=t.useRef(null),W=t.useRef(null),ee=t.useRef([]),K=A??(typeof{url:typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:ut&&ut.tagName.toUpperCase()==="SCRIPT"&&ut.src||new URL("avakio-ui-components.umd.cjs",document.baseURI).href}<"u"?ms?.VITE_GOOGLE_MAPS_API_KEY:void 0)??null,_=t.useMemo(()=>{const J=s.lat.toFixed(6),j=s.lng.toFixed(6);return`https://www.google.com/maps?q=${J},${j}&z=${r??12}&output=embed`},[s.lat,s.lng,r]);t.useEffect(()=>{if(!K||typeof window>"u")return;let J=!1;return Ns(K).then(j=>{J||!D.current||(W.current?W.current.setOptions({center:s,zoom:r,mapTypeId:i}):W.current=new j.maps.Map(D.current,{center:s,zoom:r,mapTypeId:i,streetViewControl:!1,fullscreenControl:!1}),ee.current.forEach(q=>q.setMap(null)),ee.current=l.map(q=>new j.maps.Marker({position:q.position,title:q.label,map:W.current})))}).catch(()=>{}),()=>{J=!0,ee.current.forEach(j=>j.setMap(null)),ee.current=[]}},[K,s.lat,s.lng,r,i,l]);const L=typeof c=="number"?`${c}px`:c;return e.jsxs("div",{id:V,"data-testid":p,className:["avakio-googlemap",m].filter(Boolean).join(" "),style:{...w,"--agm-height":L},"data-admin-theme":z,children:[K?e.jsx("div",{ref:D,"data-testid":"avakio-googlemap-interactive",className:"avakio-googlemap-canvas"}):e.jsx("iframe",{"data-testid":"avakio-googlemap-embed",title:"Google Map",src:_,className:"avakio-googlemap-embed",allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"}),l.length>0&&e.jsx("div",{className:"avakio-googlemap-markerlist","aria-label":"Markers",children:l.map((J,j)=>e.jsxs("div",{className:"avakio-googlemap-markeritem",children:[e.jsx("span",{className:"avakio-googlemap-markerbadge",children:j+1}),e.jsxs("div",{className:"avakio-googlemap-markertext",children:[e.jsx("strong",{children:J.label??`Marker ${j+1}`}),e.jsxs("span",{children:[J.position.lat,", ",J.position.lng]})]})]},J.id??j))})]})}function Ss({data:s,value:r,defaultValue:l,onSelect:i,onChange:c,onNavigate:m,templateItem:w,templateGroup:A,templateBack:z,select:V=!0,animate:p=!0,animationDuration:D=250,showBack:W=!0,backLabel:ee="Back",width:K,height:_,scroll:L=!0,className:J,style:j,id:q,testId:E}){const[f,te]=t.useState([]),[S,F]=t.useState(s),[$,T]=t.useState(l??null),[a,P]=t.useState(!1),[N,H]=t.useState("forward"),ue=t.useRef(null),le=r!==void 0?r:$,u=t.useCallback(U=>{let ie=s;for(const ae of U){const ne=ie.find(M=>M.id===ae);if(ne?.data)ie=ne.data;else return[]}return ie},[s]),v=t.useCallback(()=>{if(f.length===0)return null;let U=s,ie=null;for(const ae of f)ie=U.find(ne=>ne.id===ae)||null,ie?.data&&(U=ie.data);return ie},[s,f]),g=t.useCallback(U=>{if(!U.data||U.disabled)return;p&&(P(!0),H("forward"));const ie=[...f,U.id];te(ie),setTimeout(()=>{F(U.data),P(!1),m?.({parents:ie,branch:U.data})},p?D:0)},[f,p,D,m]),I=t.useCallback(()=>{if(f.length===0)return;p&&(P(!0),H("backward"));const U=f.slice(0,-1);te(U),setTimeout(()=>{const ie=u(U);F(ie),P(!1),m?.({parents:U,branch:ie})},p?D:0)},[f,p,D,u,m]),Z=t.useCallback(U=>{U.disabled||(U.data&&U.data.length>0?g(U):V&&(T(U.id),i?.(U),c?.(U.id,U)))},[g,V,i,c]);t.useCallback(()=>({parents:f,branch:S}),[f,S]),t.useCallback(U=>{const ie=(ne,M,k)=>{for(const o of ne){if(o.id===M)return k;if(o.data){const O=ie(o.data,M,[...k,o.id]);if(O)return O}}return null},ae=ie(s,U,[]);if(ae){te(ae);const ne=u(ae);F(ne)}},[s,u]),t.useEffect(()=>{te([]),F(s)},[s]);const b=t.useCallback(U=>{const ie=U.data&&U.data.length>0,ae=le===U.id,ne=U.data?.length||0,M=["avakio-grouplist-item",ie&&"avakio-grouplist-item-group",ae&&"avakio-grouplist-item-selected",U.disabled&&"avakio-grouplist-item-disabled",U.className].filter(Boolean).join(" ");return e.jsxs("div",{className:M,onClick:()=>Z(U),role:ie?"button":"option","aria-selected":ae,"aria-disabled":U.disabled,tabIndex:U.disabled?-1:0,onKeyDown:k=>{(k.key==="Enter"||k.key===" ")&&(k.preventDefault(),Z(U))},children:[e.jsxs("div",{className:"avakio-grouplist-item-content",children:[U.icon&&e.jsx("span",{className:"avakio-grouplist-item-icon",children:U.icon}),e.jsx("span",{className:"avakio-grouplist-item-value",children:ie?A?A(U,ne):U.value:w?w(U):U.value}),ie&&e.jsxs("span",{className:"avakio-grouplist-item-count",children:["(",ne,")"]})]}),ie&&e.jsx(je,{className:"avakio-grouplist-item-arrow",size:18})]},U.id)},[le,w,A,Z]),Y=t.useCallback(()=>{if(!W||f.length===0)return null;const U=v(),ie=S.length;return e.jsxs("div",{className:"avakio-grouplist-back",onClick:I,role:"button",tabIndex:0,onKeyDown:ae=>{(ae.key==="Enter"||ae.key===" ")&&(ae.preventDefault(),I())},children:[e.jsx(qe,{className:"avakio-grouplist-back-arrow",size:18}),e.jsx("span",{className:"avakio-grouplist-back-content",children:U&&z?z(U,ie):U?.value||ee}),e.jsxs("span",{className:"avakio-grouplist-back-count",children:["(",ie,")"]})]})},[W,f,S,v,I,z,ee]),de=t.useMemo(()=>["avakio-grouplist",a&&`avakio-grouplist-animating avakio-grouplist-${N}`,L&&"avakio-grouplist-scroll",J].filter(Boolean).join(" "),[a,N,L,J]),G=t.useMemo(()=>({...j,...K!==void 0?{width:typeof K=="number"?`${K}px`:K}:{},..._!==void 0?{height:typeof _=="number"?`${_}px`:_}:{},...p?{"--grouplist-animation-duration":`${D}ms`}:{}}),[j,K,_,p,D]);return e.jsxs("div",{ref:ue,id:q,"data-testid":E,className:de,style:G,role:"listbox","aria-label":"Group list",children:[Y(),e.jsx("div",{className:"avakio-grouplist-items",children:S.map(b)})]})}const va=t.forwardRef((s,r)=>{const{id:l,testId:i,steps:c,theme:m="material",prevButton:w=!0,nextButton:A=!0,endLabel:z="End Tour",stepTimeout:V=0,visible:p,onStart:D,onBeforeStart:W,onAfterStart:ee,onEnd:K,onSkip:_,onNext:L,onPrevious:J,onStepChange:j}=s,[q,E]=t.useState(c),[f,te]=t.useState(0),[S,F]=t.useState(!1),[$,T]=t.useState(null),[a,P]=t.useState({top:0,left:0}),N=t.useRef(null),H=t.useRef(null);t.useEffect(()=>{p!==void 0&&F(p)},[p]),t.useEffect(()=>{E(c)},[c]);const ue=t.useCallback(k=>{if(!k)return null;let o=document.querySelector(k);return o||(o=document.getElementById(k),o)||!k.startsWith("#")&&!k.startsWith(".")&&(o=document.querySelector(`#${k}`),o)?o:null},[]),le=t.useCallback(()=>{if(!S||f>=q.length){T(null);return}const k=q[f],o=ue(k.el);if(o){const O=o.getBoundingClientRect(),R=k.padding||8,[ce,fe,me,Se]=Array.isArray(R)?R:[R,R,R,R];T(new DOMRect(O.left-Se+window.scrollX,O.top-ce+window.scrollY,O.width+Se+fe,O.height+ce+me))}else T(null)},[S,f,q,ue]),u=t.useCallback(()=>{if(!$||!N.current)return;const o=N.current.getBoundingClientRect(),O=q[f],R=window.innerWidth,ce=window.innerHeight;let fe=0,me=0;const Se=O.position||"auto",Ne=window.scrollY,De=window.scrollX,Me=$.top-Ne,x=$.left-De,se=Me+$.height,pe=x+$.width,ge=16;if(Se==="auto"){const h=ce-se,oe=Me,n=R-pe;h>=o.height+ge?(fe=$.top+$.height+ge,me=$.left+($.width-o.width)/2):oe>=o.height+ge?(fe=$.top-o.height-ge,me=$.left+($.width-o.width)/2):n>=o.width+ge?(fe=$.top+($.height-o.height)/2,me=$.left+$.width+ge):(fe=$.top+($.height-o.height)/2,me=$.left-o.width-ge)}else switch(Se){case"bottom":fe=$.top+$.height+ge,me=$.left+($.width-o.width)/2;break;case"top":fe=$.top-o.height-ge,me=$.left+($.width-o.width)/2;break;case"right":fe=$.top+($.height-o.height)/2,me=$.left+$.width+ge;break;case"left":fe=$.top+($.height-o.height)/2,me=$.left-o.width-ge;break}O.top!==void 0&&(fe=O.top+Ne),O.left!==void 0&&(me=O.left+De),fe=Math.max(Ne+16,Math.min(fe,Ne+ce-o.height-16)),me=Math.max(De+16,Math.min(me,De+R-o.width-16)),P({top:fe,left:me})},[$,f,q]);t.useEffect(()=>{le()},[le]),t.useEffect(()=>{$&&requestAnimationFrame(()=>{u()})},[$,u]),t.useEffect(()=>{if(!S)return;const k=()=>{le()};return window.addEventListener("resize",k),window.addEventListener("scroll",k,!0),()=>{window.removeEventListener("resize",k),window.removeEventListener("scroll",k,!0)}},[S,le]);const v=t.useCallback(()=>{if(f>=q.length-1)K?.(f+1),F(!1),te(0);else{const k=f+1;L?.(f+1),j?.(k+1),te(k)}},[f,q.length,K,L,j]);t.useEffect(()=>{if(!S||f>=q.length)return;const k=q[f];if(k.event==="none"||!k.event)return;const o=k.eventEl||k.el,O=ue(o);if(!O)return;const R=()=>{k.event==="click"&&v()},ce=fe=>{k.event==="enter"&&fe.key==="Enter"&&v()};return k.event==="click"?O.addEventListener("click",R,!0):k.event==="enter"&&O.addEventListener("keydown",ce),()=>{O.removeEventListener("click",R,!0),O.removeEventListener("keydown",ce)}},[S,f,q,ue,v]),t.useEffect(()=>{if(!(!S||V<=0||f>=q.length))return H.current=setTimeout(()=>{v()},V),()=>{H.current&&clearTimeout(H.current)}},[S,V,f,q.length,v]),t.useEffect(()=>{if(!S)return;const k=o=>{o.key==="Escape"&&I()};return document.addEventListener("keydown",k),()=>document.removeEventListener("keydown",k)},[S]);const g=t.useCallback(()=>{if(f>0){const k=f-1;J?.(f+1),j?.(k+1),te(k)}},[f,J,j]),I=t.useCallback(()=>{_?.(f+1),F(!1),te(0)},[f,_]),Z=t.useCallback(()=>{W?.()!==!1&&(D?.(),te(0),F(!0),ee?.())},[W,D,ee]),b=t.useCallback(()=>{K?.(f+1),F(!1),te(0)},[f,K]),Y=t.useCallback(k=>{const o=k!==void 0?Math.max(1,Math.min(k,q.length))-1:0;te(o),F(!0),j?.(o+1)},[q.length,j]);if(t.useImperativeHandle(r,()=>({start:Z,end:b,resume:Y,getCurrentStep:()=>f+1,getSteps:()=>[...q],setSteps:k=>E(k),show:()=>F(!0),hide:()=>F(!1),isVisible:()=>S}),[Z,b,Y,f,q,S]),!S||q.length===0)return null;const de=q[f],G=f===0,U=f===q.length-1,ie=typeof w=="string"?w:"Previous",ae=typeof A=="string"?A:U?z:"Next",ne=w!==!1&&!G,M=A!==!1;return bt.createPortal(e.jsxs("div",{id:l,"data-testid":i,className:`avakio-hint avakio-hint-theme-${m}`,children:[e.jsx("div",{className:"avakio-hint-overlay",children:e.jsxs("svg",{className:"avakio-hint-mask",width:"100%",height:"100%",children:[e.jsx("defs",{children:e.jsxs("mask",{id:`avakio-hint-mask-${l||"default"}`,children:[e.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"white"}),$&&e.jsx("rect",{x:$.left,y:$.top,width:$.width,height:$.height,rx:"8",ry:"8",fill:"black"})]})}),e.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"rgba(0, 0, 0, 0.5)",mask:`url(#avakio-hint-mask-${l||"default"})`})]})}),$&&e.jsx("div",{className:"avakio-hint-highlight",style:{top:$.top,left:$.left,width:$.width,height:$.height}}),e.jsxs("div",{ref:N,className:"avakio-hint-popup",style:{top:a.top,left:a.left},children:[e.jsx("button",{className:"avakio-hint-close",onClick:I,"aria-label":"Close hint",children:"×"}),de.title&&e.jsx("div",{className:"avakio-hint-title",children:de.title}),de.text&&e.jsx("div",{className:"avakio-hint-text",children:(typeof de.text=="string",de.text)}),e.jsxs("div",{className:"avakio-hint-footer",children:[e.jsxs("div",{className:"avakio-hint-step-indicator",children:[f+1," / ",q.length]}),e.jsxs("div",{className:"avakio-hint-buttons",children:[ne&&e.jsx("button",{className:"avakio-hint-btn avakio-hint-btn-prev",onClick:g,children:ie}),M&&e.jsx("button",{className:"avakio-hint-btn avakio-hint-btn-next",onClick:v,children:ae})]})]})]})]}),document.body)});va.displayName="AvakioHint";function pt({children:s,className:r="",css:l,width:i,height:c,minWidth:m,minHeight:w,maxWidth:A,maxHeight:z,borderless:V=!1,hidden:p=!1,disabled:D=!1,gravity:W,id:ee,testId:K,animate:_=!1,padding:L,theme:J="material",type:j="clean",onShow:q,onHide:E,onResize:f,onClick:te,onFocus:S,onBlur:F,onKeyPress:$}){const T=t.useRef(null),[a,P]=t.useState(!p),[N,H]=t.useState(!D),[ue,le]=t.useState({width:0,height:0});t.useEffect(()=>{P(!p)},[p]),t.useEffect(()=>{H(!D)},[D]),t.useEffect(()=>{if(!T.current)return;const de=new ResizeObserver(G=>{for(const U of G){const{width:ie,height:ae}=U.contentRect;le({width:ie,height:ae}),f&&f(ie,ae)}});return de.observe(T.current),()=>{de.disconnect()}},[f]),t.useEffect(()=>{a&&q?q():!a&&E&&E()},[a,q,E]),t.useCallback(()=>{P(!0)},[]),t.useCallback(()=>{P(!1)},[]),t.useCallback(()=>{H(!0)},[]),t.useCallback(()=>{H(!1)},[]),t.useCallback((de,G)=>{T.current&&(de&&(T.current.style.width=typeof de=="number"?`${de}px`:de),G&&(T.current.style.height=typeof G=="number"?`${G}px`:G))},[]);const u={...l&&typeof l=="object"&&!Array.isArray(l)?l:{},...typeof i<"u"&&{width:typeof i=="number"?`${i}px`:i},...typeof c<"u"&&{height:typeof c=="number"?`${c}px`:c},...typeof m<"u"&&{minWidth:typeof m=="number"?`${m}px`:m},...typeof w<"u"&&{minHeight:typeof w=="number"?`${w}px`:w},...typeof A<"u"&&{maxWidth:typeof A=="number"?`${A}px`:A},...typeof z<"u"&&{maxHeight:typeof z=="number"?`${z}px`:z},...typeof L<"u"&&{padding:Array.isArray(L)?`${L[0]}px ${L[1]}px ${L[2]}px ${L[3]}px`:typeof L=="number"?`${L}px`:L},...typeof W<"u"&&{flex:W}},v=()=>_?_===!0||_==="fade"?"avakio-view-animate-fade":_==="slide"?"avakio-view-animate-slide":_==="flip"?"avakio-view-animate-flip":"":"",g=["avakio-view",`avakio-view-theme-${J}`,j?`avakio-view-type-${j}`:"",V?"avakio-view-borderless":"",a?"":"avakio-view-hidden",N?"":"avakio-view-disabled",v(),r].filter(Boolean).join(" "),I=t.useCallback(()=>{S&&N&&S()},[S,N]),Z=t.useCallback(()=>{F&&N&&F()},[F,N]),b=t.useCallback(de=>{te&&N&&te(de)},[te,N]),Y=t.useCallback(de=>{$&&N&&$(de)},[$,N]);return a?e.jsx("div",{ref:T,id:ee,"data-testid":K,className:g,style:u,onClick:b,onFocus:I,onBlur:Z,onKeyDown:Y,tabIndex:N?0:-1,role:"region","aria-disabled":!N,children:s}):null}const pa=t.forwardRef((s,r)=>{const l=t.useRef(null),[i,c]=t.useState(!s.hidden),[m,w]=t.useState(!s.disabled);return t.useImperativeHandle(r,()=>({show:()=>c(!0),hide:()=>c(!1),enable:()=>w(!0),disable:()=>w(!1),resize:(A,z)=>{l.current&&(A&&(l.current.style.width=typeof A=="number"?`${A}px`:A),z&&(l.current.style.height=typeof z=="number"?`${z}px`:z))},getNode:()=>l.current,isVisible:()=>i,isEnabled:()=>m})),e.jsx(pt,{...s,hidden:!i,disabled:!m})});pa.displayName="AvakioViewWithRef";const ka=({id:s,testId:r,showLabel:l=!0,showTitle:i=!0,showSubTitle:c=!0,label:m="",title:w="",subTitle:A="",theme:z,className:V="",style:p={},isSticky:D=!0})=>{const ee={style:D?{position:"sticky",top:0,zIndex:1e3}:{}};return z&&(ee["data-admin-theme"]=z),e.jsx("div",{...ee,children:e.jsx(pt,{theme:z,type:"header",borderless:!1,id:s,testId:r,css:{...p,display:"flex",justifyContent:"flex-start",alignItems:"flex-start",background:"var(--view-focus-color)",color:"#ffffff"},className:V,children:e.jsxs("div",{style:{textAlign:"left"},children:[l&&m&&e.jsx("div",{style:{margin:0,marginBottom:"8px",fontSize:"14px",fontWeight:500,lineHeight:"1.5",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',color:"inherit"},children:m}),i&&w&&e.jsx("h1",{style:{margin:0,fontSize:"24px",fontWeight:600,letterSpacing:"0.01em",lineHeight:"1.2",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',WebkitFontSmoothing:"antialiased",color:"inherit"},children:w}),c&&A&&e.jsx("p",{style:{margin:0,marginTop:"8px",fontSize:"14px",fontWeight:500,lineHeight:"1.5",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',color:"inherit"},children:A})]})})})};ka.displayName="AvakioViewHeader";function Cs(s){return{left:"right",right:"left",top:"bottom",bottom:"top"}[s]}const ba=t.forwardRef(({id:s,testId:r,cells:l,activeView:i,animate:c=!0,keepViews:m=!1,fitBiggest:w=!1,theme:A="material",className:z,css:V,width:p,height:D,onViewChange:W,onViewShow:ee,onBeforeBack:K},_)=>{let L="slide",J=300,j="left",q="horizontal";typeof c=="object"&&c!==null?(L=c.type??"slide",J=c.duration??300,j=c.direction??"left",q=c.flipDirection??"horizontal"):typeof c=="boolean"&&(L=c?"slide":"none"),["slide","flip","none"].includes(L)||(L="slide"),J=Math.max(J,200);const E={type:L,duration:J,direction:j,flipDirection:q},[f,te]=t.useState(l),[S,F]=t.useState(i||l[0]?.id||""),[$,T]=t.useState(null),[a,P]=t.useState(!1),[N,H]=t.useState(E.direction||"left"),[ue,le]=t.useState(!1),u=t.useRef([i||l[0]?.id||""]),v=t.useRef(null),g=t.useRef(l),I=t.useRef(i||l[0]?.id||""),Z=t.useRef(!1),b=t.useRef(null),Y=t.useRef(E);t.useEffect(()=>{Y.current=E},[E.type,E.direction,E.duration]),t.useEffect(()=>{te(l),g.current=l},[l]),t.useEffect(()=>{g.current=f},[f]),t.useEffect(()=>{I.current=S},[S]),t.useEffect(()=>()=>{b.current&&clearTimeout(b.current)},[]);const de=(M,k)=>{const o=I.current;if(M===o||Z.current||!g.current.find(R=>R.id===M))return;const O=o;b.current&&clearTimeout(b.current),u.current.push(M),H(k),T(O),F(M),I.current=M,P(!0),Z.current=!0,W?.(M,O),ee?.(M),b.current=setTimeout(()=>{P(!1),Z.current=!1,T(null)},J)};t.useImperativeHandle(_,()=>({getValue:()=>I.current,getActiveId:()=>I.current,setValue:M=>{de(M,Y.current.direction||"left")},back:()=>{if(u.current.length<=1)return!1;const M=I.current;if(K?.(M)===!1)return!1;u.current.pop();const o=u.current[u.current.length-1];if(o){b.current&&clearTimeout(b.current);const O=M,R=Cs(Y.current.direction||"left");return H(R),T(O),F(o),I.current=o,P(!0),Z.current=!0,W?.(o,O),ee?.(o),b.current=setTimeout(()=>{P(!1),Z.current=!1,T(null)},J),!0}return!1},addView:(M,k)=>{if(!g.current.find(o=>o.id===M.id)){if(k!==void 0){const o=[...g.current];o.splice(k,0,M),g.current=o}else g.current=[...g.current,M];te([...g.current])}},removeView:M=>{if(M===I.current)return!1;const k=g.current.filter(o=>o.id!==M);return g.current=k,te(k),u.current=u.current.filter(o=>o!==M),!0},getViews:()=>g.current.map(M=>M.id),hasView:M=>g.current.some(k=>k.id===M),getHistory:()=>[...u.current],clearHistory:()=>{u.current=[I.current]},show:()=>le(!1),hide:()=>le(!0),isVisible:()=>!ue}));const G=["avakio-multiview",`avakio-multiview-theme-${A}`,`avakio-multiview-animate-${E.type}`,E.type==="flip"&&`avakio-multiview-flip-${E.flipDirection}`,w&&"avakio-multiview-fit-biggest",a&&"avakio-multiview-animating",ue&&"avakio-multiview-hidden",z].filter(Boolean).join(" "),U={...V&&typeof V=="object"&&!Array.isArray(V)?V:{},width:p,height:D,"--animation-duration":`${J}ms`},ie=g.current,ae=S,ne=m?ie:ie.filter(M=>M.id===ae||a&&M.id===$);return e.jsx("div",{ref:v,id:s,"data-testid":r,className:G,style:U,children:e.jsx("div",{className:"avakio-multiview-cells",children:ne.map(M=>{const k=M.id===ae,o=a&&M.id===$,O=a&&k,R=["avakio-multiview-cell",k&&!O&&"avakio-multiview-cell-active",O&&`avakio-multiview-cell-entering-${N}`,o&&`avakio-multiview-cell-leaving-${N}`,!k&&!o&&"avakio-multiview-cell-hidden",M.className].filter(Boolean).join(" "),ce={...M.css};return(O||o)&&(ce.animationDuration=`${J}ms`,ce.animationTimingFunction="ease-out",ce.animationFillMode="both",ce.animationPlayState="running"),e.jsx("div",{"data-view-id":M.id,className:R,style:ce,children:M.content},M.id)})})})});ba.displayName="AvakioMultiview";const ga=t.forwardRef(({template:s,data:r={},content:l,url:i,theme:c="material",borderType:m="space",type:w="clean",borderless:A=!1,autoheight:z=!1,scroll:V=!1,width:p,height:D,minWidth:W,minHeight:ee,maxWidth:K,maxHeight:_,padding:L,margin:J,className:j="",css:q,hidden:E=!1,disabled:f=!1,id:te,testId:S,onLoad:F,onChange:$,onClick:T},a)=>{const[P,N]=t.useState(r),[H,ue]=t.useState(l),[le,u]=t.useState(""),[v,g]=t.useState(E),[I,Z]=t.useState(f),[b,Y]=t.useState(""),de=t.useRef(null),G=t.useRef(F);t.useEffect(()=>{G.current=F},[F]),t.useEffect(()=>{g(E)},[E]),t.useEffect(()=>{Z(f)},[f]),t.useEffect(()=>{i&&fetch(i).then(o=>o.text()).then(o=>{Y(o),G.current?.()}).catch(o=>console.error("Failed to load template from URL:",o))},[i]);const U=t.useRef(JSON.stringify(r));t.useEffect(()=>{const o=JSON.stringify(r);o!==U.current&&(U.current=o,N(r))},[r]);const ie=t.useRef(l);t.useEffect(()=>{l!==ie.current&&(ie.current=l,ue(l))},[l]);const ae=(o,O)=>o.replace(/#(\w+)#/g,(R,ce)=>O[ce]!==void 0?String(O[ce]):R),ne=()=>{if(le)return e.jsx("div",{dangerouslySetInnerHTML:{__html:le}});if(b)return e.jsx("div",{dangerouslySetInnerHTML:{__html:ae(b,P)}});if(typeof s=="function")return s(P);if(typeof s=="string"){const o=ae(s,P);return e.jsx("div",{dangerouslySetInnerHTML:{__html:o}})}return H||null};t.useImperativeHandle(a,()=>({setValues:o=>{N(o),$?.(o)},getValues:()=>P,setHTML:o=>{u(o)},getHTML:()=>de.current?.innerHTML||"",refresh:()=>{N({...P})},parse:o=>{N(o),$?.(o)},show:()=>{g(!1)},hide:()=>{g(!0)},enable:()=>{Z(!1)},disable:()=>{Z(!0)},getNode:()=>de.current}));const M=["avakio-template",`avakio-template-theme-${c}`,`avakio-template-border-${m}`,`avakio-template-type-${w}`,A?"avakio-template-borderless":"",z?"avakio-template-autoheight":"",V===!0||V==="xy"?"avakio-template-scroll-xy":"",V==="x"?"avakio-template-scroll-x":"",V==="y"?"avakio-template-scroll-y":"",v?"avakio-template-hidden":"",I?"avakio-template-disabled":"",j].filter(Boolean).join(" "),k={width:typeof p=="number"?`${p}px`:p,height:typeof D=="number"?`${D}px`:D,minWidth:typeof W=="number"?`${W}px`:W,minHeight:typeof ee=="number"?`${ee}px`:ee,maxWidth:typeof K=="number"?`${K}px`:K,maxHeight:typeof _=="number"?`${_}px`:_,padding:Array.isArray(L)?`${L[0]}px ${L[1]}px ${L[2]}px ${L[3]}px`:typeof L=="number"?`${L}px`:L,margin:Array.isArray(J)?`${J[0]}px ${J[1]}px ${J[2]}px ${J[3]}px`:typeof J=="number"?`${J}px`:J,...q&&typeof q=="object"&&!Array.isArray(q)?q:{}};return e.jsx("div",{ref:de,id:te,"data-testid":S,className:M,style:k,onClick:T,children:e.jsx("div",{className:"avakio-template-content",children:ne()})})});ga.displayName="AvakioTemplate",Ce.AvakioAbsoluteLayout=Xt,Ce.AvakioAccordion=ra,Ce.AvakioBulletGraph=is,Ce.AvakioButton=_t,Ce.AvakioCalendar=Wt,Ce.AvakioCarousel=na,Ce.AvakioChart=oa,Ce.AvakioCheckbox=Et,Ce.AvakioColorPicker=It,Ce.AvakioCombo=Lt,Ce.AvakioComment=Ut,Ce.AvakioCounter=Tt,Ce.AvakioDashboard=ia,Ce.AvakioDataTable=Ra,Ce.AvakioDatePicker=Ze,Ce.AvakioDateRangePicker=zt,Ce.AvakioDoubleList=ss,Ce.AvakioExcelViewer=ca,Ce.AvakioFieldset=Jt,Ce.AvakioForm=ha,Ce.AvakioFormField=gs,Ce.AvakioGage=ys,Ce.AvakioGoogleMap=xs,Ce.AvakioGrid=ft,Ce.AvakioGridSuggest=Ft,Ce.AvakioGroupList=Ss,Ce.AvakioHint=va,Ce.AvakioLabel=Zt,Ce.AvakioLayout=ts,Ce.AvakioMultiCombo=Pt,Ce.AvakioMultitext=Qt,Ce.AvakioMultiview=ba,Ce.AvakioPopup=gt,Ce.AvakioPortletBoard=wa,Ce.AvakioProperty=Ka,Ce.AvakioRadio=Rt,Ce.AvakioResizer=as,Ce.AvakioRichSelect=Ht,Ce.AvakioRichSelectAPI=Wa,Ce.AvakioScheduler=qa,Ce.AvakioSegmentedButton=ea,Ce.AvakioSidebar=Ua,Ce.AvakioSidebarToggleButton=Ya,Ce.AvakioSlider=Bt,Ce.AvakioSwitchButton=ta,Ce.AvakioTabBar=os,Ce.AvakioTemplate=ga,Ce.AvakioText=aa,Ce.AvakioTimeline=es,Ce.AvakioToggleButton=sa,Ce.AvakioTree=Gt,Ce.AvakioView=pt,Ce.AvakioViewHeader=ka,Ce.AvakioViewWithRef=pa,Ce.FormRules=ps,Ce.avakioPortletThemes=ma,Ce.avakioThemes=ws,Ce.useFormContext=ua,Object.defineProperty(Ce,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=avakio-ui-components.umd.cjs.map
